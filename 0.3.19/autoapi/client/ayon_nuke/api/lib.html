<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=gizmo_menu.html><link rel=next href=pipeline.html><link rel=icon href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.2"><title>lib - ayon-nuke</title><link rel=stylesheet href=../../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ab4e12ef.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../css/custom.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_nuke.api.lib class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../index.html title=ayon-nuke class="md-header__button md-logo" aria-label=ayon-nuke data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-nuke </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> lib </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-nuke title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../index.html title=ayon-nuke class="md-nav__button md-logo" aria-label=ayon-nuke data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-nuke </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-nuke title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <label class=md-nav__link for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class=md-ellipsis> ayon_nuke </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_nuke </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../addon.html class=md-nav__link> <span class=md-ellipsis> addon </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_2 checked> <label class=md-nav__link for=__nav_3_1_1_2 id=__nav_3_1_1_2_label tabindex=0> <span class=md-ellipsis> api </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_2_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_2> <span class="md-nav__icon md-icon"></span> api </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class=md-nav__item> <a href=colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=command.html class=md-nav__link> <span class=md-ellipsis> command </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=gizmo_menu.html class=md-nav__link> <span class=md-ellipsis> gizmo_menu </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </label> <a href=lib.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> lib </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib class=md-nav__link> <span class=md-ellipsis> lib </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.DirmapCache class=md-nav__link> <span class=md-ellipsis> DirmapCache </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.Knobby class=md-nav__link> <span class=md-ellipsis> Knobby </span> </a> <nav class=md-nav aria-label=Knobby> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.Knobby.nice_naming class=md-nav__link> <span class=md-ellipsis> nice_naming </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.NukeDirmap class=md-nav__link> <span class=md-ellipsis> NukeDirmap </span> </a> <nav class=md-nav aria-label=NukeDirmap> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.NukeDirmap.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings class=md-nav__link> <span class=md-ellipsis> WorkfileSettings </span> </a> <nav class=md-nav aria-label=WorkfileSettings> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.reset_frame_range_handles class=md-nav__link> <span class=md-ellipsis> reset_frame_range_handles </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.reset_resolution class=md-nav__link> <span class=md-ellipsis> reset_resolution </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_colorspace class=md-nav__link> <span class=md-ellipsis> set_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_reads_colorspace class=md-nav__link> <span class=md-ellipsis> set_reads_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_root_colorspace class=md-nav__link> <span class=md-ellipsis> set_root_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_viewers_colorspace class=md-nav__link> <span class=md-ellipsis> set_viewers_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_writes_colorspace class=md-nav__link> <span class=md-ellipsis> set_writes_colorspace </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.add_publish_knob class=md-nav__link> <span class=md-ellipsis> add_publish_knob </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.add_write_node class=md-nav__link> <span class=md-ellipsis> add_write_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.check_inventory_versions class=md-nav__link> <span class=md-ellipsis> check_inventory_versions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.check_product_name_exists class=md-nav__link> <span class=md-ellipsis> check_product_name_exists </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_backdrop class=md-nav__link> <span class=md-ellipsis> create_backdrop </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_camera_node_by_version class=md-nav__link> <span class=md-ellipsis> create_camera_node_by_version </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_knobs class=md-nav__link> <span class=md-ellipsis> create_knobs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_viewer_profile_string class=md-nav__link> <span class=md-ellipsis> create_viewer_profile_string </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_write_node class=md-nav__link> <span class=md-ellipsis> create_write_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.deprecated class=md-nav__link> <span class=md-ellipsis> deprecated </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.dirmap_file_name_filter class=md-nav__link> <span class=md-ellipsis> dirmap_file_name_filter </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.find_free_space_to_paste_nodes class=md-nav__link> <span class=md-ellipsis> find_free_space_to_paste_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_avalon_knob_data class=md-nav__link> <span class=md-ellipsis> get_avalon_knob_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_current_context_template_data_and_environ class=md-nav__link> <span class=md-ellipsis> get_current_context_template_data_and_environ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_dependent_nodes class=md-nav__link> <span class=md-ellipsis> get_dependent_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_extreme_positions class=md-nav__link> <span class=md-ellipsis> get_extreme_positions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_filenames_without_hash class=md-nav__link> <span class=md-ellipsis> get_filenames_without_hash </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_group_io_nodes class=md-nav__link> <span class=md-ellipsis> get_group_io_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_imageio_input_colorspace class=md-nav__link> <span class=md-ellipsis> get_imageio_input_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_imageio_node_override_setting class=md-nav__link> <span class=md-ellipsis> get_imageio_node_override_setting </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_imageio_node_setting class=md-nav__link> <span class=md-ellipsis> get_imageio_node_setting </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_main_window class=md-nav__link> <span class=md-ellipsis> get_main_window </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_matching_override_node class=md-nav__link> <span class=md-ellipsis> get_matching_override_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_names_from_nodes class=md-nav__link> <span class=md-ellipsis> get_names_from_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_node_data class=md-nav__link> <span class=md-ellipsis> get_node_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_node_path class=md-nav__link> <span class=md-ellipsis> get_node_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_nodes_by_names class=md-nav__link> <span class=md-ellipsis> get_nodes_by_names </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_version_from_path class=md-nav__link> <span class=md-ellipsis> get_version_from_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_viewer_config_from_string class=md-nav__link> <span class=md-ellipsis> get_viewer_config_from_string </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_work_default_directory class=md-nav__link> <span class=md-ellipsis> get_work_default_directory </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_write_node_template_attr class=md-nav__link> <span class=md-ellipsis> get_write_node_template_attr </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.imprint class=md-nav__link> <span class=md-ellipsis> imprint </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.launch_workfiles_app class=md-nav__link> <span class=md-ellipsis> launch_workfiles_app </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.link_knobs class=md-nav__link> <span class=md-ellipsis> link_knobs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.maintained_selection class=md-nav__link> <span class=md-ellipsis> maintained_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.node_tempfile class=md-nav__link> <span class=md-ellipsis> node_tempfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.on_script_load class=md-nav__link> <span class=md-ellipsis> on_script_load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.process_workfile_builder class=md-nav__link> <span class=md-ellipsis> process_workfile_builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.read_avalon_data class=md-nav__link> <span class=md-ellipsis> read_avalon_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.refresh_node class=md-nav__link> <span class=md-ellipsis> refresh_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.reset_selection class=md-nav__link> <span class=md-ellipsis> reset_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.script_name class=md-nav__link> <span class=md-ellipsis> script_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.select_nodes class=md-nav__link> <span class=md-ellipsis> select_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.set_avalon_knob_data class=md-nav__link> <span class=md-ellipsis> set_avalon_knob_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.set_node_data class=md-nav__link> <span class=md-ellipsis> set_node_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.set_node_knobs_from_settings class=md-nav__link> <span class=md-ellipsis> set_node_knobs_from_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.swap_node_with_dependency class=md-nav__link> <span class=md-ellipsis> swap_node_with_dependency </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.update_node_data class=md-nav__link> <span class=md-ellipsis> update_node_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.writes_version_sync class=md-nav__link> <span class=md-ellipsis> writes_version_sync </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=pipeline.html class=md-nav__link> <span class=md-ellipsis> pipeline </span> </a> </li> <li class=md-nav__item> <a href=plugin.html class=md-nav__link> <span class=md-ellipsis> plugin </span> </a> </li> <li class=md-nav__item> <a href=push_to_project.html class=md-nav__link> <span class=md-ellipsis> push_to_project </span> </a> </li> <li class=md-nav__item> <a href=utils.html class=md-nav__link> <span class=md-ellipsis> utils </span> </a> </li> <li class=md-nav__item> <a href=workfile_template_builder.html class=md-nav__link> <span class=md-ellipsis> workfile_template_builder </span> </a> </li> <li class=md-nav__item> <a href=workio.html class=md-nav__link> <span class=md-ellipsis> workio </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../hooks/pre_nukeassist_setup.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../plugins/create/convert_legacy.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../startup/clear_rendered.html class=md-nav__link> <span class=md-ellipsis> startup </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../vendor/google/protobuf/any_pb2.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../server/settings/common.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib class=md-nav__link> <span class=md-ellipsis> lib </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.DirmapCache class=md-nav__link> <span class=md-ellipsis> DirmapCache </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.Knobby class=md-nav__link> <span class=md-ellipsis> Knobby </span> </a> <nav class=md-nav aria-label=Knobby> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.Knobby.nice_naming class=md-nav__link> <span class=md-ellipsis> nice_naming </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.NukeDirmap class=md-nav__link> <span class=md-ellipsis> NukeDirmap </span> </a> <nav class=md-nav aria-label=NukeDirmap> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.NukeDirmap.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings class=md-nav__link> <span class=md-ellipsis> WorkfileSettings </span> </a> <nav class=md-nav aria-label=WorkfileSettings> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.reset_frame_range_handles class=md-nav__link> <span class=md-ellipsis> reset_frame_range_handles </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.reset_resolution class=md-nav__link> <span class=md-ellipsis> reset_resolution </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_colorspace class=md-nav__link> <span class=md-ellipsis> set_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_reads_colorspace class=md-nav__link> <span class=md-ellipsis> set_reads_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_root_colorspace class=md-nav__link> <span class=md-ellipsis> set_root_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_viewers_colorspace class=md-nav__link> <span class=md-ellipsis> set_viewers_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.WorkfileSettings.set_writes_colorspace class=md-nav__link> <span class=md-ellipsis> set_writes_colorspace </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.add_publish_knob class=md-nav__link> <span class=md-ellipsis> add_publish_knob </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.add_write_node class=md-nav__link> <span class=md-ellipsis> add_write_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.check_inventory_versions class=md-nav__link> <span class=md-ellipsis> check_inventory_versions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.check_product_name_exists class=md-nav__link> <span class=md-ellipsis> check_product_name_exists </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_backdrop class=md-nav__link> <span class=md-ellipsis> create_backdrop </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_camera_node_by_version class=md-nav__link> <span class=md-ellipsis> create_camera_node_by_version </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_knobs class=md-nav__link> <span class=md-ellipsis> create_knobs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_viewer_profile_string class=md-nav__link> <span class=md-ellipsis> create_viewer_profile_string </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.create_write_node class=md-nav__link> <span class=md-ellipsis> create_write_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.deprecated class=md-nav__link> <span class=md-ellipsis> deprecated </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.dirmap_file_name_filter class=md-nav__link> <span class=md-ellipsis> dirmap_file_name_filter </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.find_free_space_to_paste_nodes class=md-nav__link> <span class=md-ellipsis> find_free_space_to_paste_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_avalon_knob_data class=md-nav__link> <span class=md-ellipsis> get_avalon_knob_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_current_context_template_data_and_environ class=md-nav__link> <span class=md-ellipsis> get_current_context_template_data_and_environ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_dependent_nodes class=md-nav__link> <span class=md-ellipsis> get_dependent_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_extreme_positions class=md-nav__link> <span class=md-ellipsis> get_extreme_positions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_filenames_without_hash class=md-nav__link> <span class=md-ellipsis> get_filenames_without_hash </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_group_io_nodes class=md-nav__link> <span class=md-ellipsis> get_group_io_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_imageio_input_colorspace class=md-nav__link> <span class=md-ellipsis> get_imageio_input_colorspace </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_imageio_node_override_setting class=md-nav__link> <span class=md-ellipsis> get_imageio_node_override_setting </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_imageio_node_setting class=md-nav__link> <span class=md-ellipsis> get_imageio_node_setting </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_main_window class=md-nav__link> <span class=md-ellipsis> get_main_window </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_matching_override_node class=md-nav__link> <span class=md-ellipsis> get_matching_override_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_names_from_nodes class=md-nav__link> <span class=md-ellipsis> get_names_from_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_node_data class=md-nav__link> <span class=md-ellipsis> get_node_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_node_path class=md-nav__link> <span class=md-ellipsis> get_node_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_nodes_by_names class=md-nav__link> <span class=md-ellipsis> get_nodes_by_names </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_version_from_path class=md-nav__link> <span class=md-ellipsis> get_version_from_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_viewer_config_from_string class=md-nav__link> <span class=md-ellipsis> get_viewer_config_from_string </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_work_default_directory class=md-nav__link> <span class=md-ellipsis> get_work_default_directory </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.get_write_node_template_attr class=md-nav__link> <span class=md-ellipsis> get_write_node_template_attr </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.imprint class=md-nav__link> <span class=md-ellipsis> imprint </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.launch_workfiles_app class=md-nav__link> <span class=md-ellipsis> launch_workfiles_app </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.link_knobs class=md-nav__link> <span class=md-ellipsis> link_knobs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.maintained_selection class=md-nav__link> <span class=md-ellipsis> maintained_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.node_tempfile class=md-nav__link> <span class=md-ellipsis> node_tempfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.on_script_load class=md-nav__link> <span class=md-ellipsis> on_script_load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.process_workfile_builder class=md-nav__link> <span class=md-ellipsis> process_workfile_builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.read_avalon_data class=md-nav__link> <span class=md-ellipsis> read_avalon_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.refresh_node class=md-nav__link> <span class=md-ellipsis> refresh_node </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.reset_selection class=md-nav__link> <span class=md-ellipsis> reset_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.script_name class=md-nav__link> <span class=md-ellipsis> script_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.select_nodes class=md-nav__link> <span class=md-ellipsis> select_nodes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.set_avalon_knob_data class=md-nav__link> <span class=md-ellipsis> set_avalon_knob_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.set_node_data class=md-nav__link> <span class=md-ellipsis> set_node_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.set_node_knobs_from_settings class=md-nav__link> <span class=md-ellipsis> set_node_knobs_from_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.swap_node_with_dependency class=md-nav__link> <span class=md-ellipsis> swap_node_with_dependency </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.update_node_data class=md-nav__link> <span class=md-ellipsis> update_node_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_nuke.api.lib.writes_version_sync class=md-nav__link> <span class=md-ellipsis> writes_version_sync </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../../../../index.html class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../addon.html class=md-path__link> <span class=md-ellipsis> Reference </span> </a> </li> <li class=md-path__item> <a href=../addon.html class=md-path__link> <span class=md-ellipsis> client </span> </a> </li> <li class=md-path__item> <a href=../addon.html class=md-path__link> <span class=md-ellipsis> ayon_nuke </span> </a> </li> <li class=md-path__item> <a href=actions.html class=md-path__link> <span class=md-ellipsis> api </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1>lib</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_nuke.api.lib></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_nuke.api.lib.DirmapCache class="doc doc-heading"> <code>DirmapCache</code> </h2> <div class="doc doc-contents "> <p>Caching class to get settings and sitesync easily and only once.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2719</span>
<span class=normal>2720</span>
<span class=normal>2721</span>
<span class=normal>2722</span>
<span class=normal>2723</span>
<span class=normal>2724</span>
<span class=normal>2725</span>
<span class=normal>2726</span>
<span class=normal>2727</span>
<span class=normal>2728</span>
<span class=normal>2729</span>
<span class=normal>2730</span>
<span class=normal>2731</span>
<span class=normal>2732</span>
<span class=normal>2733</span>
<span class=normal>2734</span>
<span class=normal>2735</span>
<span class=normal>2736</span>
<span class=normal>2737</span>
<span class=normal>2738</span>
<span class=normal>2739</span>
<span class=normal>2740</span>
<span class=normal>2741</span>
<span class=normal>2742</span>
<span class=normal>2743</span>
<span class=normal>2744</span>
<span class=normal>2745</span>
<span class=normal>2746</span>
<span class=normal>2747</span>
<span class=normal>2748</span>
<span class=normal>2749</span>
<span class=normal>2750</span>
<span class=normal>2751</span>
<span class=normal>2752</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>DirmapCache</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Caching class to get settings and sitesync easily and only once.&quot;&quot;&quot;</span>
    <span class=n>_project_name</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>_project_settings</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>_sitesync_addon_discovered</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=n>_sitesync_addon</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>_mapping</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_name</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_project_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_project_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_project_name</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_settings</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_project_settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>project_name</span><span class=p>())</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_project_settings</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>sitesync_addon</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon_discovered</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon_discovered</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon</span> <span class=o>=</span> <span class=n>AddonsManager</span><span class=p>()</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;sitesync&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>mapping</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_mapping</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_mapping</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>mapping</span><span class=p>):</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>_mapping</span> <span class=o>=</span> <span class=n>mapping</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_nuke.api.lib.Knobby class="doc doc-heading"> <code>Knobby</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>[DEPRECATED] For creating knob which it's type isn't mapped in <code>create_knobs</code></p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>type</code> </td> <td> <code><span title=string>string</span></code> </td> <td> <div class=doc-md-description> <p>Nuke knob type name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Value to be set with <code>Knob.setValue</code>, put <code>None</code> if not required</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>flags</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>Knob flags to be set with <code>Knob.setFlag</code></p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Args other than knob name for initializing knob class</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Knobby</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;[DEPRECATED] For creating knob which it&#39;s type isn&#39;t</span>
<span class=sd>                    mapped in `create_knobs`</span>

<span class=sd>    Args:</span>
<span class=sd>        type (string): Nuke knob type name</span>
<span class=sd>        value: Value to be set with `Knob.setValue`, put `None` if not required</span>
<span class=sd>        flags (list, optional): Knob flags to be set with `Knob.setFlag`</span>
<span class=sd>        *args: Args other than knob name for initializing knob class</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>type</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>type</span> <span class=o>=</span> <span class=nb>type</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>flags</span> <span class=o>=</span> <span class=n>flags</span> <span class=ow>or</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>args</span> <span class=o>=</span> <span class=n>args</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=n>knob_cls</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>nuke</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>type</span><span class=p>)</span>
        <span class=n>knob</span> <span class=o>=</span> <span class=n>knob_cls</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>,</span> <span class=o>*</span><span class=bp>self</span><span class=o>.</span><span class=n>args</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>flag</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>flags</span><span class=p>:</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setFlag</span><span class=p>(</span><span class=n>flag</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>knob</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>nice_naming</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert camelCase name into UI Display Name&quot;&quot;&quot;</span>
        <span class=n>words</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=s1>&#39;[A-Z][^A-Z]*&#39;</span><span class=p>,</span> <span class=n>key</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=o>+</span> <span class=n>key</span><span class=p>[</span><span class=mi>1</span><span class=p>:])</span>
        <span class=k>return</span> <span class=s2>&quot; &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>words</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.Knobby.nice_naming class="doc doc-heading"> <code class="highlight language-python"><span class=n>nice_naming</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert camelCase name into UI Display Name</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>nice_naming</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert camelCase name into UI Display Name&quot;&quot;&quot;</span>
    <span class=n>words</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=s1>&#39;[A-Z][^A-Z]*&#39;</span><span class=p>,</span> <span class=n>key</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=o>+</span> <span class=n>key</span><span class=p>[</span><span class=mi>1</span><span class=p>:])</span>
    <span class=k>return</span> <span class=s2>&quot; &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>words</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_nuke.api.lib.NukeDirmap class="doc doc-heading"> <code>NukeDirmap</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=ayon_core.host.HostDirmap>HostDirmap</span></code></p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2693</span>
<span class=normal>2694</span>
<span class=normal>2695</span>
<span class=normal>2696</span>
<span class=normal>2697</span>
<span class=normal>2698</span>
<span class=normal>2699</span>
<span class=normal>2700</span>
<span class=normal>2701</span>
<span class=normal>2702</span>
<span class=normal>2703</span>
<span class=normal>2704</span>
<span class=normal>2705</span>
<span class=normal>2706</span>
<span class=normal>2707</span>
<span class=normal>2708</span>
<span class=normal>2709</span>
<span class=normal>2710</span>
<span class=normal>2711</span>
<span class=normal>2712</span>
<span class=normal>2713</span>
<span class=normal>2714</span>
<span class=normal>2715</span>
<span class=normal>2716</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>NukeDirmap</span><span class=p>(</span><span class=n>HostDirmap</span><span class=p>):</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Args:</span>
<span class=sd>            file_name (str): full path of referenced file from workfiles</span>
<span class=sd>            *args (tuple): Positional arguments for &#39;HostDirmap&#39; class</span>
<span class=sd>            **kwargs (dict): Keyword arguments for &#39;HostDirmap&#39; class</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>file_name</span> <span class=o>=</span> <span class=n>file_name</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>NukeDirmap</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>on_enable_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>dirmap_routine</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source_path</span><span class=p>,</span> <span class=n>destination_path</span><span class=p>):</span>
        <span class=n>source_path</span> <span class=o>=</span> <span class=n>source_path</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>sep</span><span class=p>,</span> <span class=s1>&#39;/&#39;</span><span class=p>)</span>
        <span class=n>destination_path</span> <span class=o>=</span> <span class=n>destination_path</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>sep</span><span class=p>,</span> <span class=s1>&#39;/&#39;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>file_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>file_name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span>
                <span class=n>source_path</span><span class=p>,</span> <span class=n>destination_path</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>file_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>file_name</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span>
                <span class=n>source_path</span><span class=p>,</span> <span class=n>destination_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.NukeDirmap.__init__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>(</span><span class=n>file_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>file_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>full path of referenced file from workfiles</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=tuple>tuple</span></code> </td> <td> <div class=doc-md-description> <p>Positional arguments for 'HostDirmap' class</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Keyword arguments for 'HostDirmap' class</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2694</span>
<span class=normal>2695</span>
<span class=normal>2696</span>
<span class=normal>2697</span>
<span class=normal>2698</span>
<span class=normal>2699</span>
<span class=normal>2700</span>
<span class=normal>2701</span>
<span class=normal>2702</span>
<span class=normal>2703</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Args:</span>
<span class=sd>        file_name (str): full path of referenced file from workfiles</span>
<span class=sd>        *args (tuple): Positional arguments for &#39;HostDirmap&#39; class</span>
<span class=sd>        **kwargs (dict): Keyword arguments for &#39;HostDirmap&#39; class</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>file_name</span> <span class=o>=</span> <span class=n>file_name</span>
    <span class=nb>super</span><span class=p>(</span><span class=n>NukeDirmap</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_nuke.api.lib.WorkfileSettings class="doc doc-heading"> <code>WorkfileSettings</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>All settings for workfile will be set</p> <p>This object is setting all possible root settings to the workfile. Including Colorspace, Frame ranges, Resolution format. It can set it to Root node or to any given node.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>root</code> </td> <td> <code><span title=node>node</span></code> </td> <td> <div class=doc-md-description> <p>nuke's root node</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of nuke's nodes</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>nodes_filter</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>filtering classes for nodes</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1473</span>
<span class=normal>1474</span>
<span class=normal>1475</span>
<span class=normal>1476</span>
<span class=normal>1477</span>
<span class=normal>1478</span>
<span class=normal>1479</span>
<span class=normal>1480</span>
<span class=normal>1481</span>
<span class=normal>1482</span>
<span class=normal>1483</span>
<span class=normal>1484</span>
<span class=normal>1485</span>
<span class=normal>1486</span>
<span class=normal>1487</span>
<span class=normal>1488</span>
<span class=normal>1489</span>
<span class=normal>1490</span>
<span class=normal>1491</span>
<span class=normal>1492</span>
<span class=normal>1493</span>
<span class=normal>1494</span>
<span class=normal>1495</span>
<span class=normal>1496</span>
<span class=normal>1497</span>
<span class=normal>1498</span>
<span class=normal>1499</span>
<span class=normal>1500</span>
<span class=normal>1501</span>
<span class=normal>1502</span>
<span class=normal>1503</span>
<span class=normal>1504</span>
<span class=normal>1505</span>
<span class=normal>1506</span>
<span class=normal>1507</span>
<span class=normal>1508</span>
<span class=normal>1509</span>
<span class=normal>1510</span>
<span class=normal>1511</span>
<span class=normal>1512</span>
<span class=normal>1513</span>
<span class=normal>1514</span>
<span class=normal>1515</span>
<span class=normal>1516</span>
<span class=normal>1517</span>
<span class=normal>1518</span>
<span class=normal>1519</span>
<span class=normal>1520</span>
<span class=normal>1521</span>
<span class=normal>1522</span>
<span class=normal>1523</span>
<span class=normal>1524</span>
<span class=normal>1525</span>
<span class=normal>1526</span>
<span class=normal>1527</span>
<span class=normal>1528</span>
<span class=normal>1529</span>
<span class=normal>1530</span>
<span class=normal>1531</span>
<span class=normal>1532</span>
<span class=normal>1533</span>
<span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span>
<span class=normal>1587</span>
<span class=normal>1588</span>
<span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span>
<span class=normal>1598</span>
<span class=normal>1599</span>
<span class=normal>1600</span>
<span class=normal>1601</span>
<span class=normal>1602</span>
<span class=normal>1603</span>
<span class=normal>1604</span>
<span class=normal>1605</span>
<span class=normal>1606</span>
<span class=normal>1607</span>
<span class=normal>1608</span>
<span class=normal>1609</span>
<span class=normal>1610</span>
<span class=normal>1611</span>
<span class=normal>1612</span>
<span class=normal>1613</span>
<span class=normal>1614</span>
<span class=normal>1615</span>
<span class=normal>1616</span>
<span class=normal>1617</span>
<span class=normal>1618</span>
<span class=normal>1619</span>
<span class=normal>1620</span>
<span class=normal>1621</span>
<span class=normal>1622</span>
<span class=normal>1623</span>
<span class=normal>1624</span>
<span class=normal>1625</span>
<span class=normal>1626</span>
<span class=normal>1627</span>
<span class=normal>1628</span>
<span class=normal>1629</span>
<span class=normal>1630</span>
<span class=normal>1631</span>
<span class=normal>1632</span>
<span class=normal>1633</span>
<span class=normal>1634</span>
<span class=normal>1635</span>
<span class=normal>1636</span>
<span class=normal>1637</span>
<span class=normal>1638</span>
<span class=normal>1639</span>
<span class=normal>1640</span>
<span class=normal>1641</span>
<span class=normal>1642</span>
<span class=normal>1643</span>
<span class=normal>1644</span>
<span class=normal>1645</span>
<span class=normal>1646</span>
<span class=normal>1647</span>
<span class=normal>1648</span>
<span class=normal>1649</span>
<span class=normal>1650</span>
<span class=normal>1651</span>
<span class=normal>1652</span>
<span class=normal>1653</span>
<span class=normal>1654</span>
<span class=normal>1655</span>
<span class=normal>1656</span>
<span class=normal>1657</span>
<span class=normal>1658</span>
<span class=normal>1659</span>
<span class=normal>1660</span>
<span class=normal>1661</span>
<span class=normal>1662</span>
<span class=normal>1663</span>
<span class=normal>1664</span>
<span class=normal>1665</span>
<span class=normal>1666</span>
<span class=normal>1667</span>
<span class=normal>1668</span>
<span class=normal>1669</span>
<span class=normal>1670</span>
<span class=normal>1671</span>
<span class=normal>1672</span>
<span class=normal>1673</span>
<span class=normal>1674</span>
<span class=normal>1675</span>
<span class=normal>1676</span>
<span class=normal>1677</span>
<span class=normal>1678</span>
<span class=normal>1679</span>
<span class=normal>1680</span>
<span class=normal>1681</span>
<span class=normal>1682</span>
<span class=normal>1683</span>
<span class=normal>1684</span>
<span class=normal>1685</span>
<span class=normal>1686</span>
<span class=normal>1687</span>
<span class=normal>1688</span>
<span class=normal>1689</span>
<span class=normal>1690</span>
<span class=normal>1691</span>
<span class=normal>1692</span>
<span class=normal>1693</span>
<span class=normal>1694</span>
<span class=normal>1695</span>
<span class=normal>1696</span>
<span class=normal>1697</span>
<span class=normal>1698</span>
<span class=normal>1699</span>
<span class=normal>1700</span>
<span class=normal>1701</span>
<span class=normal>1702</span>
<span class=normal>1703</span>
<span class=normal>1704</span>
<span class=normal>1705</span>
<span class=normal>1706</span>
<span class=normal>1707</span>
<span class=normal>1708</span>
<span class=normal>1709</span>
<span class=normal>1710</span>
<span class=normal>1711</span>
<span class=normal>1712</span>
<span class=normal>1713</span>
<span class=normal>1714</span>
<span class=normal>1715</span>
<span class=normal>1716</span>
<span class=normal>1717</span>
<span class=normal>1718</span>
<span class=normal>1719</span>
<span class=normal>1720</span>
<span class=normal>1721</span>
<span class=normal>1722</span>
<span class=normal>1723</span>
<span class=normal>1724</span>
<span class=normal>1725</span>
<span class=normal>1726</span>
<span class=normal>1727</span>
<span class=normal>1728</span>
<span class=normal>1729</span>
<span class=normal>1730</span>
<span class=normal>1731</span>
<span class=normal>1732</span>
<span class=normal>1733</span>
<span class=normal>1734</span>
<span class=normal>1735</span>
<span class=normal>1736</span>
<span class=normal>1737</span>
<span class=normal>1738</span>
<span class=normal>1739</span>
<span class=normal>1740</span>
<span class=normal>1741</span>
<span class=normal>1742</span>
<span class=normal>1743</span>
<span class=normal>1744</span>
<span class=normal>1745</span>
<span class=normal>1746</span>
<span class=normal>1747</span>
<span class=normal>1748</span>
<span class=normal>1749</span>
<span class=normal>1750</span>
<span class=normal>1751</span>
<span class=normal>1752</span>
<span class=normal>1753</span>
<span class=normal>1754</span>
<span class=normal>1755</span>
<span class=normal>1756</span>
<span class=normal>1757</span>
<span class=normal>1758</span>
<span class=normal>1759</span>
<span class=normal>1760</span>
<span class=normal>1761</span>
<span class=normal>1762</span>
<span class=normal>1763</span>
<span class=normal>1764</span>
<span class=normal>1765</span>
<span class=normal>1766</span>
<span class=normal>1767</span>
<span class=normal>1768</span>
<span class=normal>1769</span>
<span class=normal>1770</span>
<span class=normal>1771</span>
<span class=normal>1772</span>
<span class=normal>1773</span>
<span class=normal>1774</span>
<span class=normal>1775</span>
<span class=normal>1776</span>
<span class=normal>1777</span>
<span class=normal>1778</span>
<span class=normal>1779</span>
<span class=normal>1780</span>
<span class=normal>1781</span>
<span class=normal>1782</span>
<span class=normal>1783</span>
<span class=normal>1784</span>
<span class=normal>1785</span>
<span class=normal>1786</span>
<span class=normal>1787</span>
<span class=normal>1788</span>
<span class=normal>1789</span>
<span class=normal>1790</span>
<span class=normal>1791</span>
<span class=normal>1792</span>
<span class=normal>1793</span>
<span class=normal>1794</span>
<span class=normal>1795</span>
<span class=normal>1796</span>
<span class=normal>1797</span>
<span class=normal>1798</span>
<span class=normal>1799</span>
<span class=normal>1800</span>
<span class=normal>1801</span>
<span class=normal>1802</span>
<span class=normal>1803</span>
<span class=normal>1804</span>
<span class=normal>1805</span>
<span class=normal>1806</span>
<span class=normal>1807</span>
<span class=normal>1808</span>
<span class=normal>1809</span>
<span class=normal>1810</span>
<span class=normal>1811</span>
<span class=normal>1812</span>
<span class=normal>1813</span>
<span class=normal>1814</span>
<span class=normal>1815</span>
<span class=normal>1816</span>
<span class=normal>1817</span>
<span class=normal>1818</span>
<span class=normal>1819</span>
<span class=normal>1820</span>
<span class=normal>1821</span>
<span class=normal>1822</span>
<span class=normal>1823</span>
<span class=normal>1824</span>
<span class=normal>1825</span>
<span class=normal>1826</span>
<span class=normal>1827</span>
<span class=normal>1828</span>
<span class=normal>1829</span>
<span class=normal>1830</span>
<span class=normal>1831</span>
<span class=normal>1832</span>
<span class=normal>1833</span>
<span class=normal>1834</span>
<span class=normal>1835</span>
<span class=normal>1836</span>
<span class=normal>1837</span>
<span class=normal>1838</span>
<span class=normal>1839</span>
<span class=normal>1840</span>
<span class=normal>1841</span>
<span class=normal>1842</span>
<span class=normal>1843</span>
<span class=normal>1844</span>
<span class=normal>1845</span>
<span class=normal>1846</span>
<span class=normal>1847</span>
<span class=normal>1848</span>
<span class=normal>1849</span>
<span class=normal>1850</span>
<span class=normal>1851</span>
<span class=normal>1852</span>
<span class=normal>1853</span>
<span class=normal>1854</span>
<span class=normal>1855</span>
<span class=normal>1856</span>
<span class=normal>1857</span>
<span class=normal>1858</span>
<span class=normal>1859</span>
<span class=normal>1860</span>
<span class=normal>1861</span>
<span class=normal>1862</span>
<span class=normal>1863</span>
<span class=normal>1864</span>
<span class=normal>1865</span>
<span class=normal>1866</span>
<span class=normal>1867</span>
<span class=normal>1868</span>
<span class=normal>1869</span>
<span class=normal>1870</span>
<span class=normal>1871</span>
<span class=normal>1872</span>
<span class=normal>1873</span>
<span class=normal>1874</span>
<span class=normal>1875</span>
<span class=normal>1876</span>
<span class=normal>1877</span>
<span class=normal>1878</span>
<span class=normal>1879</span>
<span class=normal>1880</span>
<span class=normal>1881</span>
<span class=normal>1882</span>
<span class=normal>1883</span>
<span class=normal>1884</span>
<span class=normal>1885</span>
<span class=normal>1886</span>
<span class=normal>1887</span>
<span class=normal>1888</span>
<span class=normal>1889</span>
<span class=normal>1890</span>
<span class=normal>1891</span>
<span class=normal>1892</span>
<span class=normal>1893</span>
<span class=normal>1894</span>
<span class=normal>1895</span>
<span class=normal>1896</span>
<span class=normal>1897</span>
<span class=normal>1898</span>
<span class=normal>1899</span>
<span class=normal>1900</span>
<span class=normal>1901</span>
<span class=normal>1902</span>
<span class=normal>1903</span>
<span class=normal>1904</span>
<span class=normal>1905</span>
<span class=normal>1906</span>
<span class=normal>1907</span>
<span class=normal>1908</span>
<span class=normal>1909</span>
<span class=normal>1910</span>
<span class=normal>1911</span>
<span class=normal>1912</span>
<span class=normal>1913</span>
<span class=normal>1914</span>
<span class=normal>1915</span>
<span class=normal>1916</span>
<span class=normal>1917</span>
<span class=normal>1918</span>
<span class=normal>1919</span>
<span class=normal>1920</span>
<span class=normal>1921</span>
<span class=normal>1922</span>
<span class=normal>1923</span>
<span class=normal>1924</span>
<span class=normal>1925</span>
<span class=normal>1926</span>
<span class=normal>1927</span>
<span class=normal>1928</span>
<span class=normal>1929</span>
<span class=normal>1930</span>
<span class=normal>1931</span>
<span class=normal>1932</span>
<span class=normal>1933</span>
<span class=normal>1934</span>
<span class=normal>1935</span>
<span class=normal>1936</span>
<span class=normal>1937</span>
<span class=normal>1938</span>
<span class=normal>1939</span>
<span class=normal>1940</span>
<span class=normal>1941</span>
<span class=normal>1942</span>
<span class=normal>1943</span>
<span class=normal>1944</span>
<span class=normal>1945</span>
<span class=normal>1946</span>
<span class=normal>1947</span>
<span class=normal>1948</span>
<span class=normal>1949</span>
<span class=normal>1950</span>
<span class=normal>1951</span>
<span class=normal>1952</span>
<span class=normal>1953</span>
<span class=normal>1954</span>
<span class=normal>1955</span>
<span class=normal>1956</span>
<span class=normal>1957</span>
<span class=normal>1958</span>
<span class=normal>1959</span>
<span class=normal>1960</span>
<span class=normal>1961</span>
<span class=normal>1962</span>
<span class=normal>1963</span>
<span class=normal>1964</span>
<span class=normal>1965</span>
<span class=normal>1966</span>
<span class=normal>1967</span>
<span class=normal>1968</span>
<span class=normal>1969</span>
<span class=normal>1970</span>
<span class=normal>1971</span>
<span class=normal>1972</span>
<span class=normal>1973</span>
<span class=normal>1974</span>
<span class=normal>1975</span>
<span class=normal>1976</span>
<span class=normal>1977</span>
<span class=normal>1978</span>
<span class=normal>1979</span>
<span class=normal>1980</span>
<span class=normal>1981</span>
<span class=normal>1982</span>
<span class=normal>1983</span>
<span class=normal>1984</span>
<span class=normal>1985</span>
<span class=normal>1986</span>
<span class=normal>1987</span>
<span class=normal>1988</span>
<span class=normal>1989</span>
<span class=normal>1990</span>
<span class=normal>1991</span>
<span class=normal>1992</span>
<span class=normal>1993</span>
<span class=normal>1994</span>
<span class=normal>1995</span>
<span class=normal>1996</span>
<span class=normal>1997</span>
<span class=normal>1998</span>
<span class=normal>1999</span>
<span class=normal>2000</span>
<span class=normal>2001</span>
<span class=normal>2002</span>
<span class=normal>2003</span>
<span class=normal>2004</span>
<span class=normal>2005</span>
<span class=normal>2006</span>
<span class=normal>2007</span>
<span class=normal>2008</span>
<span class=normal>2009</span>
<span class=normal>2010</span>
<span class=normal>2011</span>
<span class=normal>2012</span>
<span class=normal>2013</span>
<span class=normal>2014</span>
<span class=normal>2015</span>
<span class=normal>2016</span>
<span class=normal>2017</span>
<span class=normal>2018</span>
<span class=normal>2019</span>
<span class=normal>2020</span>
<span class=normal>2021</span>
<span class=normal>2022</span>
<span class=normal>2023</span>
<span class=normal>2024</span>
<span class=normal>2025</span>
<span class=normal>2026</span>
<span class=normal>2027</span>
<span class=normal>2028</span>
<span class=normal>2029</span>
<span class=normal>2030</span>
<span class=normal>2031</span>
<span class=normal>2032</span>
<span class=normal>2033</span>
<span class=normal>2034</span>
<span class=normal>2035</span>
<span class=normal>2036</span>
<span class=normal>2037</span>
<span class=normal>2038</span>
<span class=normal>2039</span>
<span class=normal>2040</span>
<span class=normal>2041</span>
<span class=normal>2042</span>
<span class=normal>2043</span>
<span class=normal>2044</span>
<span class=normal>2045</span>
<span class=normal>2046</span>
<span class=normal>2047</span>
<span class=normal>2048</span>
<span class=normal>2049</span>
<span class=normal>2050</span>
<span class=normal>2051</span>
<span class=normal>2052</span>
<span class=normal>2053</span>
<span class=normal>2054</span>
<span class=normal>2055</span>
<span class=normal>2056</span>
<span class=normal>2057</span>
<span class=normal>2058</span>
<span class=normal>2059</span>
<span class=normal>2060</span>
<span class=normal>2061</span>
<span class=normal>2062</span>
<span class=normal>2063</span>
<span class=normal>2064</span>
<span class=normal>2065</span>
<span class=normal>2066</span>
<span class=normal>2067</span>
<span class=normal>2068</span>
<span class=normal>2069</span>
<span class=normal>2070</span>
<span class=normal>2071</span>
<span class=normal>2072</span>
<span class=normal>2073</span>
<span class=normal>2074</span>
<span class=normal>2075</span>
<span class=normal>2076</span>
<span class=normal>2077</span>
<span class=normal>2078</span>
<span class=normal>2079</span>
<span class=normal>2080</span>
<span class=normal>2081</span>
<span class=normal>2082</span>
<span class=normal>2083</span>
<span class=normal>2084</span>
<span class=normal>2085</span>
<span class=normal>2086</span>
<span class=normal>2087</span>
<span class=normal>2088</span>
<span class=normal>2089</span>
<span class=normal>2090</span>
<span class=normal>2091</span>
<span class=normal>2092</span>
<span class=normal>2093</span>
<span class=normal>2094</span>
<span class=normal>2095</span>
<span class=normal>2096</span>
<span class=normal>2097</span>
<span class=normal>2098</span>
<span class=normal>2099</span>
<span class=normal>2100</span>
<span class=normal>2101</span>
<span class=normal>2102</span>
<span class=normal>2103</span>
<span class=normal>2104</span>
<span class=normal>2105</span>
<span class=normal>2106</span>
<span class=normal>2107</span>
<span class=normal>2108</span>
<span class=normal>2109</span>
<span class=normal>2110</span>
<span class=normal>2111</span>
<span class=normal>2112</span>
<span class=normal>2113</span>
<span class=normal>2114</span>
<span class=normal>2115</span>
<span class=normal>2116</span>
<span class=normal>2117</span>
<span class=normal>2118</span>
<span class=normal>2119</span>
<span class=normal>2120</span>
<span class=normal>2121</span>
<span class=normal>2122</span>
<span class=normal>2123</span>
<span class=normal>2124</span>
<span class=normal>2125</span>
<span class=normal>2126</span>
<span class=normal>2127</span>
<span class=normal>2128</span>
<span class=normal>2129</span>
<span class=normal>2130</span>
<span class=normal>2131</span>
<span class=normal>2132</span>
<span class=normal>2133</span>
<span class=normal>2134</span>
<span class=normal>2135</span>
<span class=normal>2136</span>
<span class=normal>2137</span>
<span class=normal>2138</span>
<span class=normal>2139</span>
<span class=normal>2140</span>
<span class=normal>2141</span>
<span class=normal>2142</span>
<span class=normal>2143</span>
<span class=normal>2144</span>
<span class=normal>2145</span>
<span class=normal>2146</span>
<span class=normal>2147</span>
<span class=normal>2148</span>
<span class=normal>2149</span>
<span class=normal>2150</span>
<span class=normal>2151</span>
<span class=normal>2152</span>
<span class=normal>2153</span>
<span class=normal>2154</span>
<span class=normal>2155</span>
<span class=normal>2156</span>
<span class=normal>2157</span>
<span class=normal>2158</span>
<span class=normal>2159</span>
<span class=normal>2160</span>
<span class=normal>2161</span>
<span class=normal>2162</span>
<span class=normal>2163</span>
<span class=normal>2164</span>
<span class=normal>2165</span>
<span class=normal>2166</span>
<span class=normal>2167</span>
<span class=normal>2168</span>
<span class=normal>2169</span>
<span class=normal>2170</span>
<span class=normal>2171</span>
<span class=normal>2172</span>
<span class=normal>2173</span>
<span class=normal>2174</span>
<span class=normal>2175</span>
<span class=normal>2176</span>
<span class=normal>2177</span>
<span class=normal>2178</span>
<span class=normal>2179</span>
<span class=normal>2180</span>
<span class=normal>2181</span>
<span class=normal>2182</span>
<span class=normal>2183</span>
<span class=normal>2184</span>
<span class=normal>2185</span>
<span class=normal>2186</span>
<span class=normal>2187</span>
<span class=normal>2188</span>
<span class=normal>2189</span>
<span class=normal>2190</span>
<span class=normal>2191</span>
<span class=normal>2192</span>
<span class=normal>2193</span>
<span class=normal>2194</span>
<span class=normal>2195</span>
<span class=normal>2196</span>
<span class=normal>2197</span>
<span class=normal>2198</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>WorkfileSettings</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    All settings for workfile will be set</span>

<span class=sd>    This object is setting all possible root settings to the workfile.</span>
<span class=sd>    Including Colorspace, Frame ranges, Resolution format. It can set it</span>
<span class=sd>    to Root node or to any given node.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        root (node): nuke&#39;s root node</span>
<span class=sd>        nodes (list): list of nuke&#39;s nodes</span>
<span class=sd>        nodes_filter (list): filtering classes for nodes</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>root_node</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>project_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>project_name</span> <span class=o>=</span> <span class=n>project_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>

        <span class=n>Context</span><span class=o>.</span><span class=n>_project_entity</span> <span class=o>=</span> <span class=n>project_entity</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_project_name</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folder_path</span> <span class=o>=</span> <span class=n>get_current_folder_path</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_path</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_path</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_name</span> <span class=o>=</span> <span class=n>get_current_task_name</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_context_label</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> &gt; </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_folder_path</span><span class=p>,</span>
                                               <span class=bp>self</span><span class=o>.</span><span class=n>_task_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_task_by_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_task_name</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span> <span class=o>=</span> <span class=n>root_node</span> <span class=ow>or</span> <span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=o>=</span><span class=n>nodes</span><span class=p>)</span>

        <span class=n>context_data</span> <span class=o>=</span> <span class=n>get_template_data_with_names</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_path</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_name</span><span class=p>,</span> <span class=s2>&quot;nuke&quot;</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>formatting_data</span> <span class=o>=</span> <span class=n>context_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_nodes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>nodes_filter</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=nb>list</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes_filter</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[</span><span class=n>n</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>()]</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=nb>list</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes_filter</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=n>nodes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
            <span class=k>for</span> <span class=nb>filter</span> <span class=ow>in</span> <span class=n>nodes_filter</span><span class=p>:</span>
                <span class=p>[</span><span class=n>nodes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>n</span><span class=p>)</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=nb>filter</span><span class=p>)]</span>
            <span class=k>return</span> <span class=n>nodes</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=nb>list</span><span class=p>)</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes_filter</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[</span><span class=n>n</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span><span class=p>]</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=nb>list</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes_filter</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=k>for</span> <span class=nb>filter</span> <span class=ow>in</span> <span class=n>nodes_filter</span><span class=p>:</span>
                <span class=k>return</span> <span class=p>[</span><span class=n>n</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_nodes</span> <span class=k>if</span> <span class=nb>filter</span> <span class=ow>in</span> <span class=n>n</span><span class=o>.</span><span class=n>Class</span><span class=p>()]</span>

    <span class=c1># TODO: move into ./colorspace.py</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_viewers_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>imageio_nuke</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&#39;&#39;&#39; Adds correct colorspace to viewer</span>

<span class=sd>        Arguments:</span>
<span class=sd>            imageio_nuke (dict): nuke colorspace configurations</span>

<span class=sd>        &#39;&#39;&#39;</span>
        <span class=n>filter_knobs</span> <span class=o>=</span> <span class=p>[</span>
            <span class=s2>&quot;viewerProcess&quot;</span><span class=p>,</span>
            <span class=s2>&quot;wipe_position&quot;</span><span class=p>,</span>
            <span class=s2>&quot;monitorOutOutputTransform&quot;</span>
        <span class=p>]</span>
        <span class=n>viewer_process</span> <span class=o>=</span> <span class=n>get_formatted_display_and_view</span><span class=p>(</span>
            <span class=n>imageio_nuke</span><span class=p>[</span><span class=s2>&quot;viewer&quot;</span><span class=p>],</span> <span class=bp>self</span><span class=o>.</span><span class=n>formatting_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span>
        <span class=p>)</span>
        <span class=n>output_transform</span> <span class=o>=</span> <span class=n>get_formatted_display_and_view</span><span class=p>(</span>
            <span class=n>imageio_nuke</span><span class=p>[</span><span class=s2>&quot;monitor&quot;</span><span class=p>],</span> <span class=bp>self</span><span class=o>.</span><span class=n>formatting_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span>
        <span class=p>)</span>
        <span class=n>erased_viewers</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&quot;Viewer&quot;</span><span class=p>):</span>
            <span class=c1># set viewProcess to preset from settings</span>
            <span class=n>v</span><span class=p>[</span><span class=s2>&quot;viewerProcess&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>viewer_process</span><span class=p>)</span>

            <span class=k>if</span> <span class=n>viewer_process</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>v</span><span class=p>[</span><span class=s2>&quot;viewerProcess&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>():</span>
                <span class=n>copy_inputs</span> <span class=o>=</span> <span class=n>v</span><span class=o>.</span><span class=n>dependencies</span><span class=p>()</span>
                <span class=n>copy_knobs</span> <span class=o>=</span> <span class=p>{</span>
                    <span class=n>k</span><span class=p>:</span> <span class=n>v</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>v</span><span class=o>.</span><span class=n>knobs</span><span class=p>()</span>
                    <span class=k>if</span> <span class=n>k</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>filter_knobs</span>
                <span class=p>}</span>

                <span class=c1># delete viewer with wrong settings</span>
                <span class=n>erased_viewers</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>())</span>
                <span class=n>nuke</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>v</span><span class=p>)</span>

                <span class=c1># create new viewer</span>
                <span class=n>nv</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;Viewer&quot;</span><span class=p>)</span>

                <span class=c1># connect to original inputs</span>
                <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>copy_inputs</span><span class=p>):</span>
                    <span class=n>nv</span><span class=o>.</span><span class=n>setInput</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span>

                <span class=c1># set copied knobs</span>
                <span class=k>for</span> <span class=n>knob_name</span><span class=p>,</span> <span class=n>knob_value</span> <span class=ow>in</span> <span class=n>copy_knobs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                    <span class=n>nv</span><span class=p>[</span><span class=n>knob_name</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knob_value</span><span class=p>)</span>

                <span class=c1># set viewerProcess</span>
                <span class=n>nv</span><span class=p>[</span><span class=s2>&quot;viewerProcess&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>viewer_process</span><span class=p>)</span>
                <span class=n>nv</span><span class=p>[</span><span class=s2>&quot;monitorOutOutputTransform&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>output_transform</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>erased_viewers</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Attention! Viewer nodes </span><span class=si>{}</span><span class=s2> were erased.&quot;</span>
                <span class=s2>&quot;It had wrong color profile&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>erased_viewers</span><span class=p>))</span>

    <span class=c1># TODO: move into ./colorspace.py</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_root_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>imageio_host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&#39;&#39;&#39; Adds correct colorspace to root</span>

<span class=sd>        Arguments:</span>
<span class=sd>            imageio_host (dict): host colorspace configurations</span>

<span class=sd>        &#39;&#39;&#39;</span>
        <span class=n>config_data</span> <span class=o>=</span> <span class=n>get_current_context_imageio_config_preset</span><span class=p>()</span>

        <span class=n>workfile_settings</span> <span class=o>=</span> <span class=n>imageio_host</span><span class=p>[</span><span class=s2>&quot;workfile&quot;</span><span class=p>]</span>
        <span class=n>color_management</span> <span class=o>=</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;color_management&quot;</span><span class=p>]</span>
        <span class=n>native_ocio_config</span> <span class=o>=</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;native_ocio_config&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>config_data</span><span class=p>:</span>
            <span class=c1># no ocio config found and no custom path used</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;colorManagement&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> \
                        <span class=ow>not</span> <span class=ow>in</span> <span class=n>color_management</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;colorManagement&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>color_management</span><span class=p>)</span>

            <span class=c1># second set ocio version</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;OCIO_config&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> \
                        <span class=ow>not</span> <span class=ow>in</span> <span class=n>native_ocio_config</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;OCIO_config&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>native_ocio_config</span><span class=p>)</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=c1># OCIO config path is defined from prelaunch hook</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;colorManagement&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=s2>&quot;OCIO&quot;</span><span class=p>)</span>

            <span class=c1># print previous settings in case some were found in workfile</span>
            <span class=n>residual_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;customOCIOConfigPath&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>residual_path</span><span class=p>:</span>
                <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Residual OCIO config path found: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>residual_path</span>
                <span class=p>))</span>

        <span class=c1># set ocio config path</span>
        <span class=k>if</span> <span class=n>config_data</span><span class=p>:</span>
            <span class=n>config_path</span> <span class=o>=</span> <span class=n>config_data</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;OCIO config path found: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>config_path</span><span class=p>))</span>

            <span class=c1># check if there&#39;s a mismatch between environment and settings</span>
            <span class=n>correct_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_settings_matching_environment</span><span class=p>(</span>
                <span class=n>config_data</span><span class=p>)</span>

            <span class=c1># if there&#39;s no mismatch between environment and settings</span>
            <span class=k>if</span> <span class=n>correct_settings</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_set_ocio_config_path_to_workfile</span><span class=p>(</span><span class=n>config_data</span><span class=p>)</span>

        <span class=n>workfile_settings_output</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=c1># get monitor lut from settings respecting Nuke version differences</span>
        <span class=n>monitor_lut_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_monitor_settings</span><span class=p>(</span>
            <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;monitor_out_lut&quot;</span><span class=p>],</span>
            <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;monitor_lut&quot;</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>workfile_settings_output</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>monitor_lut_data</span><span class=p>)</span>
        <span class=n>workfile_settings_output</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
            <span class=p>{</span>
                <span class=s2>&quot;workingSpaceLUT&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;working_space&quot;</span><span class=p>],</span>
                <span class=s2>&quot;int8Lut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;int_8_lut&quot;</span><span class=p>],</span>
                <span class=s2>&quot;int16Lut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;int_16_lut&quot;</span><span class=p>],</span>
                <span class=s2>&quot;logLut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;log_lut&quot;</span><span class=p>],</span>
                <span class=s2>&quot;floatLut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;float_lut&quot;</span><span class=p>],</span>
            <span class=p>}</span>
        <span class=p>)</span>

        <span class=c1># then set the rest</span>
        <span class=k>for</span> <span class=n>knob</span><span class=p>,</span> <span class=n>value_</span> <span class=ow>in</span> <span class=n>workfile_settings_output</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=c1># skip unfilled ocio config path</span>
            <span class=c1># it will be dict in value</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value_</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=c1># skip empty values</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>value_</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=n>knob</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>value_</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_monitor_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>viewer_lut</span><span class=p>,</span> <span class=n>monitor_lut</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Get monitor settings from viewer and monitor lut</span>

<span class=sd>        Args:</span>
<span class=sd>            viewer_lut (str): viewer lut string</span>
<span class=sd>            monitor_lut (str): monitor lut string</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict: monitor settings</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>output_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>m_display</span><span class=p>,</span> <span class=n>m_viewer</span> <span class=o>=</span> <span class=n>get_viewer_config_from_string</span><span class=p>(</span><span class=n>monitor_lut</span><span class=p>)</span>
        <span class=n>v_display</span><span class=p>,</span> <span class=n>v_viewer</span> <span class=o>=</span> <span class=n>get_viewer_config_from_string</span><span class=p>(</span><span class=n>viewer_lut</span><span class=p>)</span>

        <span class=c1># set monitor lut differently for nuke version 14</span>
        <span class=k>if</span> <span class=n>nuke</span><span class=o>.</span><span class=n>NUKE_VERSION_MAJOR</span> <span class=o>&gt;=</span> <span class=mi>14</span><span class=p>:</span>
            <span class=n>output_data</span><span class=p>[</span><span class=s2>&quot;monitorOutLUT&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>create_viewer_profile_string</span><span class=p>(</span>
                <span class=n>m_viewer</span><span class=p>,</span> <span class=n>m_display</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
            <span class=c1># monitorLut=thumbnails - viewerProcess makes more sense</span>
            <span class=n>output_data</span><span class=p>[</span><span class=s2>&quot;monitorLut&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>create_viewer_profile_string</span><span class=p>(</span>
                <span class=n>v_viewer</span><span class=p>,</span> <span class=n>v_display</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>nuke</span><span class=o>.</span><span class=n>NUKE_VERSION_MAJOR</span> <span class=o>==</span> <span class=mi>13</span><span class=p>:</span>
            <span class=n>output_data</span><span class=p>[</span><span class=s2>&quot;monitorOutLUT&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>create_viewer_profile_string</span><span class=p>(</span>
                <span class=n>m_viewer</span><span class=p>,</span> <span class=n>m_display</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
            <span class=c1># monitorLut=thumbnails - viewerProcess makes more sense</span>
            <span class=n>output_data</span><span class=p>[</span><span class=s2>&quot;monitorLut&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>create_viewer_profile_string</span><span class=p>(</span>
                <span class=n>v_viewer</span><span class=p>,</span> <span class=n>v_display</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>nuke</span><span class=o>.</span><span class=n>NUKE_VERSION_MAJOR</span> <span class=o>&lt;=</span> <span class=mi>12</span><span class=p>:</span>
            <span class=n>output_data</span><span class=p>[</span><span class=s2>&quot;monitorLut&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>create_viewer_profile_string</span><span class=p>(</span>
                <span class=n>m_viewer</span><span class=p>,</span> <span class=n>m_display</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>output_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_is_settings_matching_environment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Check if OCIO config path is different from environment</span>

<span class=sd>        Args:</span>
<span class=sd>            config_data (dict): OCIO config data from settings</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if settings are matching environment, False otherwise</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>current_ocio_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;OCIO&quot;</span><span class=p>]</span>
        <span class=n>settings_ocio_path</span> <span class=o>=</span> <span class=n>config_data</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>

        <span class=c1># normalize all paths to forward slashes</span>
        <span class=n>current_ocio_path</span> <span class=o>=</span> <span class=n>current_ocio_path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
        <span class=n>settings_ocio_path</span> <span class=o>=</span> <span class=n>settings_ocio_path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>current_ocio_path</span> <span class=o>!=</span> <span class=n>settings_ocio_path</span><span class=p>:</span>
            <span class=n>message</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<span class=s2>It seems like there&#39;s a mismatch between the OCIO config path set in your Nuke</span>
<span class=s2>settings and the actual path set in your OCIO environment.</span>

<span class=s2>To resolve this, please follow these steps:</span>
<span class=s2>1. Close Nuke if it&#39;s currently open.</span>
<span class=s2>2. Reopen Nuke.</span>

<span class=s2>Please note the paths for your reference:</span>

<span class=s2>- The OCIO environment path currently set:</span>
<span class=s2>  `</span><span class=si>{env_path}</span><span class=s2>`</span>

<span class=s2>- The path in your current Nuke settings:</span>
<span class=s2>  `</span><span class=si>{settings_path}</span><span class=s2>`</span>

<span class=s2>Reopening Nuke should synchronize these paths and resolve any discrepancies.</span>
<span class=s2>&quot;&quot;&quot;</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span>
                <span class=n>message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>env_path</span><span class=o>=</span><span class=n>current_ocio_path</span><span class=p>,</span>
                    <span class=n>settings_path</span><span class=o>=</span><span class=n>settings_ocio_path</span>
                <span class=p>)</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_ocio_config_path_to_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Set OCIO config path to workfile</span>

<span class=sd>        Path set into nuke workfile. It is trying to replace path with</span>
<span class=sd>        environment variable if possible. If not, it will set it as it is.</span>
<span class=sd>        It also saves the script to apply the change, but only if it&#39;s not</span>
<span class=sd>        empty Untitled script.</span>

<span class=sd>        Args:</span>
<span class=sd>            config_data (dict): OCIO config data from settings</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># replace path with env var if possible</span>
        <span class=n>ocio_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_replace_ocio_path_with_env_var</span><span class=p>(</span><span class=n>config_data</span><span class=p>)</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting OCIO config path to: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>ocio_path</span><span class=p>))</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;customOCIOConfigPath&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span>
            <span class=n>ocio_path</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;OCIO_config&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=s2>&quot;custom&quot;</span><span class=p>)</span>

        <span class=c1># only save script if it&#39;s not empty</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> <span class=o>!=</span> <span class=s2>&quot;&quot;</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Saving script to apply OCIO config path change.&quot;</span><span class=p>)</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>scriptSave</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_included_vars</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config_template</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Get all environment variables included in template</span>

<span class=sd>        Args:</span>
<span class=sd>            config_template (str): OCIO config template from settings</span>

<span class=sd>        Returns:</span>
<span class=sd>            list: list of environment variables included in template</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># resolve all environments for whitelist variables</span>
        <span class=n>included_vars</span> <span class=o>=</span> <span class=p>[</span>
            <span class=s2>&quot;BUILTIN_OCIO_ROOT&quot;</span><span class=p>,</span>
        <span class=p>]</span>

        <span class=c1># include all project root related env vars</span>
        <span class=k>for</span> <span class=n>env_var</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>env_var</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_ROOT_&quot;</span><span class=p>):</span>
                <span class=n>included_vars</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>env_var</span><span class=p>)</span>

        <span class=c1># use regex to find env var in template with format {ENV_VAR}</span>
        <span class=c1># this way we make sure only template used env vars are included</span>
        <span class=n>env_var_regex</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&quot;\{([A-Z0-9_]+)\}&quot;</span>
        <span class=n>env_var</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>env_var_regex</span><span class=p>,</span> <span class=n>config_template</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>env_var</span><span class=p>:</span>
            <span class=n>included_vars</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>env_var</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>

        <span class=k>return</span> <span class=n>included_vars</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_replace_ocio_path_with_env_var</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Replace OCIO config path with environment variable</span>

<span class=sd>        Environment variable is added as TCL expression to path. TCL expression</span>
<span class=sd>        is also replacing backward slashes found in path for windows</span>
<span class=sd>        formatted values.</span>

<span class=sd>        Args:</span>
<span class=sd>            config_data (str): OCIO config dict from settings</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: OCIO config path with environment variable TCL expression</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>config_path</span> <span class=o>=</span> <span class=n>config_data</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
        <span class=n>config_template</span> <span class=o>=</span> <span class=n>config_data</span><span class=p>[</span><span class=s2>&quot;template&quot;</span><span class=p>]</span>

        <span class=n>included_vars</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_included_vars</span><span class=p>(</span><span class=n>config_template</span><span class=p>)</span>

        <span class=c1># make sure we return original path if no env var is included</span>
        <span class=n>new_path</span> <span class=o>=</span> <span class=n>config_path</span>

        <span class=k>for</span> <span class=n>env_var</span> <span class=ow>in</span> <span class=n>included_vars</span><span class=p>:</span>
            <span class=n>env_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=n>env_var</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>env_path</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=c1># it has to be directory current process can see</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>env_path</span><span class=p>):</span>
                <span class=k>continue</span>

            <span class=c1># make sure paths are in same format</span>
            <span class=n>env_path</span> <span class=o>=</span> <span class=n>env_path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>config_path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>

            <span class=c1># check if env_path is in path and replace to first found positive</span>
            <span class=k>if</span> <span class=n>env_path</span> <span class=ow>in</span> <span class=n>path</span><span class=p>:</span>
                <span class=c1># with regsub we make sure path format of slashes is correct</span>
                <span class=n>resub_expr</span> <span class=o>=</span> <span class=p>(</span>
                    <span class=s2>&quot;[regsub -all {{</span><span class=se>\\\\</span><span class=s2>}} [getenv </span><span class=si>{}</span><span class=s2>] </span><span class=se>\&quot;</span><span class=s2>/</span><span class=se>\&quot;</span><span class=s2>]&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>env_var</span><span class=p>)</span>

                <span class=n>new_path</span> <span class=o>=</span> <span class=n>path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span>
                    <span class=n>env_path</span><span class=p>,</span> <span class=n>resub_expr</span>
                <span class=p>)</span>
                <span class=k>break</span>

        <span class=k>return</span> <span class=n>new_path</span>

    <span class=c1># TODO: move into ./colorspace.py</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_writes_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&#39;&#39;&#39; Adds correct colorspace to write node dict</span>

<span class=sd>        &#39;&#39;&#39;</span>
        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&quot;Group&quot;</span><span class=p>,</span> <span class=n>group</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>):</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>()))</span>

            <span class=c1># get data from avalon knob</span>
            <span class=n>avalon_knob_data</span> <span class=o>=</span> <span class=n>read_avalon_data</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
            <span class=n>node_data</span> <span class=o>=</span> <span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>INSTANCE_DATA_KNOB</span><span class=p>)</span>

            <span class=k>if</span> <span class=p>(</span>
                <span class=c1># backward compatibility</span>
                <span class=c1># TODO: remove this once old avalon data api will be removed</span>
                <span class=n>avalon_knob_data</span>
                <span class=ow>and</span> <span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span>
                    <span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span>
                <span class=p>}</span>
            <span class=p>):</span>
                <span class=k>continue</span>
            <span class=k>elif</span> <span class=p>(</span>
                <span class=n>node_data</span>
                <span class=ow>and</span> <span class=n>node_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span>
                    <span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span>
                <span class=p>}</span>
            <span class=p>):</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=p>(</span>
                <span class=c1># backward compatibility</span>
                <span class=c1># TODO: remove this once old avalon data api will be removed</span>
                <span class=n>avalon_knob_data</span>
                <span class=ow>and</span> <span class=s2>&quot;creator&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>avalon_knob_data</span>
            <span class=p>):</span>
                <span class=k>continue</span>
            <span class=k>elif</span> <span class=p>(</span>
                <span class=n>node_data</span>
                <span class=ow>and</span> <span class=s2>&quot;creator_identifier&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node_data</span>
            <span class=p>):</span>
                <span class=k>continue</span>

            <span class=n>nuke_imageio_writes</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>if</span> <span class=n>avalon_knob_data</span><span class=p>:</span>
                <span class=c1># establish families</span>
                <span class=n>product_type</span> <span class=o>=</span> <span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>product_type</span> <span class=o>=</span> <span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;family&quot;</span><span class=p>]</span>
                <span class=n>families</span> <span class=o>=</span> <span class=p>[</span><span class=n>product_type</span><span class=p>]</span>
                <span class=k>if</span> <span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>):</span>
                    <span class=n>families</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>))</span>

                <span class=n>nuke_imageio_writes</span> <span class=o>=</span> <span class=n>get_imageio_node_setting</span><span class=p>(</span>
                    <span class=n>node_class</span><span class=o>=</span><span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>],</span>
                    <span class=n>plugin_name</span><span class=o>=</span><span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>],</span>
                    <span class=n>product_name</span><span class=o>=</span><span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span>
                <span class=p>)</span>
            <span class=k>elif</span> <span class=n>node_data</span><span class=p>:</span>
                <span class=n>nuke_imageio_writes</span> <span class=o>=</span> <span class=n>get_write_node_template_attr</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>nuke_imageio_writes</span><span class=p>:</span>
                <span class=k>return</span>

            <span class=n>write_node</span> <span class=o>=</span> <span class=kc>None</span>

            <span class=c1># get into the group node</span>
            <span class=n>node</span><span class=o>.</span><span class=n>begin</span><span class=p>()</span>
            <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>():</span>
                <span class=k>if</span> <span class=n>x</span><span class=o>.</span><span class=n>Class</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;Write&quot;</span><span class=p>:</span>
                    <span class=n>write_node</span> <span class=o>=</span> <span class=n>x</span>
            <span class=n>node</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>write_node</span><span class=p>:</span>
                <span class=k>return</span>

            <span class=c1># Exclude exposed knobs from colorspace nodes.</span>
            <span class=c1># This ensures that any values overwritten by the user is</span>
            <span class=c1># not changed by the colorspace knobs set.</span>
            <span class=n>colorspace_knobs</span> <span class=o>=</span> <span class=n>nuke_imageio_writes</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span>
            <span class=n>all_create_settings</span> <span class=o>=</span>  <span class=n>get_project_settings</span><span class=p>(</span><span class=n>Context</span><span class=o>.</span><span class=n>project_name</span><span class=p>)[</span><span class=s2>&quot;nuke&quot;</span><span class=p>][</span><span class=s2>&quot;create&quot;</span><span class=p>]</span>
            <span class=n>plugin_names_mapping</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;create_write_image&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWriteImage&quot;</span><span class=p>,</span>
                <span class=s2>&quot;create_write_prerender&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWritePrerender&quot;</span><span class=p>,</span>
                <span class=s2>&quot;create_write_render&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWriteRender&quot;</span>
            <span class=p>}</span>
            <span class=n>node_data</span> <span class=o>=</span> <span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>INSTANCE_DATA_KNOB</span><span class=p>)</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>node_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span>
            <span class=n>creator_settings</span> <span class=o>=</span> <span class=n>all_create_settings</span><span class=p>[</span><span class=n>plugin_names_mapping</span><span class=p>[</span><span class=n>identifier</span><span class=p>]]</span>
            <span class=n>exposed_knobs</span> <span class=o>=</span> <span class=n>creator_settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;exposed_knobs&quot;</span><span class=p>)</span>

            <span class=n>colorspace_knobs</span> <span class=o>=</span> <span class=p>[</span>
                <span class=n>entry</span> <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>colorspace_knobs</span>
                <span class=k>if</span> <span class=n>entry</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>exposed_knobs</span>
            <span class=p>]</span>

            <span class=n>set_node_knobs_from_settings</span><span class=p>(</span><span class=n>write_node</span><span class=p>,</span> <span class=n>colorspace_knobs</span><span class=p>)</span>

    <span class=c1># TODO: move into ./colorspace.py</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_reads_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>read_clrs_inputs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Setting colorspace to Read nodes</span>

<span class=sd>        Looping through all read nodes and tries to set colorspace based</span>
<span class=sd>        on regex rules in presets</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>changes</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>():</span>
            <span class=n>file</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>filename</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>n</span><span class=o>.</span><span class=n>Class</span><span class=p>()</span> <span class=o>!=</span> <span class=s2>&quot;Read&quot;</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=c1># check if any colorspace presets for read is matching</span>
            <span class=n>preset_clrsp</span> <span class=o>=</span> <span class=kc>None</span>

            <span class=k>for</span> <span class=nb>input</span> <span class=ow>in</span> <span class=n>read_clrs_inputs</span><span class=p>:</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=nb>bool</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=nb>input</span><span class=p>[</span><span class=s2>&quot;regex&quot;</span><span class=p>],</span> <span class=n>file</span><span class=p>)):</span>
                    <span class=k>continue</span>
                <span class=n>preset_clrsp</span> <span class=o>=</span> <span class=nb>input</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span>

            <span class=k>if</span> <span class=n>preset_clrsp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>current</span> <span class=o>=</span> <span class=n>n</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
                <span class=n>future</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>preset_clrsp</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>current</span> <span class=o>!=</span> <span class=n>future</span><span class=p>:</span>
                    <span class=n>changes</span><span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>name</span><span class=p>()]</span> <span class=o>=</span> <span class=p>{</span>
                        <span class=s2>&quot;from&quot;</span><span class=p>:</span> <span class=n>current</span><span class=p>,</span>
                        <span class=s2>&quot;to&quot;</span><span class=p>:</span> <span class=n>future</span>
                    <span class=p>}</span>

        <span class=k>if</span> <span class=n>changes</span><span class=p>:</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Read nodes are not set to correct colorspace:</span><span class=se>\n\n</span><span class=s2>&quot;</span>
            <span class=k>for</span> <span class=n>nname</span><span class=p>,</span> <span class=n>knobs</span> <span class=ow>in</span> <span class=n>changes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=n>msg</span> <span class=o>+=</span> <span class=p>(</span>
                    <span class=s2>&quot; - node: &#39;</span><span class=si>{0}</span><span class=s2>&#39; is now &#39;</span><span class=si>{1}</span><span class=s2>&#39; but should be &#39;</span><span class=si>{2}</span><span class=s2>&#39;</span><span class=se>\n</span><span class=s2>&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>nname</span><span class=p>,</span> <span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;from&quot;</span><span class=p>],</span> <span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;to&quot;</span><span class=p>])</span>

            <span class=n>msg</span> <span class=o>+=</span> <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Would you like to change it?&quot;</span>

            <span class=k>if</span> <span class=n>nuke</span><span class=o>.</span><span class=n>ask</span><span class=p>(</span><span class=n>msg</span><span class=p>):</span>
                <span class=k>for</span> <span class=n>nname</span><span class=p>,</span> <span class=n>knobs</span> <span class=ow>in</span> <span class=n>changes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                    <span class=n>n</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>toNode</span><span class=p>(</span><span class=n>nname</span><span class=p>)</span>
                    <span class=n>n</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;to&quot;</span><span class=p>])</span>
                    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                        <span class=s2>&quot;Setting `</span><span class=si>{0}</span><span class=s2>` to `</span><span class=si>{1}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                            <span class=n>nname</span><span class=p>,</span>
                            <span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;to&quot;</span><span class=p>]))</span>

    <span class=c1># TODO: move into ./colorspace.py</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&#39;&#39;&#39; Setting colorspace following presets</span>
<span class=sd>        &#39;&#39;&#39;</span>
        <span class=c1># get imageio</span>
        <span class=n>nuke_colorspace</span> <span class=o>=</span> <span class=n>get_nuke_imageio_settings</span><span class=p>()</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to workfile...&quot;</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>set_root_colorspace</span><span class=p>(</span><span class=n>nuke_colorspace</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>_error</span><span class=p>:</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Set Colorspace to workfile error: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to viewers...&quot;</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>set_viewers_colorspace</span><span class=p>(</span><span class=n>nuke_colorspace</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>_error</span><span class=p>:</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Set Colorspace to viewer error: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to write nodes...&quot;</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>set_writes_colorspace</span><span class=p>()</span>
        <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>_error</span><span class=p>:</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to read nodes...&quot;</span><span class=p>)</span>
        <span class=n>read_clrs_inputs</span> <span class=o>=</span> <span class=n>nuke_colorspace</span><span class=p>[</span><span class=s2>&quot;regex_inputs&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;inputs&quot;</span><span class=p>,</span> <span class=p>[])</span>
        <span class=k>if</span> <span class=n>read_clrs_inputs</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>set_reads_colorspace</span><span class=p>(</span><span class=n>read_clrs_inputs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_frame_range_handles</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set frame range to current folder.&quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=s2>&quot;attrib&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span><span class=p>:</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Task </span><span class=si>{}</span><span class=s2> doesn&#39;t have set any &#39;attrib&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_context_label</span>
            <span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=n>task_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>]</span>

        <span class=n>missing_cols</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>check_cols</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;fps&quot;</span><span class=p>,</span> <span class=s2>&quot;frameStart&quot;</span><span class=p>,</span> <span class=s2>&quot;frameEnd&quot;</span><span class=p>,</span>
                      <span class=s2>&quot;handleStart&quot;</span><span class=p>,</span> <span class=s2>&quot;handleEnd&quot;</span><span class=p>]</span>

        <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=n>check_cols</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>col</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>task_attributes</span><span class=p>:</span>
                <span class=n>missing_cols</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>col</span><span class=p>)</span>

        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>missing_cols</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>missing</span> <span class=o>=</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>missing_cols</span><span class=p>)</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;&#39;</span><span class=si>{}</span><span class=s2>&#39; are not set for task &#39;</span><span class=si>{}</span><span class=s2>&#39;!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>missing</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_context_label</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=c1># get handles values</span>
        <span class=n>handle_start</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;handleStart&quot;</span><span class=p>]</span>
        <span class=n>handle_end</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;handleEnd&quot;</span><span class=p>]</span>
        <span class=n>frame_start</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;frameStart&quot;</span><span class=p>]</span>
        <span class=n>frame_end</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;frameEnd&quot;</span><span class=p>]</span>

        <span class=n>fps</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;fps&quot;</span><span class=p>])</span>
        <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=n>frame_start</span> <span class=o>-</span> <span class=n>handle_start</span>
        <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=n>frame_end</span> <span class=o>+</span> <span class=n>handle_end</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;lock_range&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;fps&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>fps</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;first_frame&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_start_handle</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;last_frame&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_end_handle</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;lock_range&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>

        <span class=c1># update node graph so knobs are updated</span>
        <span class=n>update_node_graph</span><span class=p>()</span>

        <span class=n>frame_range</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>{0}</span><span class=s1>-</span><span class=si>{1}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>frame_start</span><span class=p>,</span> <span class=n>frame_end</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&quot;Viewer&quot;</span><span class=p>):</span>
            <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_range</span><span class=p>)</span>
            <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range_lock&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
            <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_range</span><span class=p>)</span>
            <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range_lock&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>ASSIST</span><span class=p>:</span>
            <span class=n>set_node_data</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>,</span>
                <span class=n>INSTANCE_DATA_KNOB</span><span class=p>,</span>
                <span class=p>{</span>
                    <span class=s2>&quot;handleStart&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>handle_start</span><span class=p>),</span>
                    <span class=s2>&quot;handleEnd&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>handle_end</span><span class=p>)</span>
                <span class=p>}</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;NukeAssist mode is not allowing &quot;</span>
                <span class=s2>&quot;updating custom knobs...&quot;</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_resolution</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set resolution to project resolution.&quot;&quot;&quot;</span>
        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Resetting resolution&quot;</span><span class=p>)</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=n>task_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>]</span>

        <span class=n>format_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;width&quot;</span><span class=p>:</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;resolutionWidth&quot;</span><span class=p>],</span>
            <span class=s2>&quot;height&quot;</span><span class=p>:</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;resolutionHeight&quot;</span><span class=p>],</span>
            <span class=s2>&quot;pixel_aspect&quot;</span><span class=p>:</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;pixelAspect&quot;</span><span class=p>],</span>
            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>project_name</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>x_</span> <span class=k>for</span> <span class=n>x_</span> <span class=ow>in</span> <span class=n>format_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> <span class=k>if</span> <span class=n>x_</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>):</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span><span class=s2>&quot;Missing set shot attributes in DB.&quot;</span>
                   <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Contact your supervisor!.&quot;</span>
                   <span class=s2>&quot;</span><span class=se>\n\n</span><span class=s2>Width: `</span><span class=si>{width}</span><span class=s2>`&quot;</span>
                   <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Height: `</span><span class=si>{height}</span><span class=s2>`&quot;</span>
                   <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Pixel Aspect: `</span><span class=si>{pixel_aspect}</span><span class=s2>`&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>format_data</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>

        <span class=n>existing_format</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>for</span> <span class=nb>format</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>formats</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=nb>format</span><span class=o>.</span><span class=n>name</span><span class=p>():</span>
                <span class=n>existing_format</span> <span class=o>=</span> <span class=nb>format</span>
                <span class=k>break</span>

        <span class=k>if</span> <span class=n>existing_format</span><span class=p>:</span>
            <span class=c1># Enforce existing format to be correct.</span>
            <span class=n>existing_format</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;width&quot;</span><span class=p>])</span>
            <span class=n>existing_format</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;height&quot;</span><span class=p>])</span>
            <span class=n>existing_format</span><span class=o>.</span><span class=n>setPixelAspect</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;pixel_aspect&quot;</span><span class=p>])</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>format_string</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>make_format_string</span><span class=p>(</span><span class=o>**</span><span class=n>format_data</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Creating new format: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>format_string</span><span class=p>))</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>addFormat</span><span class=p>(</span><span class=n>format_string</span><span class=p>)</span>

        <span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>()[</span><span class=s2>&quot;format&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>])</span>
        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Format is set.&quot;</span><span class=p>)</span>

        <span class=c1># update node graph so knobs are updated</span>
        <span class=n>update_node_graph</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>make_format_string</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;r&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>(</span>
                <span class=s2>&quot;</span><span class=si>{width}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{height}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{x}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{y}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{r}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{t}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{pixel_aspect:.2f}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{name}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>(</span>
                <span class=s2>&quot;</span><span class=si>{width}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{height}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{pixel_aspect:.2f}</span><span class=s2> &quot;</span>
                <span class=s2>&quot;</span><span class=si>{name}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_context_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>reset_resolution</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>reset_frame_range_handles</span><span class=p>()</span>
        <span class=c1># add colorspace menu item</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_colorspace</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_favorites</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>.utils</span><span class=w> </span><span class=kn>import</span> <span class=n>set_context_favorites</span>

        <span class=n>work_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_WORKDIR&quot;</span><span class=p>)</span>
        <span class=c1># TODO validate functionality</span>
        <span class=c1># - does expect the structure is &#39;{root}/{project}/{folder}&#39;</span>
        <span class=c1># - this used asset name expecting it is unique in project</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>get_current_folder_path</span><span class=p>()</span>
        <span class=n>folder_name</span> <span class=o>=</span> <span class=n>folder_path</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>favorite_items</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>

        <span class=c1># project</span>
        <span class=c1># get project&#39;s root and split to parts</span>
        <span class=n>projects_root</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>work_dir</span><span class=o>.</span><span class=n>split</span><span class=p>(</span>
            <span class=n>Context</span><span class=o>.</span><span class=n>project_name</span><span class=p>)[</span><span class=mi>0</span><span class=p>])</span>
        <span class=c1># add project name</span>
        <span class=n>project_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>projects_root</span><span class=p>,</span> <span class=n>Context</span><span class=o>.</span><span class=n>project_name</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;/&quot;</span>
        <span class=c1># add to favorites</span>
        <span class=n>favorite_items</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&quot;Project dir&quot;</span><span class=p>:</span> <span class=n>project_dir</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)})</span>

        <span class=c1># folder</span>
        <span class=n>folder_root</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>work_dir</span><span class=o>.</span><span class=n>split</span><span class=p>(</span>
            <span class=n>folder_name</span><span class=p>)[</span><span class=mi>0</span><span class=p>])</span>
        <span class=c1># add folder name</span>
        <span class=n>folder_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>folder_root</span><span class=p>,</span> <span class=n>folder_name</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;/&quot;</span>
        <span class=c1># add to favorites</span>
        <span class=n>favorite_items</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&quot;Shot dir&quot;</span><span class=p>:</span> <span class=n>folder_dir</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)})</span>

        <span class=c1># workdir</span>
        <span class=n>favorite_items</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=s2>&quot;Work dir&quot;</span><span class=p>:</span> <span class=n>work_dir</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)})</span>

        <span class=n>set_context_favorites</span><span class=p>(</span><span class=n>favorite_items</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.reset_frame_range_handles class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_frame_range_handles</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Set frame range to current folder.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2026</span>
<span class=normal>2027</span>
<span class=normal>2028</span>
<span class=normal>2029</span>
<span class=normal>2030</span>
<span class=normal>2031</span>
<span class=normal>2032</span>
<span class=normal>2033</span>
<span class=normal>2034</span>
<span class=normal>2035</span>
<span class=normal>2036</span>
<span class=normal>2037</span>
<span class=normal>2038</span>
<span class=normal>2039</span>
<span class=normal>2040</span>
<span class=normal>2041</span>
<span class=normal>2042</span>
<span class=normal>2043</span>
<span class=normal>2044</span>
<span class=normal>2045</span>
<span class=normal>2046</span>
<span class=normal>2047</span>
<span class=normal>2048</span>
<span class=normal>2049</span>
<span class=normal>2050</span>
<span class=normal>2051</span>
<span class=normal>2052</span>
<span class=normal>2053</span>
<span class=normal>2054</span>
<span class=normal>2055</span>
<span class=normal>2056</span>
<span class=normal>2057</span>
<span class=normal>2058</span>
<span class=normal>2059</span>
<span class=normal>2060</span>
<span class=normal>2061</span>
<span class=normal>2062</span>
<span class=normal>2063</span>
<span class=normal>2064</span>
<span class=normal>2065</span>
<span class=normal>2066</span>
<span class=normal>2067</span>
<span class=normal>2068</span>
<span class=normal>2069</span>
<span class=normal>2070</span>
<span class=normal>2071</span>
<span class=normal>2072</span>
<span class=normal>2073</span>
<span class=normal>2074</span>
<span class=normal>2075</span>
<span class=normal>2076</span>
<span class=normal>2077</span>
<span class=normal>2078</span>
<span class=normal>2079</span>
<span class=normal>2080</span>
<span class=normal>2081</span>
<span class=normal>2082</span>
<span class=normal>2083</span>
<span class=normal>2084</span>
<span class=normal>2085</span>
<span class=normal>2086</span>
<span class=normal>2087</span>
<span class=normal>2088</span>
<span class=normal>2089</span>
<span class=normal>2090</span>
<span class=normal>2091</span>
<span class=normal>2092</span>
<span class=normal>2093</span>
<span class=normal>2094</span>
<span class=normal>2095</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_frame_range_handles</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set frame range to current folder.&quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=s2>&quot;attrib&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span><span class=p>:</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Task </span><span class=si>{}</span><span class=s2> doesn&#39;t have set any &#39;attrib&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_context_label</span>
        <span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=n>task_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>]</span>

    <span class=n>missing_cols</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>check_cols</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;fps&quot;</span><span class=p>,</span> <span class=s2>&quot;frameStart&quot;</span><span class=p>,</span> <span class=s2>&quot;frameEnd&quot;</span><span class=p>,</span>
                  <span class=s2>&quot;handleStart&quot;</span><span class=p>,</span> <span class=s2>&quot;handleEnd&quot;</span><span class=p>]</span>

    <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=n>check_cols</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>col</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>task_attributes</span><span class=p>:</span>
            <span class=n>missing_cols</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>col</span><span class=p>)</span>

    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>missing_cols</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
        <span class=n>missing</span> <span class=o>=</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>missing_cols</span><span class=p>)</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;&#39;</span><span class=si>{}</span><span class=s2>&#39; are not set for task &#39;</span><span class=si>{}</span><span class=s2>&#39;!&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>missing</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_context_label</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=c1># get handles values</span>
    <span class=n>handle_start</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;handleStart&quot;</span><span class=p>]</span>
    <span class=n>handle_end</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;handleEnd&quot;</span><span class=p>]</span>
    <span class=n>frame_start</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;frameStart&quot;</span><span class=p>]</span>
    <span class=n>frame_end</span> <span class=o>=</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;frameEnd&quot;</span><span class=p>]</span>

    <span class=n>fps</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;fps&quot;</span><span class=p>])</span>
    <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=n>frame_start</span> <span class=o>-</span> <span class=n>handle_start</span>
    <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=n>frame_end</span> <span class=o>+</span> <span class=n>handle_end</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;lock_range&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;fps&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>fps</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;first_frame&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_start_handle</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;last_frame&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_end_handle</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;lock_range&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>

    <span class=c1># update node graph so knobs are updated</span>
    <span class=n>update_node_graph</span><span class=p>()</span>

    <span class=n>frame_range</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>{0}</span><span class=s1>-</span><span class=si>{1}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>frame_start</span><span class=p>,</span> <span class=n>frame_end</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&quot;Viewer&quot;</span><span class=p>):</span>
        <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_range</span><span class=p>)</span>
        <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range_lock&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
        <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>frame_range</span><span class=p>)</span>
        <span class=n>node</span><span class=p>[</span><span class=s1>&#39;frame_range_lock&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>ASSIST</span><span class=p>:</span>
        <span class=n>set_node_data</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>,</span>
            <span class=n>INSTANCE_DATA_KNOB</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;handleStart&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>handle_start</span><span class=p>),</span>
                <span class=s2>&quot;handleEnd&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>handle_end</span><span class=p>)</span>
            <span class=p>}</span>
        <span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
            <span class=s2>&quot;NukeAssist mode is not allowing &quot;</span>
            <span class=s2>&quot;updating custom knobs...&quot;</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.reset_resolution class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_resolution</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Set resolution to project resolution.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2097</span>
<span class=normal>2098</span>
<span class=normal>2099</span>
<span class=normal>2100</span>
<span class=normal>2101</span>
<span class=normal>2102</span>
<span class=normal>2103</span>
<span class=normal>2104</span>
<span class=normal>2105</span>
<span class=normal>2106</span>
<span class=normal>2107</span>
<span class=normal>2108</span>
<span class=normal>2109</span>
<span class=normal>2110</span>
<span class=normal>2111</span>
<span class=normal>2112</span>
<span class=normal>2113</span>
<span class=normal>2114</span>
<span class=normal>2115</span>
<span class=normal>2116</span>
<span class=normal>2117</span>
<span class=normal>2118</span>
<span class=normal>2119</span>
<span class=normal>2120</span>
<span class=normal>2121</span>
<span class=normal>2122</span>
<span class=normal>2123</span>
<span class=normal>2124</span>
<span class=normal>2125</span>
<span class=normal>2126</span>
<span class=normal>2127</span>
<span class=normal>2128</span>
<span class=normal>2129</span>
<span class=normal>2130</span>
<span class=normal>2131</span>
<span class=normal>2132</span>
<span class=normal>2133</span>
<span class=normal>2134</span>
<span class=normal>2135</span>
<span class=normal>2136</span>
<span class=normal>2137</span>
<span class=normal>2138</span>
<span class=normal>2139</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_resolution</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set resolution to project resolution.&quot;&quot;&quot;</span>
    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Resetting resolution&quot;</span><span class=p>)</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=n>task_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entity</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>]</span>

    <span class=n>format_data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;width&quot;</span><span class=p>:</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;resolutionWidth&quot;</span><span class=p>],</span>
        <span class=s2>&quot;height&quot;</span><span class=p>:</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;resolutionHeight&quot;</span><span class=p>],</span>
        <span class=s2>&quot;pixel_aspect&quot;</span><span class=p>:</span> <span class=n>task_attributes</span><span class=p>[</span><span class=s2>&quot;pixelAspect&quot;</span><span class=p>],</span>
        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>project_name</span>
    <span class=p>}</span>

    <span class=k>if</span> <span class=nb>any</span><span class=p>(</span><span class=n>x_</span> <span class=k>for</span> <span class=n>x_</span> <span class=ow>in</span> <span class=n>format_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span> <span class=k>if</span> <span class=n>x_</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>):</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span><span class=s2>&quot;Missing set shot attributes in DB.&quot;</span>
               <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Contact your supervisor!.&quot;</span>
               <span class=s2>&quot;</span><span class=se>\n\n</span><span class=s2>Width: `</span><span class=si>{width}</span><span class=s2>`&quot;</span>
               <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Height: `</span><span class=si>{height}</span><span class=s2>`&quot;</span>
               <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Pixel Aspect: `</span><span class=si>{pixel_aspect}</span><span class=s2>`&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>format_data</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>

    <span class=n>existing_format</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>for</span> <span class=nb>format</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>formats</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=nb>format</span><span class=o>.</span><span class=n>name</span><span class=p>():</span>
            <span class=n>existing_format</span> <span class=o>=</span> <span class=nb>format</span>
            <span class=k>break</span>

    <span class=k>if</span> <span class=n>existing_format</span><span class=p>:</span>
        <span class=c1># Enforce existing format to be correct.</span>
        <span class=n>existing_format</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;width&quot;</span><span class=p>])</span>
        <span class=n>existing_format</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;height&quot;</span><span class=p>])</span>
        <span class=n>existing_format</span><span class=o>.</span><span class=n>setPixelAspect</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;pixel_aspect&quot;</span><span class=p>])</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>format_string</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>make_format_string</span><span class=p>(</span><span class=o>**</span><span class=n>format_data</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Creating new format: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>format_string</span><span class=p>))</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>addFormat</span><span class=p>(</span><span class=n>format_string</span><span class=p>)</span>

    <span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>()[</span><span class=s2>&quot;format&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>format_data</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>])</span>
    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Format is set.&quot;</span><span class=p>)</span>

    <span class=c1># update node graph so knobs are updated</span>
    <span class=n>update_node_graph</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.set_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_colorspace</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Setting colorspace following presets</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1994</span>
<span class=normal>1995</span>
<span class=normal>1996</span>
<span class=normal>1997</span>
<span class=normal>1998</span>
<span class=normal>1999</span>
<span class=normal>2000</span>
<span class=normal>2001</span>
<span class=normal>2002</span>
<span class=normal>2003</span>
<span class=normal>2004</span>
<span class=normal>2005</span>
<span class=normal>2006</span>
<span class=normal>2007</span>
<span class=normal>2008</span>
<span class=normal>2009</span>
<span class=normal>2010</span>
<span class=normal>2011</span>
<span class=normal>2012</span>
<span class=normal>2013</span>
<span class=normal>2014</span>
<span class=normal>2015</span>
<span class=normal>2016</span>
<span class=normal>2017</span>
<span class=normal>2018</span>
<span class=normal>2019</span>
<span class=normal>2020</span>
<span class=normal>2021</span>
<span class=normal>2022</span>
<span class=normal>2023</span>
<span class=normal>2024</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Setting colorspace following presets</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=c1># get imageio</span>
    <span class=n>nuke_colorspace</span> <span class=o>=</span> <span class=n>get_nuke_imageio_settings</span><span class=p>()</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to workfile...&quot;</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_root_colorspace</span><span class=p>(</span><span class=n>nuke_colorspace</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>_error</span><span class=p>:</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Set Colorspace to workfile error: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to viewers...&quot;</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_viewers_colorspace</span><span class=p>(</span><span class=n>nuke_colorspace</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>_error</span><span class=p>:</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Set Colorspace to viewer error: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to write nodes...&quot;</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_writes_colorspace</span><span class=p>()</span>
    <span class=k>except</span> <span class=ne>AttributeError</span> <span class=k>as</span> <span class=n>_error</span><span class=p>:</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>message</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>_error</span><span class=p>)</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to read nodes...&quot;</span><span class=p>)</span>
    <span class=n>read_clrs_inputs</span> <span class=o>=</span> <span class=n>nuke_colorspace</span><span class=p>[</span><span class=s2>&quot;regex_inputs&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;inputs&quot;</span><span class=p>,</span> <span class=p>[])</span>
    <span class=k>if</span> <span class=n>read_clrs_inputs</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_reads_colorspace</span><span class=p>(</span><span class=n>read_clrs_inputs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.set_reads_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_reads_colorspace</span><span class=p>(</span><span class=n>read_clrs_inputs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Setting colorspace to Read nodes</p> <p>Looping through all read nodes and tries to set colorspace based on regex rules in presets</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1946</span>
<span class=normal>1947</span>
<span class=normal>1948</span>
<span class=normal>1949</span>
<span class=normal>1950</span>
<span class=normal>1951</span>
<span class=normal>1952</span>
<span class=normal>1953</span>
<span class=normal>1954</span>
<span class=normal>1955</span>
<span class=normal>1956</span>
<span class=normal>1957</span>
<span class=normal>1958</span>
<span class=normal>1959</span>
<span class=normal>1960</span>
<span class=normal>1961</span>
<span class=normal>1962</span>
<span class=normal>1963</span>
<span class=normal>1964</span>
<span class=normal>1965</span>
<span class=normal>1966</span>
<span class=normal>1967</span>
<span class=normal>1968</span>
<span class=normal>1969</span>
<span class=normal>1970</span>
<span class=normal>1971</span>
<span class=normal>1972</span>
<span class=normal>1973</span>
<span class=normal>1974</span>
<span class=normal>1975</span>
<span class=normal>1976</span>
<span class=normal>1977</span>
<span class=normal>1978</span>
<span class=normal>1979</span>
<span class=normal>1980</span>
<span class=normal>1981</span>
<span class=normal>1982</span>
<span class=normal>1983</span>
<span class=normal>1984</span>
<span class=normal>1985</span>
<span class=normal>1986</span>
<span class=normal>1987</span>
<span class=normal>1988</span>
<span class=normal>1989</span>
<span class=normal>1990</span>
<span class=normal>1991</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_reads_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>read_clrs_inputs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; Setting colorspace to Read nodes</span>

<span class=sd>    Looping through all read nodes and tries to set colorspace based</span>
<span class=sd>    on regex rules in presets</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>changes</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>():</span>
        <span class=n>file</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>filename</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>n</span><span class=o>.</span><span class=n>Class</span><span class=p>()</span> <span class=o>!=</span> <span class=s2>&quot;Read&quot;</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=c1># check if any colorspace presets for read is matching</span>
        <span class=n>preset_clrsp</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>for</span> <span class=nb>input</span> <span class=ow>in</span> <span class=n>read_clrs_inputs</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>bool</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=nb>input</span><span class=p>[</span><span class=s2>&quot;regex&quot;</span><span class=p>],</span> <span class=n>file</span><span class=p>)):</span>
                <span class=k>continue</span>
            <span class=n>preset_clrsp</span> <span class=o>=</span> <span class=nb>input</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=n>preset_clrsp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>current</span> <span class=o>=</span> <span class=n>n</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
            <span class=n>future</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>preset_clrsp</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>current</span> <span class=o>!=</span> <span class=n>future</span><span class=p>:</span>
                <span class=n>changes</span><span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>name</span><span class=p>()]</span> <span class=o>=</span> <span class=p>{</span>
                    <span class=s2>&quot;from&quot;</span><span class=p>:</span> <span class=n>current</span><span class=p>,</span>
                    <span class=s2>&quot;to&quot;</span><span class=p>:</span> <span class=n>future</span>
                <span class=p>}</span>

    <span class=k>if</span> <span class=n>changes</span><span class=p>:</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Read nodes are not set to correct colorspace:</span><span class=se>\n\n</span><span class=s2>&quot;</span>
        <span class=k>for</span> <span class=n>nname</span><span class=p>,</span> <span class=n>knobs</span> <span class=ow>in</span> <span class=n>changes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>msg</span> <span class=o>+=</span> <span class=p>(</span>
                <span class=s2>&quot; - node: &#39;</span><span class=si>{0}</span><span class=s2>&#39; is now &#39;</span><span class=si>{1}</span><span class=s2>&#39; but should be &#39;</span><span class=si>{2}</span><span class=s2>&#39;</span><span class=se>\n</span><span class=s2>&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>nname</span><span class=p>,</span> <span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;from&quot;</span><span class=p>],</span> <span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;to&quot;</span><span class=p>])</span>

        <span class=n>msg</span> <span class=o>+=</span> <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Would you like to change it?&quot;</span>

        <span class=k>if</span> <span class=n>nuke</span><span class=o>.</span><span class=n>ask</span><span class=p>(</span><span class=n>msg</span><span class=p>):</span>
            <span class=k>for</span> <span class=n>nname</span><span class=p>,</span> <span class=n>knobs</span> <span class=ow>in</span> <span class=n>changes</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=n>n</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>toNode</span><span class=p>(</span><span class=n>nname</span><span class=p>)</span>
                <span class=n>n</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;to&quot;</span><span class=p>])</span>
                <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                    <span class=s2>&quot;Setting `</span><span class=si>{0}</span><span class=s2>` to `</span><span class=si>{1}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>nname</span><span class=p>,</span>
                        <span class=n>knobs</span><span class=p>[</span><span class=s2>&quot;to&quot;</span><span class=p>]))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.set_root_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_root_colorspace</span><span class=p>(</span><span class=n>imageio_host</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Adds correct colorspace to root</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>imageio_host</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>host colorspace configurations</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span>
<span class=normal>1598</span>
<span class=normal>1599</span>
<span class=normal>1600</span>
<span class=normal>1601</span>
<span class=normal>1602</span>
<span class=normal>1603</span>
<span class=normal>1604</span>
<span class=normal>1605</span>
<span class=normal>1606</span>
<span class=normal>1607</span>
<span class=normal>1608</span>
<span class=normal>1609</span>
<span class=normal>1610</span>
<span class=normal>1611</span>
<span class=normal>1612</span>
<span class=normal>1613</span>
<span class=normal>1614</span>
<span class=normal>1615</span>
<span class=normal>1616</span>
<span class=normal>1617</span>
<span class=normal>1618</span>
<span class=normal>1619</span>
<span class=normal>1620</span>
<span class=normal>1621</span>
<span class=normal>1622</span>
<span class=normal>1623</span>
<span class=normal>1624</span>
<span class=normal>1625</span>
<span class=normal>1626</span>
<span class=normal>1627</span>
<span class=normal>1628</span>
<span class=normal>1629</span>
<span class=normal>1630</span>
<span class=normal>1631</span>
<span class=normal>1632</span>
<span class=normal>1633</span>
<span class=normal>1634</span>
<span class=normal>1635</span>
<span class=normal>1636</span>
<span class=normal>1637</span>
<span class=normal>1638</span>
<span class=normal>1639</span>
<span class=normal>1640</span>
<span class=normal>1641</span>
<span class=normal>1642</span>
<span class=normal>1643</span>
<span class=normal>1644</span>
<span class=normal>1645</span>
<span class=normal>1646</span>
<span class=normal>1647</span>
<span class=normal>1648</span>
<span class=normal>1649</span>
<span class=normal>1650</span>
<span class=normal>1651</span>
<span class=normal>1652</span>
<span class=normal>1653</span>
<span class=normal>1654</span>
<span class=normal>1655</span>
<span class=normal>1656</span>
<span class=normal>1657</span>
<span class=normal>1658</span>
<span class=normal>1659</span>
<span class=normal>1660</span>
<span class=normal>1661</span>
<span class=normal>1662</span>
<span class=normal>1663</span>
<span class=normal>1664</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_root_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>imageio_host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Adds correct colorspace to root</span>

<span class=sd>    Arguments:</span>
<span class=sd>        imageio_host (dict): host colorspace configurations</span>

<span class=sd>    &#39;&#39;&#39;</span>
    <span class=n>config_data</span> <span class=o>=</span> <span class=n>get_current_context_imageio_config_preset</span><span class=p>()</span>

    <span class=n>workfile_settings</span> <span class=o>=</span> <span class=n>imageio_host</span><span class=p>[</span><span class=s2>&quot;workfile&quot;</span><span class=p>]</span>
    <span class=n>color_management</span> <span class=o>=</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;color_management&quot;</span><span class=p>]</span>
    <span class=n>native_ocio_config</span> <span class=o>=</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;native_ocio_config&quot;</span><span class=p>]</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>config_data</span><span class=p>:</span>
        <span class=c1># no ocio config found and no custom path used</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;colorManagement&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> \
                    <span class=ow>not</span> <span class=ow>in</span> <span class=n>color_management</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;colorManagement&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>color_management</span><span class=p>)</span>

        <span class=c1># second set ocio version</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;OCIO_config&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> \
                    <span class=ow>not</span> <span class=ow>in</span> <span class=n>native_ocio_config</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;OCIO_config&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>native_ocio_config</span><span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=c1># OCIO config path is defined from prelaunch hook</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;colorManagement&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=s2>&quot;OCIO&quot;</span><span class=p>)</span>

        <span class=c1># print previous settings in case some were found in workfile</span>
        <span class=n>residual_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=s2>&quot;customOCIOConfigPath&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>residual_path</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Residual OCIO config path found: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>residual_path</span>
            <span class=p>))</span>

    <span class=c1># set ocio config path</span>
    <span class=k>if</span> <span class=n>config_data</span><span class=p>:</span>
        <span class=n>config_path</span> <span class=o>=</span> <span class=n>config_data</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;OCIO config path found: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>config_path</span><span class=p>))</span>

        <span class=c1># check if there&#39;s a mismatch between environment and settings</span>
        <span class=n>correct_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_settings_matching_environment</span><span class=p>(</span>
            <span class=n>config_data</span><span class=p>)</span>

        <span class=c1># if there&#39;s no mismatch between environment and settings</span>
        <span class=k>if</span> <span class=n>correct_settings</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_ocio_config_path_to_workfile</span><span class=p>(</span><span class=n>config_data</span><span class=p>)</span>

    <span class=n>workfile_settings_output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=c1># get monitor lut from settings respecting Nuke version differences</span>
    <span class=n>monitor_lut_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_monitor_settings</span><span class=p>(</span>
        <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;monitor_out_lut&quot;</span><span class=p>],</span>
        <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;monitor_lut&quot;</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=n>workfile_settings_output</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>monitor_lut_data</span><span class=p>)</span>
    <span class=n>workfile_settings_output</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
        <span class=p>{</span>
            <span class=s2>&quot;workingSpaceLUT&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;working_space&quot;</span><span class=p>],</span>
            <span class=s2>&quot;int8Lut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;int_8_lut&quot;</span><span class=p>],</span>
            <span class=s2>&quot;int16Lut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;int_16_lut&quot;</span><span class=p>],</span>
            <span class=s2>&quot;logLut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;log_lut&quot;</span><span class=p>],</span>
            <span class=s2>&quot;floatLut&quot;</span><span class=p>:</span> <span class=n>workfile_settings</span><span class=p>[</span><span class=s2>&quot;float_lut&quot;</span><span class=p>],</span>
        <span class=p>}</span>
    <span class=p>)</span>

    <span class=c1># then set the rest</span>
    <span class=k>for</span> <span class=n>knob</span><span class=p>,</span> <span class=n>value_</span> <span class=ow>in</span> <span class=n>workfile_settings_output</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=c1># skip unfilled ocio config path</span>
        <span class=c1># it will be dict in value</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value_</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=c1># skip empty values</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>value_</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>[</span><span class=n>knob</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>value_</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.set_viewers_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_viewers_colorspace</span><span class=p>(</span><span class=n>imageio_nuke</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Adds correct colorspace to viewer</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>imageio_nuke</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>nuke colorspace configurations</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_viewers_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>imageio_nuke</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Adds correct colorspace to viewer</span>

<span class=sd>    Arguments:</span>
<span class=sd>        imageio_nuke (dict): nuke colorspace configurations</span>

<span class=sd>    &#39;&#39;&#39;</span>
    <span class=n>filter_knobs</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;viewerProcess&quot;</span><span class=p>,</span>
        <span class=s2>&quot;wipe_position&quot;</span><span class=p>,</span>
        <span class=s2>&quot;monitorOutOutputTransform&quot;</span>
    <span class=p>]</span>
    <span class=n>viewer_process</span> <span class=o>=</span> <span class=n>get_formatted_display_and_view</span><span class=p>(</span>
        <span class=n>imageio_nuke</span><span class=p>[</span><span class=s2>&quot;viewer&quot;</span><span class=p>],</span> <span class=bp>self</span><span class=o>.</span><span class=n>formatting_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span>
    <span class=p>)</span>
    <span class=n>output_transform</span> <span class=o>=</span> <span class=n>get_formatted_display_and_view</span><span class=p>(</span>
        <span class=n>imageio_nuke</span><span class=p>[</span><span class=s2>&quot;monitor&quot;</span><span class=p>],</span> <span class=bp>self</span><span class=o>.</span><span class=n>formatting_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span>
    <span class=p>)</span>
    <span class=n>erased_viewers</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&quot;Viewer&quot;</span><span class=p>):</span>
        <span class=c1># set viewProcess to preset from settings</span>
        <span class=n>v</span><span class=p>[</span><span class=s2>&quot;viewerProcess&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>viewer_process</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>viewer_process</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>v</span><span class=p>[</span><span class=s2>&quot;viewerProcess&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>():</span>
            <span class=n>copy_inputs</span> <span class=o>=</span> <span class=n>v</span><span class=o>.</span><span class=n>dependencies</span><span class=p>()</span>
            <span class=n>copy_knobs</span> <span class=o>=</span> <span class=p>{</span>
                <span class=n>k</span><span class=p>:</span> <span class=n>v</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>v</span><span class=o>.</span><span class=n>knobs</span><span class=p>()</span>
                <span class=k>if</span> <span class=n>k</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>filter_knobs</span>
            <span class=p>}</span>

            <span class=c1># delete viewer with wrong settings</span>
            <span class=n>erased_viewers</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>())</span>
            <span class=n>nuke</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>v</span><span class=p>)</span>

            <span class=c1># create new viewer</span>
            <span class=n>nv</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;Viewer&quot;</span><span class=p>)</span>

            <span class=c1># connect to original inputs</span>
            <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>copy_inputs</span><span class=p>):</span>
                <span class=n>nv</span><span class=o>.</span><span class=n>setInput</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span>

            <span class=c1># set copied knobs</span>
            <span class=k>for</span> <span class=n>knob_name</span><span class=p>,</span> <span class=n>knob_value</span> <span class=ow>in</span> <span class=n>copy_knobs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=n>nv</span><span class=p>[</span><span class=n>knob_name</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knob_value</span><span class=p>)</span>

            <span class=c1># set viewerProcess</span>
            <span class=n>nv</span><span class=p>[</span><span class=s2>&quot;viewerProcess&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>viewer_process</span><span class=p>)</span>
            <span class=n>nv</span><span class=p>[</span><span class=s2>&quot;monitorOutOutputTransform&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>output_transform</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>erased_viewers</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
            <span class=s2>&quot;Attention! Viewer nodes </span><span class=si>{}</span><span class=s2> were erased.&quot;</span>
            <span class=s2>&quot;It had wrong color profile&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>erased_viewers</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_nuke.api.lib.WorkfileSettings.set_writes_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_writes_colorspace</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Adds correct colorspace to write node dict</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1849</span>
<span class=normal>1850</span>
<span class=normal>1851</span>
<span class=normal>1852</span>
<span class=normal>1853</span>
<span class=normal>1854</span>
<span class=normal>1855</span>
<span class=normal>1856</span>
<span class=normal>1857</span>
<span class=normal>1858</span>
<span class=normal>1859</span>
<span class=normal>1860</span>
<span class=normal>1861</span>
<span class=normal>1862</span>
<span class=normal>1863</span>
<span class=normal>1864</span>
<span class=normal>1865</span>
<span class=normal>1866</span>
<span class=normal>1867</span>
<span class=normal>1868</span>
<span class=normal>1869</span>
<span class=normal>1870</span>
<span class=normal>1871</span>
<span class=normal>1872</span>
<span class=normal>1873</span>
<span class=normal>1874</span>
<span class=normal>1875</span>
<span class=normal>1876</span>
<span class=normal>1877</span>
<span class=normal>1878</span>
<span class=normal>1879</span>
<span class=normal>1880</span>
<span class=normal>1881</span>
<span class=normal>1882</span>
<span class=normal>1883</span>
<span class=normal>1884</span>
<span class=normal>1885</span>
<span class=normal>1886</span>
<span class=normal>1887</span>
<span class=normal>1888</span>
<span class=normal>1889</span>
<span class=normal>1890</span>
<span class=normal>1891</span>
<span class=normal>1892</span>
<span class=normal>1893</span>
<span class=normal>1894</span>
<span class=normal>1895</span>
<span class=normal>1896</span>
<span class=normal>1897</span>
<span class=normal>1898</span>
<span class=normal>1899</span>
<span class=normal>1900</span>
<span class=normal>1901</span>
<span class=normal>1902</span>
<span class=normal>1903</span>
<span class=normal>1904</span>
<span class=normal>1905</span>
<span class=normal>1906</span>
<span class=normal>1907</span>
<span class=normal>1908</span>
<span class=normal>1909</span>
<span class=normal>1910</span>
<span class=normal>1911</span>
<span class=normal>1912</span>
<span class=normal>1913</span>
<span class=normal>1914</span>
<span class=normal>1915</span>
<span class=normal>1916</span>
<span class=normal>1917</span>
<span class=normal>1918</span>
<span class=normal>1919</span>
<span class=normal>1920</span>
<span class=normal>1921</span>
<span class=normal>1922</span>
<span class=normal>1923</span>
<span class=normal>1924</span>
<span class=normal>1925</span>
<span class=normal>1926</span>
<span class=normal>1927</span>
<span class=normal>1928</span>
<span class=normal>1929</span>
<span class=normal>1930</span>
<span class=normal>1931</span>
<span class=normal>1932</span>
<span class=normal>1933</span>
<span class=normal>1934</span>
<span class=normal>1935</span>
<span class=normal>1936</span>
<span class=normal>1937</span>
<span class=normal>1938</span>
<span class=normal>1939</span>
<span class=normal>1940</span>
<span class=normal>1941</span>
<span class=normal>1942</span>
<span class=normal>1943</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_writes_colorspace</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Adds correct colorspace to write node dict</span>

<span class=sd>    &#39;&#39;&#39;</span>
    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>(</span><span class=nb>filter</span><span class=o>=</span><span class=s2>&quot;Group&quot;</span><span class=p>,</span> <span class=n>group</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_root_node</span><span class=p>):</span>
        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Setting colorspace to `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>()))</span>

        <span class=c1># get data from avalon knob</span>
        <span class=n>avalon_knob_data</span> <span class=o>=</span> <span class=n>read_avalon_data</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
        <span class=n>node_data</span> <span class=o>=</span> <span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>INSTANCE_DATA_KNOB</span><span class=p>)</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=c1># backward compatibility</span>
            <span class=c1># TODO: remove this once old avalon data api will be removed</span>
            <span class=n>avalon_knob_data</span>
            <span class=ow>and</span> <span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span>
                <span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span>
            <span class=p>}</span>
        <span class=p>):</span>
            <span class=k>continue</span>
        <span class=k>elif</span> <span class=p>(</span>
            <span class=n>node_data</span>
            <span class=ow>and</span> <span class=n>node_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span>
                <span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span>
            <span class=p>}</span>
        <span class=p>):</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=c1># backward compatibility</span>
            <span class=c1># TODO: remove this once old avalon data api will be removed</span>
            <span class=n>avalon_knob_data</span>
            <span class=ow>and</span> <span class=s2>&quot;creator&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>avalon_knob_data</span>
        <span class=p>):</span>
            <span class=k>continue</span>
        <span class=k>elif</span> <span class=p>(</span>
            <span class=n>node_data</span>
            <span class=ow>and</span> <span class=s2>&quot;creator_identifier&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node_data</span>
        <span class=p>):</span>
            <span class=k>continue</span>

        <span class=n>nuke_imageio_writes</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>avalon_knob_data</span><span class=p>:</span>
            <span class=c1># establish families</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>product_type</span> <span class=o>=</span> <span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;family&quot;</span><span class=p>]</span>
            <span class=n>families</span> <span class=o>=</span> <span class=p>[</span><span class=n>product_type</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>):</span>
                <span class=n>families</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>avalon_knob_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>))</span>

            <span class=n>nuke_imageio_writes</span> <span class=o>=</span> <span class=n>get_imageio_node_setting</span><span class=p>(</span>
                <span class=n>node_class</span><span class=o>=</span><span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>],</span>
                <span class=n>plugin_name</span><span class=o>=</span><span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>],</span>
                <span class=n>product_name</span><span class=o>=</span><span class=n>avalon_knob_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span>
            <span class=p>)</span>
        <span class=k>elif</span> <span class=n>node_data</span><span class=p>:</span>
            <span class=n>nuke_imageio_writes</span> <span class=o>=</span> <span class=n>get_write_node_template_attr</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>nuke_imageio_writes</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>write_node</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># get into the group node</span>
        <span class=n>node</span><span class=o>.</span><span class=n>begin</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>x</span><span class=o>.</span><span class=n>Class</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;Write&quot;</span><span class=p>:</span>
                <span class=n>write_node</span> <span class=o>=</span> <span class=n>x</span>
        <span class=n>node</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>write_node</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=c1># Exclude exposed knobs from colorspace nodes.</span>
        <span class=c1># This ensures that any values overwritten by the user is</span>
        <span class=c1># not changed by the colorspace knobs set.</span>
        <span class=n>colorspace_knobs</span> <span class=o>=</span> <span class=n>nuke_imageio_writes</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span>
        <span class=n>all_create_settings</span> <span class=o>=</span>  <span class=n>get_project_settings</span><span class=p>(</span><span class=n>Context</span><span class=o>.</span><span class=n>project_name</span><span class=p>)[</span><span class=s2>&quot;nuke&quot;</span><span class=p>][</span><span class=s2>&quot;create&quot;</span><span class=p>]</span>
        <span class=n>plugin_names_mapping</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;create_write_image&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWriteImage&quot;</span><span class=p>,</span>
            <span class=s2>&quot;create_write_prerender&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWritePrerender&quot;</span><span class=p>,</span>
            <span class=s2>&quot;create_write_render&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWriteRender&quot;</span>
        <span class=p>}</span>
        <span class=n>node_data</span> <span class=o>=</span> <span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>INSTANCE_DATA_KNOB</span><span class=p>)</span>
        <span class=n>identifier</span> <span class=o>=</span> <span class=n>node_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span>
        <span class=n>creator_settings</span> <span class=o>=</span> <span class=n>all_create_settings</span><span class=p>[</span><span class=n>plugin_names_mapping</span><span class=p>[</span><span class=n>identifier</span><span class=p>]]</span>
        <span class=n>exposed_knobs</span> <span class=o>=</span> <span class=n>creator_settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;exposed_knobs&quot;</span><span class=p>)</span>

        <span class=n>colorspace_knobs</span> <span class=o>=</span> <span class=p>[</span>
            <span class=n>entry</span> <span class=k>for</span> <span class=n>entry</span> <span class=ow>in</span> <span class=n>colorspace_knobs</span>
            <span class=k>if</span> <span class=n>entry</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>exposed_knobs</span>
        <span class=p>]</span>

        <span class=n>set_node_knobs_from_settings</span><span class=p>(</span><span class=n>write_node</span><span class=p>,</span> <span class=n>colorspace_knobs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.add_publish_knob class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_publish_knob</span><span class=p>(</span><span class=n>node</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>[DEPRECATED] Add Publish knob to node</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>nuke node to be processed</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>node</code></td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>processed nuke node</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@deprecated</span>
<span class=k>def</span><span class=w> </span><span class=nf>add_publish_knob</span><span class=p>(</span><span class=n>node</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;[DEPRECATED] Add Publish knob to node</span>

<span class=sd>    Arguments:</span>
<span class=sd>        node (nuke.Node): nuke node to be processed</span>

<span class=sd>    Returns:</span>
<span class=sd>        node (nuke.Node): processed nuke node</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=s2>&quot;publish&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>():</span>
        <span class=n>body</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>
        <span class=n>body</span><span class=p>[(</span><span class=s2>&quot;divd&quot;</span><span class=p>,</span> <span class=s2>&quot;Publishing&quot;</span><span class=p>)]</span> <span class=o>=</span> <span class=n>Knobby</span><span class=p>(</span><span class=s2>&quot;Text_Knob&quot;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
        <span class=n>body</span><span class=p>[</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>imprint</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>body</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>node</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.add_write_node class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_write_node</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>file_path</span><span class=p>,</span> <span class=n>knobs</span><span class=p>,</span> <span class=o>**</span><span class=n>kwarg</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Adding nuke write node</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>nuke node name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>file_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>file path to write</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>knobs</code> </td> <td> <code><span title=list>list</span>[<span title=dict>dict</span>]</code> </td> <td> <div class=doc-md-description> <p>nuke knobs to be set from settings</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>kwarg</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>formatting attributes data for nuke knobs, must at least include <code>frame_range</code> key.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>node</code></td> <td> <code><span title=obj>obj</span></code> </td> <td> <div class=doc-md-description> <p>nuke write node</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_write_node</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>file_path</span><span class=p>,</span> <span class=n>knobs</span><span class=p>,</span> <span class=o>**</span><span class=n>kwarg</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Adding nuke write node</span>

<span class=sd>    Arguments:</span>
<span class=sd>        name (str): nuke node name</span>
<span class=sd>        file_path (str): file path to write</span>
<span class=sd>        knobs (list[dict]): nuke knobs to be set from settings</span>
<span class=sd>        kwarg (dict): formatting attributes data for nuke knobs,</span>
<span class=sd>            must at least include `frame_range` key.</span>

<span class=sd>    Returns:</span>
<span class=sd>        node (obj): nuke write node</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>use_range_limit</span> <span class=o>=</span> <span class=n>kwarg</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;use_range_limit&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=n>w</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span>
        <span class=s2>&quot;Write&quot;</span><span class=p>,</span>
        <span class=s2>&quot;name </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=p>),</span>
        <span class=n>inpanel</span><span class=o>=</span><span class=kc>False</span>
    <span class=p>)</span>

    <span class=n>w</span><span class=p>[</span><span class=s2>&quot;file&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>file_path</span><span class=p>)</span>

    <span class=c1># finally add knob overrides</span>
    <span class=n>set_node_knobs_from_settings</span><span class=p>(</span><span class=n>w</span><span class=p>,</span> <span class=n>knobs</span><span class=p>,</span> <span class=o>**</span><span class=n>kwarg</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>use_range_limit</span><span class=p>:</span>
        <span class=n>w</span><span class=p>[</span><span class=s2>&quot;use_limit&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
        <span class=n>w</span><span class=p>[</span><span class=s2>&quot;first&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>kwarg</span><span class=p>[</span><span class=s2>&quot;frame_range&quot;</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span>
        <span class=n>w</span><span class=p>[</span><span class=s2>&quot;last&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>kwarg</span><span class=p>[</span><span class=s2>&quot;frame_range&quot;</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>w</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.check_inventory_versions class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_inventory_versions</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Update loaded container nodes' colors based on version state.</p> <p>This will group containers by their version to outdated, not found, invalid or latest and colorize the nodes based on the category.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>check_inventory_versions</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update loaded container nodes&#39; colors based on version state.</span>

<span class=sd>    This will group containers by their version to outdated, not found,</span>
<span class=sd>    invalid or latest and colorize the nodes based on the category.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>host</span> <span class=o>=</span> <span class=n>registered_host</span><span class=p>()</span>
        <span class=n>containers</span> <span class=o>=</span> <span class=n>host</span><span class=o>.</span><span class=n>get_containers</span><span class=p>()</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>

        <span class=n>filtered_containers</span> <span class=o>=</span> <span class=n>filter_containers</span><span class=p>(</span><span class=n>containers</span><span class=p>,</span> <span class=n>project_name</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>category</span><span class=p>,</span> <span class=n>containers</span> <span class=ow>in</span> <span class=n>filtered_containers</span><span class=o>.</span><span class=n>_asdict</span><span class=p>()</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>category</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>LOADER_CATEGORY_COLORS</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>color</span> <span class=o>=</span> <span class=n>LOADER_CATEGORY_COLORS</span><span class=p>[</span><span class=n>category</span><span class=p>]</span>
            <span class=n>color</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>color</span><span class=p>,</span> <span class=mi>16</span><span class=p>)</span>  <span class=c1># convert hex to nuke tile color int</span>
            <span class=k>for</span> <span class=n>container</span> <span class=ow>in</span> <span class=n>containers</span><span class=p>:</span>
                <span class=n>container</span><span class=p>[</span><span class=s2>&quot;node&quot;</span><span class=p>][</span><span class=s2>&quot;tile_color&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>error</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.check_product_name_exists class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_product_name_exists</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=n>product_name</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Checking if node is not already created to secure there is no duplicity</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of nuke.Node objects</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>name we try to find</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True of False</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>954</span>
<span class=normal>955</span>
<span class=normal>956</span>
<span class=normal>957</span>
<span class=normal>958</span>
<span class=normal>959</span>
<span class=normal>960</span>
<span class=normal>961</span>
<span class=normal>962</span>
<span class=normal>963</span>
<span class=normal>964</span>
<span class=normal>965</span>
<span class=normal>966</span>
<span class=normal>967</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>check_product_name_exists</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=n>product_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Checking if node is not already created to secure there is no duplicity</span>

<span class=sd>    Arguments:</span>
<span class=sd>        nodes (list): list of nuke.Node objects</span>
<span class=sd>        product_name (str): name we try to find</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True of False</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=nb>next</span><span class=p>((</span><span class=kc>True</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span>
                 <span class=k>if</span> <span class=n>product_name</span> <span class=ow>in</span> <span class=n>read_avalon_data</span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)),</span>
                <span class=kc>False</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.create_backdrop class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_backdrop</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>layer</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create Backdrop node</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>color</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>nuke compatible string with color code</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>layer</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>layer of node usually used (self.pos_layer - 1)</p> </div> </td> <td> <code>0</code> </td> </tr> <tr class=doc-section-item> <td> <code>label</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>the message</p> </div> </td> <td> <code>&#39;&#39;</code> </td> </tr> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of nodes to be wrapped into backdrop</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1427</span>
<span class=normal>1428</span>
<span class=normal>1429</span>
<span class=normal>1430</span>
<span class=normal>1431</span>
<span class=normal>1432</span>
<span class=normal>1433</span>
<span class=normal>1434</span>
<span class=normal>1435</span>
<span class=normal>1436</span>
<span class=normal>1437</span>
<span class=normal>1438</span>
<span class=normal>1439</span>
<span class=normal>1440</span>
<span class=normal>1441</span>
<span class=normal>1442</span>
<span class=normal>1443</span>
<span class=normal>1444</span>
<span class=normal>1445</span>
<span class=normal>1446</span>
<span class=normal>1447</span>
<span class=normal>1448</span>
<span class=normal>1449</span>
<span class=normal>1450</span>
<span class=normal>1451</span>
<span class=normal>1452</span>
<span class=normal>1453</span>
<span class=normal>1454</span>
<span class=normal>1455</span>
<span class=normal>1456</span>
<span class=normal>1457</span>
<span class=normal>1458</span>
<span class=normal>1459</span>
<span class=normal>1460</span>
<span class=normal>1461</span>
<span class=normal>1462</span>
<span class=normal>1463</span>
<span class=normal>1464</span>
<span class=normal>1465</span>
<span class=normal>1466</span>
<span class=normal>1467</span>
<span class=normal>1468</span>
<span class=normal>1469</span>
<span class=normal>1470</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_backdrop</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>layer</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
                    <span class=n>nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Create Backdrop node</span>

<span class=sd>    Arguments:</span>
<span class=sd>        color (str): nuke compatible string with color code</span>
<span class=sd>        layer (int): layer of node usually used (self.pos_layer - 1)</span>
<span class=sd>        label (str): the message</span>
<span class=sd>        nodes (list): list of nodes to be wrapped into backdrop</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=nb>list</span><span class=p>),</span> <span class=s2>&quot;`nodes` should be a list of nodes&quot;</span>

    <span class=c1># Calculate bounds for the backdrop node.</span>
    <span class=n>bdX</span> <span class=o>=</span> <span class=nb>min</span><span class=p>([</span><span class=n>node</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>])</span>
    <span class=n>bdY</span> <span class=o>=</span> <span class=nb>min</span><span class=p>([</span><span class=n>node</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>])</span>
    <span class=n>bdW</span> <span class=o>=</span> <span class=nb>max</span><span class=p>([</span><span class=n>node</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=o>+</span> <span class=n>node</span><span class=o>.</span><span class=n>screenWidth</span><span class=p>()</span> <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>])</span> <span class=o>-</span> <span class=n>bdX</span>
    <span class=n>bdH</span> <span class=o>=</span> <span class=nb>max</span><span class=p>([</span><span class=n>node</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=o>+</span> <span class=n>node</span><span class=o>.</span><span class=n>screenHeight</span><span class=p>()</span> <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>])</span> <span class=o>-</span> <span class=n>bdY</span>

    <span class=c1># Expand the bounds to leave a little border. Elements are offsets</span>
    <span class=c1># for left, top, right and bottom edges respectively</span>
    <span class=n>left</span><span class=p>,</span> <span class=n>top</span><span class=p>,</span> <span class=n>right</span><span class=p>,</span> <span class=n>bottom</span> <span class=o>=</span> <span class=p>(</span><span class=o>-</span><span class=mi>20</span><span class=p>,</span> <span class=o>-</span><span class=mi>65</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>60</span><span class=p>)</span>
    <span class=n>bdX</span> <span class=o>+=</span> <span class=n>left</span>
    <span class=n>bdY</span> <span class=o>+=</span> <span class=n>top</span>
    <span class=n>bdW</span> <span class=o>+=</span> <span class=p>(</span><span class=n>right</span> <span class=o>-</span> <span class=n>left</span><span class=p>)</span>
    <span class=n>bdH</span> <span class=o>+=</span> <span class=p>(</span><span class=n>bottom</span> <span class=o>-</span> <span class=n>top</span><span class=p>)</span>

    <span class=n>bdn</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;BackdropNode&quot;</span><span class=p>)</span>
    <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;z_order&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>layer</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>color</span><span class=p>:</span>
        <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;tile_color&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>color</span><span class=p>,</span> <span class=mi>16</span><span class=p>))</span>

    <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;xpos&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>bdX</span><span class=p>)</span>
    <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;ypos&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>bdY</span><span class=p>)</span>
    <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;bdwidth&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>bdW</span><span class=p>)</span>
    <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;bdheight&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>bdH</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>label</span><span class=p>:</span>
        <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>label</span><span class=p>)</span>

    <span class=n>bdn</span><span class=p>[</span><span class=s2>&quot;note_font_size&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>bdn</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.create_camera_node_by_version class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_camera_node_by_version</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Function to create the camera with the latest node class For Nuke version 14.0 or later, the Camera4 camera node class would be used For the version before, the Camera2 camera node class would be used Returns: Node: camera node</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>3006</span>
<span class=normal>3007</span>
<span class=normal>3008</span>
<span class=normal>3009</span>
<span class=normal>3010</span>
<span class=normal>3011</span>
<span class=normal>3012</span>
<span class=normal>3013</span>
<span class=normal>3014</span>
<span class=normal>3015</span>
<span class=normal>3016</span>
<span class=normal>3017</span>
<span class=normal>3018</span>
<span class=normal>3019</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_camera_node_by_version</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Function to create the camera with the latest node class</span>
<span class=sd>    For Nuke version 14.0 or later, the Camera4 camera node class</span>
<span class=sd>        would be used</span>
<span class=sd>    For the version before, the Camera2 camera node class</span>
<span class=sd>        would be used</span>
<span class=sd>    Returns:</span>
<span class=sd>        Node: camera node</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>nuke_number_version</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>NUKE_VERSION_MAJOR</span>
    <span class=k>if</span> <span class=n>nuke_number_version</span> <span class=o>&gt;=</span> <span class=mi>14</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;Camera4&quot;</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;Camera2&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.create_knobs class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_knobs</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>tab</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create knobs by data</p> <p>Depending on the type of each dict value and creates the correct Knob.</p> <details class=mapped-types open> <summary>Mapped types</summary> <p>bool: nuke.Boolean_Knob int: nuke.Int_Knob float: nuke.Double_Knob list: nuke.Enumeration_Knob str: nuke.String_Knob</p> <p>dict: If it's a nested dict (all values are dict), will turn into A tabs group. Or just a knobs group.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>collection of attributes and their value</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>tab</code> </td> <td> <code><span title=string>string</span></code> </td> <td> <div class=doc-md-description> <p>Knobs' tab name</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> </td> <td> <div class=doc-md-description> <p>A list of <code>nuke.Knob</code> objects</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_knobs</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>tab</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create knobs by data</span>

<span class=sd>    Depending on the type of each dict value and creates the correct Knob.</span>

<span class=sd>    Mapped types:</span>
<span class=sd>        bool: nuke.Boolean_Knob</span>
<span class=sd>        int: nuke.Int_Knob</span>
<span class=sd>        float: nuke.Double_Knob</span>
<span class=sd>        list: nuke.Enumeration_Knob</span>
<span class=sd>        str: nuke.String_Knob</span>

<span class=sd>        dict: If it&#39;s a nested dict (all values are dict), will turn into</span>
<span class=sd>            A tabs group. Or just a knobs group.</span>

<span class=sd>    Args:</span>
<span class=sd>        data (dict): collection of attributes and their value</span>
<span class=sd>        tab (string, optional): Knobs&#39; tab name</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: A list of `nuke.Knob` objects</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=nf>nice_naming</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert camelCase name into UI Display Name&quot;&quot;&quot;</span>
        <span class=n>words</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=s1>&#39;[A-Z][^A-Z]*&#39;</span><span class=p>,</span> <span class=n>key</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=o>+</span> <span class=n>key</span><span class=p>[</span><span class=mi>1</span><span class=p>:])</span>
        <span class=k>return</span> <span class=s2>&quot; &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>words</span><span class=p>)</span>

    <span class=c1># Turn key-value pairs into knobs</span>
    <span class=n>knobs</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>

    <span class=k>if</span> <span class=n>tab</span><span class=p>:</span>
        <span class=n>knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>Tab_Knob</span><span class=p>(</span><span class=n>tab</span><span class=p>))</span>

    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=c1># Knob name</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>):</span>
            <span class=n>name</span><span class=p>,</span> <span class=n>nice</span> <span class=o>=</span> <span class=n>key</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>name</span><span class=p>,</span> <span class=n>nice</span> <span class=o>=</span> <span class=n>key</span><span class=p>,</span> <span class=n>nice_naming</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=c1># Create knob by value type</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>Knobby</span><span class=p>):</span>
            <span class=n>knobby</span> <span class=o>=</span> <span class=n>value</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>knobby</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>float</span><span class=p>):</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Double_Knob</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>)</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Boolean_Knob</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>)</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setFlag</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>STARTLINE</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Int_Knob</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>)</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>String_Knob</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>)</span>
            <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Enumeration_Knob</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=k>if</span> <span class=nb>all</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>value</span><span class=o>.</span><span class=n>values</span><span class=p>()):</span>
                <span class=c1># Create a group of tabs</span>
                <span class=n>begain</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>BeginTabGroup_Knob</span><span class=p>()</span>
                <span class=n>end</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>EndTabGroup_Knob</span><span class=p>()</span>
                <span class=n>begain</span><span class=o>.</span><span class=n>setName</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
                <span class=n>end</span><span class=o>.</span><span class=n>setName</span><span class=p>(</span><span class=n>name</span> <span class=o>+</span> <span class=s2>&quot;_End&quot;</span><span class=p>)</span>
                <span class=n>knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>begain</span><span class=p>)</span>
                <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>value</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                    <span class=n>knobs</span> <span class=o>+=</span> <span class=n>create_knobs</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=n>tab</span><span class=o>=</span><span class=n>k</span><span class=p>)</span>
                <span class=n>knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>end</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=c1># Create a group of knobs</span>
                <span class=n>knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>Tab_Knob</span><span class=p>(</span>
                    <span class=n>name</span><span class=p>,</span> <span class=n>nice</span><span class=p>,</span> <span class=n>nuke</span><span class=o>.</span><span class=n>TABBEGINCLOSEDGROUP</span><span class=p>))</span>
                <span class=n>knobs</span> <span class=o>+=</span> <span class=n>create_knobs</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
                <span class=n>knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>nuke</span><span class=o>.</span><span class=n>Tab_Knob</span><span class=p>(</span><span class=n>name</span> <span class=o>+</span> <span class=s2>&quot;_End&quot;</span><span class=p>,</span> <span class=n>nice</span><span class=p>,</span> <span class=n>nuke</span><span class=o>.</span><span class=n>TABENDGROUP</span><span class=p>))</span>
            <span class=k>continue</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Unsupported type for key: &#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>&#39;: </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

        <span class=n>knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>knobs</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.create_viewer_profile_string class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_viewer_profile_string</span><span class=p>(</span><span class=n>viewer</span><span class=p>,</span> <span class=n>display</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convert viewer and display to string</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>viewer</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>viewer name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>display</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>display name</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>path_like</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>if True, return path like string</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>viewer config string</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2963</span>
<span class=normal>2964</span>
<span class=normal>2965</span>
<span class=normal>2966</span>
<span class=normal>2967</span>
<span class=normal>2968</span>
<span class=normal>2969</span>
<span class=normal>2970</span>
<span class=normal>2971</span>
<span class=normal>2972</span>
<span class=normal>2973</span>
<span class=normal>2974</span>
<span class=normal>2975</span>
<span class=normal>2976</span>
<span class=normal>2977</span>
<span class=normal>2978</span>
<span class=normal>2979</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_viewer_profile_string</span><span class=p>(</span><span class=n>viewer</span><span class=p>,</span> <span class=n>display</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>path_like</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert viewer and display to string</span>

<span class=sd>    Args:</span>
<span class=sd>        viewer (str): viewer name</span>
<span class=sd>        display (Optional[str]): display name</span>
<span class=sd>        path_like (Optional[bool]): if True, return path like string</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: viewer config string</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>display</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>viewer</span>

    <span class=k>if</span> <span class=n>path_like</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>/</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>display</span><span class=p>,</span> <span class=n>viewer</span><span class=p>)</span>
    <span class=k>return</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>viewer</span><span class=p>,</span> <span class=n>display</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.create_write_node class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_write_node</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=nb>input</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>prenodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>linked_knobs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Creating write node which is group node</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>name of node</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>creator write instance data</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>input (node)[optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>selected node to connect to</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>prenodes</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=list>list</span>[<span title=dict>dict</span>]]</code> </td> <td> <div class=doc-md-description> <p>nodes to be created before write with dependency</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>review (bool)[optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>adding review knob</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>farm (bool)[optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>rendering workflow target</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>kwargs (dict)[optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>additional key arguments for formatting</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <p>prenodes = { "nodeName": { "nodeclass": "Reformat", "dependent": [ following_node_01, ... ], "knobs": [ { "type": "text", "name": "knobname", "value": "knob value" }, ... ] }, ... }</p> </details> <details class=return open> <summary>Return</summary> <p>node (obj): group node with avalon data as Knobs</p> </details> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1109</span>
<span class=normal>1110</span>
<span class=normal>1111</span>
<span class=normal>1112</span>
<span class=normal>1113</span>
<span class=normal>1114</span>
<span class=normal>1115</span>
<span class=normal>1116</span>
<span class=normal>1117</span>
<span class=normal>1118</span>
<span class=normal>1119</span>
<span class=normal>1120</span>
<span class=normal>1121</span>
<span class=normal>1122</span>
<span class=normal>1123</span>
<span class=normal>1124</span>
<span class=normal>1125</span>
<span class=normal>1126</span>
<span class=normal>1127</span>
<span class=normal>1128</span>
<span class=normal>1129</span>
<span class=normal>1130</span>
<span class=normal>1131</span>
<span class=normal>1132</span>
<span class=normal>1133</span>
<span class=normal>1134</span>
<span class=normal>1135</span>
<span class=normal>1136</span>
<span class=normal>1137</span>
<span class=normal>1138</span>
<span class=normal>1139</span>
<span class=normal>1140</span>
<span class=normal>1141</span>
<span class=normal>1142</span>
<span class=normal>1143</span>
<span class=normal>1144</span>
<span class=normal>1145</span>
<span class=normal>1146</span>
<span class=normal>1147</span>
<span class=normal>1148</span>
<span class=normal>1149</span>
<span class=normal>1150</span>
<span class=normal>1151</span>
<span class=normal>1152</span>
<span class=normal>1153</span>
<span class=normal>1154</span>
<span class=normal>1155</span>
<span class=normal>1156</span>
<span class=normal>1157</span>
<span class=normal>1158</span>
<span class=normal>1159</span>
<span class=normal>1160</span>
<span class=normal>1161</span>
<span class=normal>1162</span>
<span class=normal>1163</span>
<span class=normal>1164</span>
<span class=normal>1165</span>
<span class=normal>1166</span>
<span class=normal>1167</span>
<span class=normal>1168</span>
<span class=normal>1169</span>
<span class=normal>1170</span>
<span class=normal>1171</span>
<span class=normal>1172</span>
<span class=normal>1173</span>
<span class=normal>1174</span>
<span class=normal>1175</span>
<span class=normal>1176</span>
<span class=normal>1177</span>
<span class=normal>1178</span>
<span class=normal>1179</span>
<span class=normal>1180</span>
<span class=normal>1181</span>
<span class=normal>1182</span>
<span class=normal>1183</span>
<span class=normal>1184</span>
<span class=normal>1185</span>
<span class=normal>1186</span>
<span class=normal>1187</span>
<span class=normal>1188</span>
<span class=normal>1189</span>
<span class=normal>1190</span>
<span class=normal>1191</span>
<span class=normal>1192</span>
<span class=normal>1193</span>
<span class=normal>1194</span>
<span class=normal>1195</span>
<span class=normal>1196</span>
<span class=normal>1197</span>
<span class=normal>1198</span>
<span class=normal>1199</span>
<span class=normal>1200</span>
<span class=normal>1201</span>
<span class=normal>1202</span>
<span class=normal>1203</span>
<span class=normal>1204</span>
<span class=normal>1205</span>
<span class=normal>1206</span>
<span class=normal>1207</span>
<span class=normal>1208</span>
<span class=normal>1209</span>
<span class=normal>1210</span>
<span class=normal>1211</span>
<span class=normal>1212</span>
<span class=normal>1213</span>
<span class=normal>1214</span>
<span class=normal>1215</span>
<span class=normal>1216</span>
<span class=normal>1217</span>
<span class=normal>1218</span>
<span class=normal>1219</span>
<span class=normal>1220</span>
<span class=normal>1221</span>
<span class=normal>1222</span>
<span class=normal>1223</span>
<span class=normal>1224</span>
<span class=normal>1225</span>
<span class=normal>1226</span>
<span class=normal>1227</span>
<span class=normal>1228</span>
<span class=normal>1229</span>
<span class=normal>1230</span>
<span class=normal>1231</span>
<span class=normal>1232</span>
<span class=normal>1233</span>
<span class=normal>1234</span>
<span class=normal>1235</span>
<span class=normal>1236</span>
<span class=normal>1237</span>
<span class=normal>1238</span>
<span class=normal>1239</span>
<span class=normal>1240</span>
<span class=normal>1241</span>
<span class=normal>1242</span>
<span class=normal>1243</span>
<span class=normal>1244</span>
<span class=normal>1245</span>
<span class=normal>1246</span>
<span class=normal>1247</span>
<span class=normal>1248</span>
<span class=normal>1249</span>
<span class=normal>1250</span>
<span class=normal>1251</span>
<span class=normal>1252</span>
<span class=normal>1253</span>
<span class=normal>1254</span>
<span class=normal>1255</span>
<span class=normal>1256</span>
<span class=normal>1257</span>
<span class=normal>1258</span>
<span class=normal>1259</span>
<span class=normal>1260</span>
<span class=normal>1261</span>
<span class=normal>1262</span>
<span class=normal>1263</span>
<span class=normal>1264</span>
<span class=normal>1265</span>
<span class=normal>1266</span>
<span class=normal>1267</span>
<span class=normal>1268</span>
<span class=normal>1269</span>
<span class=normal>1270</span>
<span class=normal>1271</span>
<span class=normal>1272</span>
<span class=normal>1273</span>
<span class=normal>1274</span>
<span class=normal>1275</span>
<span class=normal>1276</span>
<span class=normal>1277</span>
<span class=normal>1278</span>
<span class=normal>1279</span>
<span class=normal>1280</span>
<span class=normal>1281</span>
<span class=normal>1282</span>
<span class=normal>1283</span>
<span class=normal>1284</span>
<span class=normal>1285</span>
<span class=normal>1286</span>
<span class=normal>1287</span>
<span class=normal>1288</span>
<span class=normal>1289</span>
<span class=normal>1290</span>
<span class=normal>1291</span>
<span class=normal>1292</span>
<span class=normal>1293</span>
<span class=normal>1294</span>
<span class=normal>1295</span>
<span class=normal>1296</span>
<span class=normal>1297</span>
<span class=normal>1298</span>
<span class=normal>1299</span>
<span class=normal>1300</span>
<span class=normal>1301</span>
<span class=normal>1302</span>
<span class=normal>1303</span>
<span class=normal>1304</span>
<span class=normal>1305</span>
<span class=normal>1306</span>
<span class=normal>1307</span>
<span class=normal>1308</span>
<span class=normal>1309</span>
<span class=normal>1310</span>
<span class=normal>1311</span>
<span class=normal>1312</span>
<span class=normal>1313</span>
<span class=normal>1314</span>
<span class=normal>1315</span>
<span class=normal>1316</span>
<span class=normal>1317</span>
<span class=normal>1318</span>
<span class=normal>1319</span>
<span class=normal>1320</span>
<span class=normal>1321</span>
<span class=normal>1322</span>
<span class=normal>1323</span>
<span class=normal>1324</span>
<span class=normal>1325</span>
<span class=normal>1326</span>
<span class=normal>1327</span>
<span class=normal>1328</span>
<span class=normal>1329</span>
<span class=normal>1330</span>
<span class=normal>1331</span>
<span class=normal>1332</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_write_node</span><span class=p>(</span>
    <span class=n>name</span><span class=p>,</span>
    <span class=n>data</span><span class=p>,</span>
    <span class=nb>input</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>prenodes</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>linked_knobs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>kwargs</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Creating write node which is group node</span>

<span class=sd>    Arguments:</span>
<span class=sd>        name (str): name of node</span>
<span class=sd>        data (dict): creator write instance data</span>
<span class=sd>        input (node)[optional]: selected node to connect to</span>
<span class=sd>        prenodes (Optional[list[dict]]): nodes to be created before write</span>
<span class=sd>            with dependency</span>
<span class=sd>        review (bool)[optional]: adding review knob</span>
<span class=sd>        farm (bool)[optional]: rendering workflow target</span>
<span class=sd>        kwargs (dict)[optional]: additional key arguments for formatting</span>

<span class=sd>    Example:</span>
<span class=sd>        prenodes = {</span>
<span class=sd>            &quot;nodeName&quot;: {</span>
<span class=sd>                &quot;nodeclass&quot;: &quot;Reformat&quot;,</span>
<span class=sd>                &quot;dependent&quot;: [</span>
<span class=sd>                    following_node_01,</span>
<span class=sd>                    ...</span>
<span class=sd>                ],</span>
<span class=sd>                &quot;knobs&quot;: [</span>
<span class=sd>                    {</span>
<span class=sd>                        &quot;type&quot;: &quot;text&quot;,</span>
<span class=sd>                        &quot;name&quot;: &quot;knobname&quot;,</span>
<span class=sd>                        &quot;value&quot;: &quot;knob value&quot;</span>
<span class=sd>                    },</span>
<span class=sd>                    ...</span>
<span class=sd>                ]</span>
<span class=sd>            },</span>
<span class=sd>            ...</span>
<span class=sd>        }</span>


<span class=sd>    Return:</span>
<span class=sd>        node (obj): group node with avalon data as Knobs</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=c1># Ensure name does not contain any invalid characters.</span>
    <span class=n>special_chars</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>escape</span><span class=p>(</span><span class=s2>&quot;!@#$%^&amp;*()=[]</span><span class=si>{}</span><span class=s2>|</span><span class=se>\\</span><span class=s2>;&#39;,.&lt;&gt;/?~+-&quot;</span><span class=p>)</span>
    <span class=n>special_chars_regex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;[</span><span class=si>{</span><span class=n>special_chars</span><span class=si>}</span><span class=s2>]&quot;</span><span class=p>)</span>
    <span class=n>found_special_characters</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>special_chars_regex</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>name</span><span class=p>))</span>

    <span class=n>msg</span> <span class=o>=</span> <span class=p>(</span>
        <span class=sa>f</span><span class=s2>&quot;Special characters found in name </span><span class=se>\&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=se>\&quot;</span><span class=s2>: &quot;</span>
        <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=s1>&#39; &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>found_special_characters</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=p>)</span>
    <span class=k>assert</span> <span class=ow>not</span> <span class=n>found_special_characters</span><span class=p>,</span> <span class=n>msg</span>

    <span class=n>prenodes</span> <span class=o>=</span> <span class=n>prenodes</span> <span class=ow>or</span> <span class=p>[]</span>

    <span class=c1># filtering variables</span>
    <span class=n>plugin_name</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>]</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span>

    <span class=c1># get knob settings for write node</span>
    <span class=n>imageio_writes</span> <span class=o>=</span> <span class=n>get_imageio_node_setting</span><span class=p>(</span>
        <span class=n>node_class</span><span class=o>=</span><span class=s2>&quot;Write&quot;</span><span class=p>,</span>
        <span class=n>plugin_name</span><span class=o>=</span><span class=n>plugin_name</span><span class=p>,</span>
        <span class=n>product_name</span><span class=o>=</span><span class=n>product_name</span>
    <span class=p>)</span>

    <span class=n>ext</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>knobs</span> <span class=o>=</span> <span class=n>imageio_writes</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span>
    <span class=n>knob_names</span> <span class=o>=</span> <span class=p>{</span><span class=n>knob</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]:</span> <span class=n>knob</span> <span class=k>for</span> <span class=n>knob</span> <span class=ow>in</span> <span class=n>knobs</span><span class=p>}</span>

    <span class=k>if</span> <span class=s2>&quot;ext&quot;</span> <span class=ow>in</span> <span class=n>knob_names</span><span class=p>:</span>
        <span class=n>knob_type</span> <span class=o>=</span> <span class=n>knob_names</span><span class=p>[</span><span class=s2>&quot;ext&quot;</span><span class=p>][</span><span class=s2>&quot;type&quot;</span><span class=p>]</span>
        <span class=n>ext</span> <span class=o>=</span> <span class=n>knob_names</span><span class=p>[</span><span class=s2>&quot;ext&quot;</span><span class=p>][</span><span class=n>knob_type</span><span class=p>]</span>

    <span class=c1># For most extensions, setting the &quot;file_type&quot;</span>
    <span class=c1># is enough, however sometimes they differ, e.g.:</span>
    <span class=c1># ext = sxr / file_type = exr</span>
    <span class=c1># ext = jpg / file_type = jpeg</span>
    <span class=k>elif</span> <span class=s2>&quot;file_type&quot;</span> <span class=ow>in</span> <span class=n>knob_names</span><span class=p>:</span>
        <span class=n>knob_type</span> <span class=o>=</span> <span class=n>knob_names</span><span class=p>[</span><span class=s2>&quot;file_type&quot;</span><span class=p>][</span><span class=s2>&quot;type&quot;</span><span class=p>]</span>
        <span class=n>ext</span> <span class=o>=</span> <span class=n>knob_names</span><span class=p>[</span><span class=s2>&quot;file_type&quot;</span><span class=p>][</span><span class=n>knob_type</span><span class=p>]</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>ext</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span>
            <span class=s2>&quot;Could not determine extension from settings for &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;plugin_name=</span><span class=si>{</span><span class=n>plugin_name</span><span class=si>}</span><span class=s2> product_name=</span><span class=si>{</span><span class=n>product_name</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>

    <span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
        <span class=s2>&quot;imageio_writes&quot;</span><span class=p>:</span> <span class=n>imageio_writes</span><span class=p>,</span>
        <span class=s2>&quot;ext&quot;</span><span class=p>:</span> <span class=n>ext</span>
    <span class=p>})</span>

    <span class=c1># build file path to workfiles</span>
    <span class=n>data</span><span class=p>[</span><span class=s2>&quot;work&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_work_default_directory</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=n>fpath</span> <span class=o>=</span> <span class=n>StringTemplate</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;fpath_template&quot;</span><span class=p>])</span><span class=o>.</span><span class=n>format_strict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

    <span class=c1># Override output directory is provided staging directory.</span>
    <span class=k>if</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;staging_dir&quot;</span><span class=p>):</span>
        <span class=n>basename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>fpath</span><span class=p>)</span>
        <span class=n>staging_path</span> <span class=o>=</span> <span class=n>pathlib</span><span class=o>.</span><span class=n>Path</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;staging_dir&quot;</span><span class=p>])</span> <span class=o>/</span> <span class=n>basename</span>
        <span class=n>fpath</span> <span class=o>=</span> <span class=n>staging_path</span><span class=o>.</span><span class=n>as_posix</span><span class=p>()</span>

    <span class=c1># create directory</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>fpath</span><span class=p>)):</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Path does not exist! I am creating it.&quot;</span><span class=p>)</span>
        <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>fpath</span><span class=p>))</span>

    <span class=n>GN</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;Group&quot;</span><span class=p>,</span> <span class=s2>&quot;name </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=p>))</span>

    <span class=n>prev_node</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>with</span> <span class=n>GN</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>input</span><span class=p>:</span>
            <span class=n>input_name</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=nb>input</span><span class=o>.</span><span class=n>name</span><span class=p>())</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span>
            <span class=c1># if connected input node was defined</span>
            <span class=n>prev_node</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span>
                <span class=s2>&quot;Input&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>input_name</span><span class=p>),</span>
                <span class=n>inpanel</span><span class=o>=</span><span class=kc>False</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># generic input node connected to nothing</span>
            <span class=n>prev_node</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span>
                <span class=s2>&quot;Input&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&quot;rgba&quot;</span><span class=p>),</span>
                <span class=n>inpanel</span><span class=o>=</span><span class=kc>False</span>
            <span class=p>)</span>

        <span class=c1># creating pre-write nodes `prenodes`</span>
        <span class=n>last_prenode</span> <span class=o>=</span> <span class=n>create_prenodes</span><span class=p>(</span>
            <span class=n>prev_node</span><span class=p>,</span>
            <span class=n>prenodes</span><span class=p>,</span>
            <span class=n>plugin_name</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=o>**</span><span class=n>kwargs</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>last_prenode</span><span class=p>:</span>
            <span class=n>prev_node</span> <span class=o>=</span> <span class=n>last_prenode</span>

        <span class=c1># creating write node</span>
        <span class=n>write_node</span> <span class=o>=</span> <span class=n>now_node</span> <span class=o>=</span> <span class=n>add_write_node</span><span class=p>(</span>
            <span class=s2>&quot;inside_</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=p>),</span>
            <span class=n>fpath</span><span class=p>,</span>
            <span class=n>imageio_writes</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>],</span>
            <span class=o>**</span><span class=n>data</span>
        <span class=p>)</span>
        <span class=c1># connect to previous node</span>
        <span class=n>now_node</span><span class=o>.</span><span class=n>setInput</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>prev_node</span><span class=p>)</span>

        <span class=c1># switch actual node to previous</span>
        <span class=n>prev_node</span> <span class=o>=</span> <span class=n>now_node</span>

        <span class=n>now_node</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>createNode</span><span class=p>(</span><span class=s2>&quot;Output&quot;</span><span class=p>,</span> <span class=s2>&quot;name Output1&quot;</span><span class=p>,</span> <span class=n>inpanel</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

        <span class=c1># connect to previous node</span>
        <span class=n>now_node</span><span class=o>.</span><span class=n>setInput</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>prev_node</span><span class=p>)</span>

    <span class=c1># add divider</span>
    <span class=n>GN</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>Text_Knob</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=s1>&#39;Rendering&#39;</span><span class=p>))</span>

    <span class=c1># Add linked knobs.</span>
    <span class=n>linked_knob_names</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># add input linked knobs and create group only if any input</span>
    <span class=k>if</span> <span class=n>linked_knobs</span><span class=p>:</span>
        <span class=n>linked_knob_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;_grp-start_&quot;</span><span class=p>)</span>
        <span class=n>linked_knob_names</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>linked_knobs</span><span class=p>)</span>
        <span class=n>linked_knob_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;_grp-end_&quot;</span><span class=p>)</span>

    <span class=n>linked_knob_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;Render&quot;</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>_k_name</span> <span class=ow>in</span> <span class=n>linked_knob_names</span><span class=p>:</span>
        <span class=k>if</span> <span class=s2>&quot;_grp-start_&quot;</span> <span class=ow>in</span> <span class=n>_k_name</span><span class=p>:</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Tab_Knob</span><span class=p>(</span>
                <span class=s2>&quot;rnd_attr&quot;</span><span class=p>,</span> <span class=s2>&quot;Rendering attributes&quot;</span><span class=p>,</span> <span class=n>nuke</span><span class=o>.</span><span class=n>TABBEGINCLOSEDGROUP</span><span class=p>)</span>
            <span class=n>GN</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>
        <span class=k>elif</span> <span class=s2>&quot;_grp-end_&quot;</span> <span class=ow>in</span> <span class=n>_k_name</span><span class=p>:</span>
            <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Tab_Knob</span><span class=p>(</span>
                <span class=s2>&quot;rnd_attr_end&quot;</span><span class=p>,</span> <span class=s2>&quot;Rendering attributes&quot;</span><span class=p>,</span> <span class=n>nuke</span><span class=o>.</span><span class=n>TABENDGROUP</span><span class=p>)</span>
            <span class=n>GN</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>if</span> <span class=s2>&quot;___&quot;</span> <span class=ow>in</span> <span class=n>_k_name</span><span class=p>:</span>
                <span class=c1># add divider</span>
                <span class=n>GN</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>Text_Knob</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>))</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=c1># add linked knob by _k_name</span>
                <span class=n>link</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Link_Knob</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
                <span class=n>link</span><span class=o>.</span><span class=n>makeLink</span><span class=p>(</span><span class=n>write_node</span><span class=o>.</span><span class=n>name</span><span class=p>(),</span> <span class=n>_k_name</span><span class=p>)</span>
                <span class=n>link</span><span class=o>.</span><span class=n>setName</span><span class=p>(</span><span class=n>_k_name</span><span class=p>)</span>

                <span class=c1># make render</span>
                <span class=k>if</span> <span class=s2>&quot;Render&quot;</span> <span class=ow>in</span> <span class=n>_k_name</span><span class=p>:</span>
                    <span class=n>link</span><span class=o>.</span><span class=n>setLabel</span><span class=p>(</span><span class=s2>&quot;Render Local&quot;</span><span class=p>)</span>
                <span class=n>link</span><span class=o>.</span><span class=n>setFlag</span><span class=p>(</span><span class=mh>0x1000</span><span class=p>)</span>
                <span class=n>GN</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>

    <span class=c1># Adding render farm submission button.</span>
    <span class=k>if</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;render_on_farm&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>):</span>
        <span class=n>add_button_render_on_farm</span><span class=p>(</span><span class=n>GN</span><span class=p>)</span>

    <span class=c1># adding write to read button</span>
    <span class=n>add_button_write_to_read</span><span class=p>(</span><span class=n>GN</span><span class=p>)</span>

    <span class=c1># adding write to read button</span>
    <span class=n>add_button_clear_rendered</span><span class=p>(</span><span class=n>GN</span><span class=p>,</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>fpath</span><span class=p>))</span>

    <span class=c1># set tile color</span>
    <span class=n>tile_color</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span>
        <span class=nb>iter</span><span class=p>(</span>
            <span class=n>k</span><span class=p>[</span><span class=n>k</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]]</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>imageio_writes</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span>
            <span class=k>if</span> <span class=s2>&quot;tile_color&quot;</span> <span class=ow>in</span> <span class=n>k</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=p>),</span> <span class=p>[</span><span class=mi>255</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>255</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=n>new_tile_color</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>tile_color</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>c</span><span class=p>,</span> <span class=nb>float</span><span class=p>):</span>
            <span class=n>c</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>c</span> <span class=o>*</span> <span class=mi>255</span><span class=p>)</span>
        <span class=n>new_tile_color</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>
    <span class=n>GN</span><span class=p>[</span><span class=s2>&quot;tile_color&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span>
        <span class=n>color_gui_to_int</span><span class=p>(</span><span class=n>new_tile_color</span><span class=p>))</span>

    <span class=k>return</span> <span class=n>GN</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.deprecated class="doc doc-heading"> <code class="highlight language-python"><span class=n>deprecated</span><span class=p>(</span><span class=n>new_destination</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Mark functions as deprecated.</p> <p>It will result in a warning being emitted when the function is used.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>deprecated</span><span class=p>(</span><span class=n>new_destination</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Mark functions as deprecated.</span>

<span class=sd>    It will result in a warning being emitted when the function is used.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>func</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=nb>callable</span><span class=p>(</span><span class=n>new_destination</span><span class=p>):</span>
        <span class=n>func</span> <span class=o>=</span> <span class=n>new_destination</span>
        <span class=n>new_destination</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_decorator</span><span class=p>(</span><span class=n>decorated_func</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>new_destination</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>warning_message</span> <span class=o>=</span> <span class=p>(</span>
                <span class=s2>&quot; Please check content of deprecated function to figure out&quot;</span>
                <span class=s2>&quot; possible replacement.&quot;</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>warning_message</span> <span class=o>=</span> <span class=s2>&quot; Please replace your usage with &#39;</span><span class=si>{}</span><span class=s2>&#39;.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>new_destination</span>
            <span class=p>)</span>

        <span class=nd>@functools</span><span class=o>.</span><span class=n>wraps</span><span class=p>(</span><span class=n>decorated_func</span><span class=p>)</span>
        <span class=k>def</span><span class=w> </span><span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>simplefilter</span><span class=p>(</span><span class=s2>&quot;always&quot;</span><span class=p>,</span> <span class=n>DeprecatedWarning</span><span class=p>)</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=p>(</span>
                    <span class=s2>&quot;Call to deprecated function &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Function was moved or removed.</span><span class=si>{}</span><span class=s2>&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>decorated_func</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>warning_message</span><span class=p>),</span>
                <span class=n>category</span><span class=o>=</span><span class=n>DeprecatedWarning</span><span class=p>,</span>
                <span class=n>stacklevel</span><span class=o>=</span><span class=mi>4</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=n>decorated_func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>wrapper</span>

    <span class=k>if</span> <span class=n>func</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_decorator</span>
    <span class=k>return</span> <span class=n>_decorator</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.dirmap_file_name_filter class="doc doc-heading"> <code class="highlight language-python"><span class=n>dirmap_file_name_filter</span><span class=p>(</span><span class=n>file_name</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Nuke callback function with single full path argument.</p> <p>Checks project settings for potential mapping from source to dest.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2755</span>
<span class=normal>2756</span>
<span class=normal>2757</span>
<span class=normal>2758</span>
<span class=normal>2759</span>
<span class=normal>2760</span>
<span class=normal>2761</span>
<span class=normal>2762</span>
<span class=normal>2763</span>
<span class=normal>2764</span>
<span class=normal>2765</span>
<span class=normal>2766</span>
<span class=normal>2767</span>
<span class=normal>2768</span>
<span class=normal>2769</span>
<span class=normal>2770</span>
<span class=normal>2771</span>
<span class=normal>2772</span>
<span class=normal>2773</span>
<span class=normal>2774</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>dirmap_file_name_filter</span><span class=p>(</span><span class=n>file_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Nuke callback function with single full path argument.</span>

<span class=sd>        Checks project settings for potential mapping from source to dest.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>dirmap_processor</span> <span class=o>=</span> <span class=n>NukeDirmap</span><span class=p>(</span>
        <span class=n>file_name</span><span class=p>,</span>
        <span class=s2>&quot;nuke&quot;</span><span class=p>,</span>
        <span class=n>DirmapCache</span><span class=o>.</span><span class=n>project_name</span><span class=p>(),</span>
        <span class=n>DirmapCache</span><span class=o>.</span><span class=n>project_settings</span><span class=p>(),</span>
        <span class=n>DirmapCache</span><span class=o>.</span><span class=n>sitesync_addon</span><span class=p>(),</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>DirmapCache</span><span class=o>.</span><span class=n>mapping</span><span class=p>():</span>
        <span class=n>DirmapCache</span><span class=o>.</span><span class=n>set_mapping</span><span class=p>(</span><span class=n>dirmap_processor</span><span class=o>.</span><span class=n>get_mappings</span><span class=p>())</span>

    <span class=n>dirmap_processor</span><span class=o>.</span><span class=n>process_dirmap</span><span class=p>(</span><span class=n>DirmapCache</span><span class=o>.</span><span class=n>mapping</span><span class=p>())</span>
    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>dirmap_processor</span><span class=o>.</span><span class=n>file_name</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>dirmap_processor</span><span class=o>.</span><span class=n>file_name</span>
    <span class=k>return</span> <span class=n>file_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.find_free_space_to_paste_nodes class="doc doc-heading"> <code class="highlight language-python"><span class=n>find_free_space_to_paste_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=n>group</span><span class=o>=</span><span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>(),</span> <span class=n>direction</span><span class=o>=</span><span class=s1>&#39;right&#39;</span><span class=p>,</span> <span class=n>offset</span><span class=o>=</span><span class=mi>300</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>For getting coordinates in DAG (node graph) for placing new nodes</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of nuke.Node objects</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>group (nuke.Node) [optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>object in which context it is</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>direction (str) [optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>where we want it to be placed [left, right, top, bottom]</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>offset (int) [optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>what offset it is from rest of nodes</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>xpos</code></td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>x coordinace in DAG</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>ypos</code></td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>y coordinace in DAG</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2278</span>
<span class=normal>2279</span>
<span class=normal>2280</span>
<span class=normal>2281</span>
<span class=normal>2282</span>
<span class=normal>2283</span>
<span class=normal>2284</span>
<span class=normal>2285</span>
<span class=normal>2286</span>
<span class=normal>2287</span>
<span class=normal>2288</span>
<span class=normal>2289</span>
<span class=normal>2290</span>
<span class=normal>2291</span>
<span class=normal>2292</span>
<span class=normal>2293</span>
<span class=normal>2294</span>
<span class=normal>2295</span>
<span class=normal>2296</span>
<span class=normal>2297</span>
<span class=normal>2298</span>
<span class=normal>2299</span>
<span class=normal>2300</span>
<span class=normal>2301</span>
<span class=normal>2302</span>
<span class=normal>2303</span>
<span class=normal>2304</span>
<span class=normal>2305</span>
<span class=normal>2306</span>
<span class=normal>2307</span>
<span class=normal>2308</span>
<span class=normal>2309</span>
<span class=normal>2310</span>
<span class=normal>2311</span>
<span class=normal>2312</span>
<span class=normal>2313</span>
<span class=normal>2314</span>
<span class=normal>2315</span>
<span class=normal>2316</span>
<span class=normal>2317</span>
<span class=normal>2318</span>
<span class=normal>2319</span>
<span class=normal>2320</span>
<span class=normal>2321</span>
<span class=normal>2322</span>
<span class=normal>2323</span>
<span class=normal>2324</span>
<span class=normal>2325</span>
<span class=normal>2326</span>
<span class=normal>2327</span>
<span class=normal>2328</span>
<span class=normal>2329</span>
<span class=normal>2330</span>
<span class=normal>2331</span>
<span class=normal>2332</span>
<span class=normal>2333</span>
<span class=normal>2334</span>
<span class=normal>2335</span>
<span class=normal>2336</span>
<span class=normal>2337</span>
<span class=normal>2338</span>
<span class=normal>2339</span>
<span class=normal>2340</span>
<span class=normal>2341</span>
<span class=normal>2342</span>
<span class=normal>2343</span>
<span class=normal>2344</span>
<span class=normal>2345</span>
<span class=normal>2346</span>
<span class=normal>2347</span>
<span class=normal>2348</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>find_free_space_to_paste_nodes</span><span class=p>(</span>
    <span class=n>nodes</span><span class=p>,</span>
    <span class=n>group</span><span class=o>=</span><span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>(),</span>
    <span class=n>direction</span><span class=o>=</span><span class=s2>&quot;right&quot;</span><span class=p>,</span>
    <span class=n>offset</span><span class=o>=</span><span class=mi>300</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    For getting coordinates in DAG (node graph) for placing new nodes</span>

<span class=sd>    Arguments:</span>
<span class=sd>        nodes (list): list of nuke.Node objects</span>
<span class=sd>        group (nuke.Node) [optional]: object in which context it is</span>
<span class=sd>        direction (str) [optional]: where we want it to be placed</span>
<span class=sd>                                    [left, right, top, bottom]</span>
<span class=sd>        offset (int) [optional]: what offset it is from rest of nodes</span>

<span class=sd>    Returns:</span>
<span class=sd>        xpos (int): x coordinace in DAG</span>
<span class=sd>        ypos (int): y coordinace in DAG</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>return</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span>

    <span class=n>group_xpos</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
    <span class=n>group_ypos</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>

    <span class=c1># get local coordinates of all nodes</span>
    <span class=n>nodes_xpos</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span> <span class=o>+</span> \
                 <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=o>+</span> <span class=n>n</span><span class=o>.</span><span class=n>screenWidth</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>

    <span class=n>nodes_ypos</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span> <span class=o>+</span> \
                 <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=o>+</span> <span class=n>n</span><span class=o>.</span><span class=n>screenHeight</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>

    <span class=c1># get complete screen size of all nodes to be placed in</span>
    <span class=n>nodes_screen_width</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>nodes_xpos</span><span class=p>)</span> <span class=o>-</span> <span class=nb>min</span><span class=p>(</span><span class=n>nodes_xpos</span><span class=p>)</span>
    <span class=n>nodes_screen_heigth</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>nodes_ypos</span><span class=p>)</span> <span class=o>-</span> <span class=nb>min</span><span class=p>(</span><span class=n>nodes_ypos</span><span class=p>)</span>

    <span class=c1># get screen size (r,l,t,b) of all nodes in `group`</span>
    <span class=k>with</span> <span class=n>group</span><span class=p>:</span>
        <span class=n>group_xpos</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>()</span> <span class=k>if</span> <span class=n>n</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span> <span class=o>+</span> \
                     <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=o>+</span> <span class=n>n</span><span class=o>.</span><span class=n>screenWidth</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>()</span>
                      <span class=k>if</span> <span class=n>n</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>
        <span class=n>group_ypos</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>()</span> <span class=k>if</span> <span class=n>n</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span> <span class=o>+</span> \
                     <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=o>+</span> <span class=n>n</span><span class=o>.</span><span class=n>screenHeight</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>allNodes</span><span class=p>()</span>
                      <span class=k>if</span> <span class=n>n</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>

        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>group_xpos</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>group_xpos</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>group_ypos</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>group_ypos</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span>

        <span class=c1># calc output left</span>
        <span class=k>if</span> <span class=n>direction</span> <span class=ow>in</span> <span class=s2>&quot;left&quot;</span><span class=p>:</span>
            <span class=n>xpos</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>group_xpos</span><span class=p>)</span> <span class=o>-</span> <span class=nb>abs</span><span class=p>(</span><span class=n>nodes_screen_width</span><span class=p>)</span> <span class=o>-</span> <span class=nb>abs</span><span class=p>(</span><span class=n>offset</span><span class=p>)</span>
            <span class=n>ypos</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>group_ypos</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>xpos</span><span class=p>,</span> <span class=n>ypos</span>
        <span class=c1># calc output right</span>
        <span class=k>if</span> <span class=n>direction</span> <span class=ow>in</span> <span class=s2>&quot;right&quot;</span><span class=p>:</span>
            <span class=n>xpos</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>group_xpos</span><span class=p>)</span> <span class=o>+</span> <span class=nb>abs</span><span class=p>(</span><span class=n>offset</span><span class=p>)</span>
            <span class=n>ypos</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>group_ypos</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>xpos</span><span class=p>,</span> <span class=n>ypos</span>
        <span class=c1># calc output top</span>
        <span class=k>if</span> <span class=n>direction</span> <span class=ow>in</span> <span class=s2>&quot;top&quot;</span><span class=p>:</span>
            <span class=n>xpos</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>group_xpos</span><span class=p>)</span>
            <span class=n>ypos</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>group_ypos</span><span class=p>)</span> <span class=o>-</span> <span class=nb>abs</span><span class=p>(</span><span class=n>nodes_screen_heigth</span><span class=p>)</span> <span class=o>-</span> <span class=nb>abs</span><span class=p>(</span><span class=n>offset</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>xpos</span><span class=p>,</span> <span class=n>ypos</span>
        <span class=c1># calc output bottom</span>
        <span class=k>if</span> <span class=n>direction</span> <span class=ow>in</span> <span class=s2>&quot;bottom&quot;</span><span class=p>:</span>
            <span class=n>xpos</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>group_xpos</span><span class=p>)</span>
            <span class=n>ypos</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>group_ypos</span><span class=p>)</span> <span class=o>+</span> <span class=nb>abs</span><span class=p>(</span><span class=n>offset</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>xpos</span><span class=p>,</span> <span class=n>ypos</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_avalon_knob_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_avalon_knob_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s1>&#39;avalon:&#39;</span><span class=p>,</span> <span class=n>create</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>[DEPRECATED] Gets a data from nodes's avalon knob</p> <p>This function is still used but soon will be deprecated. Use <code>get_node_data</code> instead.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=obj>obj</span></code> </td> <td> <div class=doc-md-description> <p>Nuke node to search for data,</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code><span title=str>str</span> | <span title=list>list</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>filtering prefix</p> </div> </td> <td> <code>&#39;avalon:&#39;</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>data (dict)</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@deprecated</span><span class=p>(</span><span class=s2>&quot;ayon_nuke.api.lib.get_node_data&quot;</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_avalon_knob_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;avalon:&quot;</span><span class=p>,</span> <span class=n>create</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;[DEPRECATED]  Gets a data from nodes&#39;s avalon knob</span>

<span class=sd>    This function is still used but soon will be deprecated.</span>
<span class=sd>    Use `get_node_data` instead.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        node (obj): Nuke node to search for data,</span>
<span class=sd>        prefix (str | list[str]): filtering prefix</span>

<span class=sd>    Returns:</span>
<span class=sd>        data (dict)</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>data</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=n>NODE_TAB_NAME</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>():</span>
        <span class=k>return</span> <span class=n>data</span>

    <span class=c1># check if lists</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>prefix</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
        <span class=n>prefix</span> <span class=o>=</span> <span class=p>[</span><span class=n>prefix</span><span class=p>]</span>

    <span class=c1># loop prefix</span>
    <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>prefix</span><span class=p>:</span>
        <span class=c1># check if the node is avalon tracked</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=c1># check if data available on the node</span>
            <span class=n>_</span> <span class=o>=</span> <span class=n>node</span><span class=p>[</span><span class=n>DATA_GROUP_KEY</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
        <span class=k>except</span> <span class=ne>NameError</span><span class=p>:</span>
            <span class=c1># if it doesn&#39;t then create it</span>
            <span class=k>if</span> <span class=n>create</span><span class=p>:</span>
                <span class=n>node</span> <span class=o>=</span> <span class=n>set_avalon_knob_data</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
                <span class=k>return</span> <span class=n>get_avalon_knob_data</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
            <span class=k>return</span> <span class=p>{}</span>

        <span class=c1># get data from filtered knobs</span>
        <span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>k</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>p</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>):</span> <span class=n>node</span><span class=p>[</span><span class=n>k</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
                    <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>()</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
                    <span class=k>if</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>k</span><span class=p>})</span>

    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_current_context_template_data_and_environ class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_context_template_data_and_environ</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return current context template data and os environ.</p> <details class=output-contains open> <summary>Output contains</summary> <ul> <li>Regular template data from <code>get_template_data</code></li> <li>Anatomy Roots</li> <li>os.environ keys</li> </ul> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Any]: Template data to fill templates.</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2658</span>
<span class=normal>2659</span>
<span class=normal>2660</span>
<span class=normal>2661</span>
<span class=normal>2662</span>
<span class=normal>2663</span>
<span class=normal>2664</span>
<span class=normal>2665</span>
<span class=normal>2666</span>
<span class=normal>2667</span>
<span class=normal>2668</span>
<span class=normal>2669</span>
<span class=normal>2670</span>
<span class=normal>2671</span>
<span class=normal>2672</span>
<span class=normal>2673</span>
<span class=normal>2674</span>
<span class=normal>2675</span>
<span class=normal>2676</span>
<span class=normal>2677</span>
<span class=normal>2678</span>
<span class=normal>2679</span>
<span class=normal>2680</span>
<span class=normal>2681</span>
<span class=normal>2682</span>
<span class=normal>2683</span>
<span class=normal>2684</span>
<span class=normal>2685</span>
<span class=normal>2686</span>
<span class=normal>2687</span>
<span class=normal>2688</span>
<span class=normal>2689</span>
<span class=normal>2690</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_context_template_data_and_environ</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return current context template data and os environ.</span>

<span class=sd>    Output contains:</span>
<span class=sd>      - Regular template data from `get_template_data`</span>
<span class=sd>      - Anatomy Roots</span>
<span class=sd>      - os.environ keys</span>

<span class=sd>    Returns:</span>
<span class=sd>         dict[str, Any]: Template data to fill templates.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
    <span class=n>host_name</span> <span class=o>=</span> <span class=n>get_current_host_name</span><span class=p>()</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>)</span>
    <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_path</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>)</span>
    <span class=n>task_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_task_by_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>task_name</span>
    <span class=p>)</span>

    <span class=n>template_data</span> <span class=o>=</span> <span class=n>get_template_data</span><span class=p>(</span>
        <span class=n>project_entity</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>host_name</span>
    <span class=p>)</span>
    <span class=n>template_data</span><span class=p>[</span><span class=s2>&quot;root&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>roots</span>

    <span class=n>template_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>template_data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_dependent_nodes class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_dependent_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get all dependent nodes connected to the list of nodes.</p> <p>Looking for connections outside of the nodes in incoming argument.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of nuke.Node objects</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>connections_in</code></td> <td> </td> <td> <div class=doc-md-description> <p>dictionary of nodes and its dependencies</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>connections_out</code></td> <td> </td> <td> <div class=doc-md-description> <p>dictionary of nodes and its dependency</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2227</span>
<span class=normal>2228</span>
<span class=normal>2229</span>
<span class=normal>2230</span>
<span class=normal>2231</span>
<span class=normal>2232</span>
<span class=normal>2233</span>
<span class=normal>2234</span>
<span class=normal>2235</span>
<span class=normal>2236</span>
<span class=normal>2237</span>
<span class=normal>2238</span>
<span class=normal>2239</span>
<span class=normal>2240</span>
<span class=normal>2241</span>
<span class=normal>2242</span>
<span class=normal>2243</span>
<span class=normal>2244</span>
<span class=normal>2245</span>
<span class=normal>2246</span>
<span class=normal>2247</span>
<span class=normal>2248</span>
<span class=normal>2249</span>
<span class=normal>2250</span>
<span class=normal>2251</span>
<span class=normal>2252</span>
<span class=normal>2253</span>
<span class=normal>2254</span>
<span class=normal>2255</span>
<span class=normal>2256</span>
<span class=normal>2257</span>
<span class=normal>2258</span>
<span class=normal>2259</span>
<span class=normal>2260</span>
<span class=normal>2261</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_dependent_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get all dependent nodes connected to the list of nodes.</span>

<span class=sd>    Looking for connections outside of the nodes in incoming argument.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        nodes (list): list of nuke.Node objects</span>

<span class=sd>    Returns:</span>
<span class=sd>        connections_in: dictionary of nodes and its dependencies</span>
<span class=sd>        connections_out: dictionary of nodes and its dependency</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>connections_in</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
    <span class=n>connections_out</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
    <span class=n>node_names</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>name</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>
    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>:</span>
        <span class=n>inputs</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>dependencies</span><span class=p>()</span>
        <span class=n>outputs</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>dependent</span><span class=p>()</span>
        <span class=c1># collect all inputs outside</span>
        <span class=n>test_in</span> <span class=o>=</span> <span class=p>[(</span><span class=n>i</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>n</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>inputs</span><span class=p>)</span>
                   <span class=k>if</span> <span class=n>n</span><span class=o>.</span><span class=n>name</span><span class=p>()</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node_names</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>test_in</span><span class=p>:</span>
            <span class=n>connections_in</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
                <span class=n>node</span><span class=p>:</span> <span class=n>test_in</span>
            <span class=p>})</span>
        <span class=c1># collect all outputs outside</span>
        <span class=n>test_out</span> <span class=o>=</span> <span class=p>[</span><span class=n>i</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>outputs</span> <span class=k>if</span> <span class=n>i</span><span class=o>.</span><span class=n>name</span><span class=p>()</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node_names</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>test_out</span><span class=p>:</span>
            <span class=c1># only one dependent node is allowed</span>
            <span class=n>connections_out</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
                <span class=n>node</span><span class=p>:</span> <span class=n>test_out</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
            <span class=p>})</span>

    <span class=k>return</span> <span class=n>connections_in</span><span class=p>,</span> <span class=n>connections_out</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_extreme_positions class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_extreme_positions</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get the 4 numbers that represent the box of a group of nodes.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2853</span>
<span class=normal>2854</span>
<span class=normal>2855</span>
<span class=normal>2856</span>
<span class=normal>2857</span>
<span class=normal>2858</span>
<span class=normal>2859</span>
<span class=normal>2860</span>
<span class=normal>2861</span>
<span class=normal>2862</span>
<span class=normal>2863</span>
<span class=normal>2864</span>
<span class=normal>2865</span>
<span class=normal>2866</span>
<span class=normal>2867</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_extreme_positions</span><span class=p>(</span><span class=n>nodes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the 4 numbers that represent the box of a group of nodes.&quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>nodes</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;there is no nodes in the list&quot;</span><span class=p>)</span>

    <span class=n>nodes_xpos</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span> <span class=o>+</span> \
        <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span> <span class=o>+</span> <span class=n>n</span><span class=o>.</span><span class=n>screenWidth</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>

    <span class=n>nodes_ypos</span> <span class=o>=</span> <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span> <span class=o>+</span> \
        <span class=p>[</span><span class=n>n</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span> <span class=o>+</span> <span class=n>n</span><span class=o>.</span><span class=n>screenHeight</span><span class=p>()</span> <span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>]</span>

    <span class=n>min_x</span><span class=p>,</span> <span class=n>min_y</span> <span class=o>=</span> <span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>nodes_xpos</span><span class=p>),</span> <span class=nb>min</span><span class=p>(</span><span class=n>nodes_ypos</span><span class=p>))</span>
    <span class=n>max_x</span><span class=p>,</span> <span class=n>max_y</span> <span class=o>=</span> <span class=p>(</span><span class=nb>max</span><span class=p>(</span><span class=n>nodes_xpos</span><span class=p>),</span> <span class=nb>max</span><span class=p>(</span><span class=n>nodes_ypos</span><span class=p>))</span>
    <span class=k>return</span> <span class=n>min_x</span><span class=p>,</span> <span class=n>min_y</span><span class=p>,</span> <span class=n>max_x</span><span class=p>,</span> <span class=n>max_y</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_filenames_without_hash class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_filenames_without_hash</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=n>frame_start</span><span class=p>,</span> <span class=n>frame_end</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get filenames without frame hash i.e. "renderCompositingMain.baking.0001.exr"</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>filename</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>filename with frame hash</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>frame_start</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>start of the frame</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>frame_end</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>end of the frame</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> </td> <td> <div class=doc-md-description> <p>filename per frame of the sequence</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2982</span>
<span class=normal>2983</span>
<span class=normal>2984</span>
<span class=normal>2985</span>
<span class=normal>2986</span>
<span class=normal>2987</span>
<span class=normal>2988</span>
<span class=normal>2989</span>
<span class=normal>2990</span>
<span class=normal>2991</span>
<span class=normal>2992</span>
<span class=normal>2993</span>
<span class=normal>2994</span>
<span class=normal>2995</span>
<span class=normal>2996</span>
<span class=normal>2997</span>
<span class=normal>2998</span>
<span class=normal>2999</span>
<span class=normal>3000</span>
<span class=normal>3001</span>
<span class=normal>3002</span>
<span class=normal>3003</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_filenames_without_hash</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=n>frame_start</span><span class=p>,</span> <span class=n>frame_end</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get filenames without frame hash</span>
<span class=sd>        i.e. &quot;renderCompositingMain.baking.0001.exr&quot;</span>

<span class=sd>    Args:</span>
<span class=sd>        filename (str): filename with frame hash</span>
<span class=sd>        frame_start (str): start of the frame</span>
<span class=sd>        frame_end (str): end of the frame</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: filename per frame of the sequence</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>filenames</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>frame_start</span><span class=p>),</span> <span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>frame_end</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)):</span>
        <span class=k>if</span> <span class=s2>&quot;#&quot;</span> <span class=ow>in</span> <span class=n>filename</span><span class=p>:</span>
            <span class=c1># use regex to convert #### to {:0&gt;4}</span>
            <span class=k>def</span><span class=w> </span><span class=nf>replace</span><span class=p>(</span><span class=n>match</span><span class=p>):</span>
                <span class=k>return</span> <span class=s2>&quot;{{:0&gt;</span><span class=si>{}</span><span class=s2>}}&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>()))</span>
            <span class=n>filename_without_hashes</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s2>&quot;#+&quot;</span><span class=p>,</span> <span class=n>replace</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
            <span class=n>new_filename</span> <span class=o>=</span> <span class=n>filename_without_hashes</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>frame</span><span class=p>)</span>
            <span class=n>filenames</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_filename</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>filenames</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_group_io_nodes class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_group_io_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get the input and the output of a group of nodes.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2821</span>
<span class=normal>2822</span>
<span class=normal>2823</span>
<span class=normal>2824</span>
<span class=normal>2825</span>
<span class=normal>2826</span>
<span class=normal>2827</span>
<span class=normal>2828</span>
<span class=normal>2829</span>
<span class=normal>2830</span>
<span class=normal>2831</span>
<span class=normal>2832</span>
<span class=normal>2833</span>
<span class=normal>2834</span>
<span class=normal>2835</span>
<span class=normal>2836</span>
<span class=normal>2837</span>
<span class=normal>2838</span>
<span class=normal>2839</span>
<span class=normal>2840</span>
<span class=normal>2841</span>
<span class=normal>2842</span>
<span class=normal>2843</span>
<span class=normal>2844</span>
<span class=normal>2845</span>
<span class=normal>2846</span>
<span class=normal>2847</span>
<span class=normal>2848</span>
<span class=normal>2849</span>
<span class=normal>2850</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_group_io_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the input and the output of a group of nodes.&quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>nodes</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;there is no nodes in the list&quot;</span><span class=p>)</span>

    <span class=n>input_node</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>output_node</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>input_node</span> <span class=o>=</span> <span class=n>output_node</span> <span class=o>=</span> <span class=n>nodes</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>:</span>
            <span class=k>if</span> <span class=s2>&quot;Input&quot;</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>():</span>
                <span class=n>input_node</span> <span class=o>=</span> <span class=n>node</span>

            <span class=k>if</span> <span class=s2>&quot;Output&quot;</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>():</span>
                <span class=n>output_node</span> <span class=o>=</span> <span class=n>node</span>

            <span class=k>if</span> <span class=n>input_node</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>output_node</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>break</span>

        <span class=k>if</span> <span class=n>input_node</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;No Input found&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>output_node</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;No Output found&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>input_node</span><span class=p>,</span> <span class=n>output_node</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_imageio_input_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_imageio_input_colorspace</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get input file colorspace based on regex in settings.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_imageio_input_colorspace</span><span class=p>(</span><span class=n>filename</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Get input file colorspace based on regex in settings.</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=n>imageio_regex_inputs</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>get_nuke_imageio_settings</span><span class=p>()[</span><span class=s2>&quot;regex_inputs&quot;</span><span class=p>][</span><span class=s2>&quot;inputs&quot;</span><span class=p>])</span>

    <span class=n>preset_clrsp</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>for</span> <span class=n>regexInput</span> <span class=ow>in</span> <span class=n>imageio_regex_inputs</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>bool</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>regexInput</span><span class=p>[</span><span class=s2>&quot;regex&quot;</span><span class=p>],</span> <span class=n>filename</span><span class=p>)):</span>
            <span class=n>preset_clrsp</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>regexInput</span><span class=p>[</span><span class=s2>&quot;colorspace&quot;</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>preset_clrsp</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_imageio_node_override_setting class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_imageio_node_override_setting</span><span class=p>(</span><span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>knobs_settings</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get imageio node overrides from settings</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_imageio_node_override_setting</span><span class=p>(</span>
    <span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>knobs_settings</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Get imageio node overrides from settings</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=c1># find matching override node</span>
    <span class=n>override_imageio_node</span> <span class=o>=</span> <span class=n>get_matching_override_node</span><span class=p>(</span>
        <span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span>
    <span class=p>)</span>

    <span class=c1># add overrides to imageio_node</span>
    <span class=k>if</span> <span class=n>override_imageio_node</span><span class=p>:</span>
        <span class=c1># get all knob names in imageio_node</span>
        <span class=n>knob_names</span> <span class=o>=</span> <span class=p>[</span><span class=n>k</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>knobs_settings</span><span class=p>]</span>

        <span class=k>for</span> <span class=n>oknob</span> <span class=ow>in</span> <span class=n>override_imageio_node</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]:</span>
            <span class=n>oknob_name</span> <span class=o>=</span> <span class=n>oknob</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>oknob_type</span> <span class=o>=</span> <span class=n>oknob</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span>
            <span class=n>oknob_value</span> <span class=o>=</span> <span class=n>oknob</span><span class=p>[</span><span class=n>oknob_type</span><span class=p>]</span>
            <span class=k>for</span> <span class=n>knob</span> <span class=ow>in</span> <span class=n>knobs_settings</span><span class=p>:</span>
                <span class=c1># add missing knobs into imageio_node</span>
                <span class=k>if</span> <span class=n>oknob_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>knob_names</span><span class=p>:</span>
                    <span class=n>knobs_settings</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>oknob</span><span class=p>)</span>
                    <span class=n>knob_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>oknob_name</span><span class=p>)</span>
                    <span class=k>continue</span>

                <span class=k>if</span> <span class=n>oknob_name</span> <span class=o>!=</span> <span class=n>knob</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]:</span>
                    <span class=k>continue</span>

                <span class=n>knob_type</span> <span class=o>=</span> <span class=n>knob</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span>
                <span class=c1># override matching knob name</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>oknob_value</span><span class=p>:</span>
                    <span class=c1># remove original knob if no value found in oknob</span>
                    <span class=n>knobs_settings</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=c1># override knob value with oknob&#39;s</span>
                    <span class=n>knob</span><span class=p>[</span><span class=n>knob_type</span><span class=p>]</span> <span class=o>=</span> <span class=n>oknob_value</span>

    <span class=k>return</span> <span class=n>knobs_settings</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_imageio_node_setting class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_imageio_node_setting</span><span class=p>(</span><span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get preset data for dataflow (fileType, compression, bitDepth)</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_imageio_node_setting</span><span class=p>(</span><span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Get preset data for dataflow (fileType, compression, bitDepth)</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=n>imageio_nodes</span> <span class=o>=</span> <span class=n>get_nuke_imageio_settings</span><span class=p>()[</span><span class=s2>&quot;nodes&quot;</span><span class=p>]</span>
    <span class=n>required_nodes</span> <span class=o>=</span> <span class=n>imageio_nodes</span><span class=p>[</span><span class=s2>&quot;required_nodes&quot;</span><span class=p>]</span>

    <span class=n>imageio_node</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>required_nodes</span><span class=p>:</span>
        <span class=n>node_class_preset</span> <span class=o>=</span> <span class=n>node</span><span class=p>[</span><span class=s2>&quot;nuke_node_class&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>node</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;custom_class&quot;</span><span class=p>):</span>
            <span class=n>node_class_preset</span> <span class=o>=</span> <span class=n>node</span><span class=p>[</span><span class=s2>&quot;custom_class&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>node_class</span> <span class=ow>in</span> <span class=n>node_class_preset</span>
            <span class=ow>and</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>node</span><span class=p>[</span><span class=s2>&quot;plugins&quot;</span><span class=p>]</span>
        <span class=p>):</span>
            <span class=n>imageio_node</span> <span class=o>=</span> <span class=n>node</span>
            <span class=k>break</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>imageio_node</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=c1># Check if a node override exists for this configuration</span>
    <span class=n>override_imageio_node</span> <span class=o>=</span> <span class=n>get_matching_override_node</span><span class=p>(</span>
        <span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span>
    <span class=p>)</span>

    <span class=c1># If node override exists,</span>
    <span class=c1># use only override knobs</span>
    <span class=c1># (don&#39;t merge with original master knobs)</span>
    <span class=k>if</span> <span class=n>override_imageio_node</span><span class=p>:</span>
        <span class=n>imageio_node</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>override_imageio_node</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;knobs&quot;</span><span class=p>,</span> <span class=p>[])</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=c1># Otherwise apply partial overrides to original master knobs</span>
        <span class=n>imageio_node</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_imageio_node_override_setting</span><span class=p>(</span>
            <span class=n>node_class</span><span class=p>,</span>
            <span class=n>plugin_name</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>imageio_node</span><span class=p>[</span><span class=s2>&quot;knobs&quot;</span><span class=p>]</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>imageio_node</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_main_window class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_main_window</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Acquire Nuke's main window</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_main_window</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Acquire Nuke&#39;s main window&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>Context</span><span class=o>.</span><span class=n>main_window</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>

        <span class=n>top_widgets</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>topLevelWidgets</span><span class=p>()</span>
        <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;Foundry::UI::DockMainWindow&quot;</span>
        <span class=k>for</span> <span class=n>widget</span> <span class=ow>in</span> <span class=n>top_widgets</span><span class=p>:</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>widget</span><span class=o>.</span><span class=n>inherits</span><span class=p>(</span><span class=s2>&quot;QMainWindow&quot;</span><span class=p>)</span>
                <span class=ow>and</span> <span class=n>widget</span><span class=o>.</span><span class=n>metaObject</span><span class=p>()</span><span class=o>.</span><span class=n>className</span><span class=p>()</span> <span class=o>==</span> <span class=n>name</span>
            <span class=p>):</span>
                <span class=n>Context</span><span class=o>.</span><span class=n>main_window</span> <span class=o>=</span> <span class=n>widget</span>
                <span class=k>break</span>
    <span class=k>return</span> <span class=n>Context</span><span class=o>.</span><span class=n>main_window</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_matching_override_node class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_matching_override_node</span><span class=p>(</span><span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find matching override node for the given configuration.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node_class</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Nuke node class name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Plugin name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product name</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict or None: Matching override node or None if not found</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_matching_override_node</span><span class=p>(</span><span class=n>node_class</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>product_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find matching override node for the given configuration.</span>

<span class=sd>    Args:</span>
<span class=sd>        node_class (str): Nuke node class name</span>
<span class=sd>        plugin_name (str): Plugin name</span>
<span class=sd>        product_name (str): Product name</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict or None: Matching override node or None if not found</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>imageio_nodes</span> <span class=o>=</span> <span class=n>get_nuke_imageio_settings</span><span class=p>()[</span><span class=s2>&quot;nodes&quot;</span><span class=p>]</span>
    <span class=n>override_nodes</span> <span class=o>=</span> <span class=n>imageio_nodes</span><span class=p>[</span><span class=s2>&quot;override_nodes&quot;</span><span class=p>]</span>

    <span class=k>for</span> <span class=n>override_node</span> <span class=ow>in</span> <span class=n>override_nodes</span><span class=p>:</span>
        <span class=n>node_class_preset</span> <span class=o>=</span> <span class=n>override_node</span><span class=p>[</span><span class=s2>&quot;nuke_node_class&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=n>override_node</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;custom_class&quot;</span><span class=p>):</span>
            <span class=n>node_class_preset</span> <span class=o>=</span> <span class=n>override_node</span><span class=p>[</span><span class=s2>&quot;custom_class&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=n>node_class</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node_class_preset</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>plugin_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>override_node</span><span class=p>[</span><span class=s2>&quot;plugins&quot;</span><span class=p>]:</span>
            <span class=k>continue</span>

        <span class=n>product_names</span> <span class=o>=</span> <span class=n>override_node</span><span class=p>[</span><span class=s2>&quot;product_names&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=n>product_names</span>
            <span class=ow>and</span> <span class=ow>not</span> <span class=nb>any</span><span class=p>(</span>
                <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>s</span><span class=o>.</span><span class=n>lower</span><span class=p>(),</span> <span class=n>product_name</span><span class=o>.</span><span class=n>lower</span><span class=p>())</span>
                <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>product_names</span>
            <span class=p>)</span>
        <span class=p>):</span>
            <span class=k>continue</span>

        <span class=k>return</span> <span class=n>override_node</span>

    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_names_from_nodes class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_names_from_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get list of nodes names.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=List>List</span>[<span title=nuke.Node>Node</span>]</code> </td> <td> <div class=doc-md-description> <p>List of nodes to convert into names.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[str]: Name of passed nodes.</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2887</span>
<span class=normal>2888</span>
<span class=normal>2889</span>
<span class=normal>2890</span>
<span class=normal>2891</span>
<span class=normal>2892</span>
<span class=normal>2893</span>
<span class=normal>2894</span>
<span class=normal>2895</span>
<span class=normal>2896</span>
<span class=normal>2897</span>
<span class=normal>2898</span>
<span class=normal>2899</span>
<span class=normal>2900</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_names_from_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get list of nodes names.</span>

<span class=sd>    Args:</span>
<span class=sd>        nodes(List[nuke.Node]): List of nodes to convert into names.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[str]: Name of passed nodes.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>[</span>
        <span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span>
    <span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_node_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Read data from node.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>node object</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>knobname</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>knob name</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>data stored in knob</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Read data from node.</span>

<span class=sd>    Args:</span>
<span class=sd>        node (nuke.Node): node object</span>
<span class=sd>        knobname (str): knob name</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: data stored in knob</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>knobname</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>():</span>
        <span class=k>return</span>

    <span class=n>rawdata</span> <span class=o>=</span> <span class=n>node</span><span class=p>[</span><span class=n>knobname</span><span class=p>]</span><span class=o>.</span><span class=n>getValue</span><span class=p>()</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=nb>isinstance</span><span class=p>(</span><span class=n>rawdata</span><span class=p>,</span> <span class=nb>str</span><span class=p>)</span>
        <span class=ow>and</span> <span class=n>rawdata</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=n>JSON_PREFIX</span><span class=p>)</span>
    <span class=p>):</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>rawdata</span><span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=n>JSON_PREFIX</span><span class=p>):])</span>
        <span class=k>except</span> <span class=n>json</span><span class=o>.</span><span class=n>JSONDecodeError</span><span class=p>:</span>
            <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_node_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_node_path</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>padding</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get filename for the Nuke write with padded number as '#'</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The path to render to.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>tuple</code></td> <td> </td> <td> <div class=doc-md-description> <p>head, padding, tail (extension)</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Examples:</span></p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>get_frame_path</span><span class=p>(</span><span class=s2>&quot;test.exr&quot;</span><span class=p>)</span>
<span class=go>(&#39;test&#39;, 4, &#39;.exr&#39;)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>get_frame_path</span><span class=p>(</span><span class=s2>&quot;filename.#####.tif&quot;</span><span class=p>)</span>
<span class=go>(&#39;filename.&#39;, 5, &#39;.tif&#39;)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>get_frame_path</span><span class=p>(</span><span class=s2>&quot;foobar##.tif&quot;</span><span class=p>)</span>
<span class=go>(&#39;foobar&#39;, 2, &#39;.tif&#39;)</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>get_frame_path</span><span class=p>(</span><span class=s2>&quot;foobar_</span><span class=si>%08d</span><span class=s2>.tif&quot;</span><span class=p>)</span>
<span class=go>(&#39;foobar_&#39;, 8, &#39;.tif&#39;)</span>
</code></pre></div> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_node_path</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>padding</span><span class=o>=</span><span class=mi>4</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get filename for the Nuke write with padded number as &#39;#&#39;</span>

<span class=sd>    Arguments:</span>
<span class=sd>        path (str): The path to render to.</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple: head, padding, tail (extension)</span>

<span class=sd>    Examples:</span>
<span class=sd>        &gt;&gt;&gt; get_frame_path(&quot;test.exr&quot;)</span>
<span class=sd>        (&#39;test&#39;, 4, &#39;.exr&#39;)</span>

<span class=sd>        &gt;&gt;&gt; get_frame_path(&quot;filename.#####.tif&quot;)</span>
<span class=sd>        (&#39;filename.&#39;, 5, &#39;.tif&#39;)</span>

<span class=sd>        &gt;&gt;&gt; get_frame_path(&quot;foobar##.tif&quot;)</span>
<span class=sd>        (&#39;foobar&#39;, 2, &#39;.tif&#39;)</span>

<span class=sd>        &gt;&gt;&gt; get_frame_path(&quot;foobar_%08d.tif&quot;)</span>
<span class=sd>        (&#39;foobar_&#39;, 8, &#39;.tif&#39;)</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>filename</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=c1># Find a final number group</span>
    <span class=k>if</span> <span class=s1>&#39;%&#39;</span> <span class=ow>in</span> <span class=n>filename</span><span class=p>:</span>
        <span class=n>match</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;.*?(%[0-9]+d)$&#39;</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>match</span><span class=p>:</span>
            <span class=n>padding</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;%&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>))</span>
            <span class=c1># remove number from end since fusion</span>
            <span class=c1># will swap it with the frame number</span>
            <span class=n>filename</span> <span class=o>=</span> <span class=n>filename</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
    <span class=k>elif</span> <span class=s1>&#39;#&#39;</span> <span class=ow>in</span> <span class=n>filename</span><span class=p>:</span>
        <span class=n>match</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=s1>&#39;.*?(#+)$&#39;</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>match</span><span class=p>:</span>
            <span class=n>padding</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
            <span class=c1># remove number from end since fusion</span>
            <span class=c1># will swap it with the frame number</span>
            <span class=n>filename</span> <span class=o>=</span> <span class=n>filename</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>filename</span><span class=p>,</span> <span class=n>padding</span><span class=p>,</span> <span class=n>ext</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_nodes_by_names class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_nodes_by_names</span><span class=p>(</span><span class=n>names</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get list of nuke nodes based on their names.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>names</code> </td> <td> <code><span title=List>List</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>List of node names to be found.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[nuke.Node]: List of nodes found by name.</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2903</span>
<span class=normal>2904</span>
<span class=normal>2905</span>
<span class=normal>2906</span>
<span class=normal>2907</span>
<span class=normal>2908</span>
<span class=normal>2909</span>
<span class=normal>2910</span>
<span class=normal>2911</span>
<span class=normal>2912</span>
<span class=normal>2913</span>
<span class=normal>2914</span>
<span class=normal>2915</span>
<span class=normal>2916</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_nodes_by_names</span><span class=p>(</span><span class=n>names</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get list of nuke nodes based on their names.</span>

<span class=sd>    Args:</span>
<span class=sd>        names (List[str]): List of node names to be found.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[nuke.Node]: List of nodes found by name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>[</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>toNode</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>names</span>
    <span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_version_from_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_version_from_path</span><span class=p>(</span><span class=n>file</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find version number in file path string.</p> <p>Looks for formats: - <code>_v0001</code> - <code>.v001</code> - <code>/v001/</code> - difference from ayon-core.path_tools.get_version_from_path</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>file</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>file path</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>version number in string ('001')</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span>
<span class=normal>949</span>
<span class=normal>950</span>
<span class=normal>951</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_version_from_path</span><span class=p>(</span><span class=n>file</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find version number in file path string.</span>

<span class=sd>    Looks for formats:</span>
<span class=sd>    - `_v0001`</span>
<span class=sd>    - `.v001`</span>
<span class=sd>    - `/v001/` - difference from ayon-core.path_tools.get_version_from_path</span>

<span class=sd>    Args:</span>
<span class=sd>        file (str): file path</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: version number in string (&#39;001&#39;)</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>pattern</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;[\._/]v([0-9]+)&quot;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>IGNORECASE</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>pattern</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>file</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
    <span class=k>except</span> <span class=ne>IndexError</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
            <span class=s2>&quot;templates:get_version_from_workfile:&quot;</span>
            <span class=s2>&quot;`</span><span class=si>{}</span><span class=s2>` missing version string.&quot;</span>
            <span class=s2>&quot;Example `v004`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_viewer_config_from_string class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_viewer_config_from_string</span><span class=p>(</span><span class=n>input_string</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convert string to display and viewer string</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>input_string</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>string with viewer</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=IndexError>IndexError</span></code> </td> <td> <div class=doc-md-description> <p>if more then one slash in input string</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><span title=IndexError>IndexError</span></code> </td> <td> <div class=doc-md-description> <p>if missing closing bracket</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple[str]: display, viewer</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2919</span>
<span class=normal>2920</span>
<span class=normal>2921</span>
<span class=normal>2922</span>
<span class=normal>2923</span>
<span class=normal>2924</span>
<span class=normal>2925</span>
<span class=normal>2926</span>
<span class=normal>2927</span>
<span class=normal>2928</span>
<span class=normal>2929</span>
<span class=normal>2930</span>
<span class=normal>2931</span>
<span class=normal>2932</span>
<span class=normal>2933</span>
<span class=normal>2934</span>
<span class=normal>2935</span>
<span class=normal>2936</span>
<span class=normal>2937</span>
<span class=normal>2938</span>
<span class=normal>2939</span>
<span class=normal>2940</span>
<span class=normal>2941</span>
<span class=normal>2942</span>
<span class=normal>2943</span>
<span class=normal>2944</span>
<span class=normal>2945</span>
<span class=normal>2946</span>
<span class=normal>2947</span>
<span class=normal>2948</span>
<span class=normal>2949</span>
<span class=normal>2950</span>
<span class=normal>2951</span>
<span class=normal>2952</span>
<span class=normal>2953</span>
<span class=normal>2954</span>
<span class=normal>2955</span>
<span class=normal>2956</span>
<span class=normal>2957</span>
<span class=normal>2958</span>
<span class=normal>2959</span>
<span class=normal>2960</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_viewer_config_from_string</span><span class=p>(</span><span class=n>input_string</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert string to display and viewer string</span>

<span class=sd>    Args:</span>
<span class=sd>        input_string (str): string with viewer</span>

<span class=sd>    Raises:</span>
<span class=sd>        IndexError: if more then one slash in input string</span>
<span class=sd>        IndexError: if missing closing bracket</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple[str]: display, viewer</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>display</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>viewer</span> <span class=o>=</span> <span class=n>input_string</span>
    <span class=c1># check if () or / or \ in name</span>
    <span class=k>if</span> <span class=s2>&quot;/&quot;</span> <span class=ow>in</span> <span class=n>viewer</span><span class=p>:</span>
        <span class=n>split</span> <span class=o>=</span> <span class=n>viewer</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)</span>

        <span class=c1># rise if more then one column</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>split</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>2</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>IndexError</span><span class=p>((</span>
                <span class=s2>&quot;Viewer Input string is not correct. &quot;</span>
                <span class=s2>&quot;more then two `/` slashes! </span><span class=si>{}</span><span class=s2>&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>input_string</span><span class=p>))</span>

        <span class=n>viewer</span> <span class=o>=</span> <span class=n>split</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>display</span> <span class=o>=</span> <span class=n>split</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
    <span class=k>elif</span> <span class=s2>&quot;(&quot;</span> <span class=ow>in</span> <span class=n>viewer</span><span class=p>:</span>
        <span class=n>pattern</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&quot;([\w\d\s\.\-]+).*[(](.*)[)]&quot;</span>
        <span class=n>result_</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>viewer</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>result_</span> <span class=o>=</span> <span class=n>result_</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>
            <span class=n>display</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>result_</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span>
            <span class=n>viewer</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>result_</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span>
        <span class=k>except</span> <span class=ne>IndexError</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>IndexError</span><span class=p>((</span>
                <span class=s2>&quot;Viewer Input string is not correct. &quot;</span>
                <span class=s2>&quot;Missing bracket! </span><span class=si>{}</span><span class=s2>&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>input_string</span><span class=p>))</span>

    <span class=k>return</span> <span class=p>(</span><span class=n>display</span><span class=p>,</span> <span class=n>viewer</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_work_default_directory class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_work_default_directory</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Helping function for formatting of anatomy paths</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>dictionary with attributes used for formatting</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=return open> <summary>Return</summary> <p>path (str)</p> </details> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_work_default_directory</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Helping function for formatting of anatomy paths</span>

<span class=sd>    Arguments:</span>
<span class=sd>        data (dict): dictionary with attributes used for formatting</span>

<span class=sd>    Return:</span>
<span class=sd>        path (str)</span>
<span class=sd>    &#39;&#39;&#39;</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=n>frame_padding</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>templates_obj</span><span class=o>.</span><span class=n>frame_padding</span>

    <span class=n>version</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;version&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>file</span> <span class=o>=</span> <span class=n>script_name</span><span class=p>()</span>
        <span class=n>data</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>

    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;task&quot;</span><span class=p>]</span>
    <span class=n>host_name</span> <span class=o>=</span> <span class=n>get_current_host_name</span><span class=p>()</span>

    <span class=n>context_data</span> <span class=o>=</span> <span class=n>get_template_data_with_names</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>host_name</span>
    <span class=p>)</span>
    <span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>context_data</span><span class=p>)</span>
    <span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
        <span class=s2>&quot;subset&quot;</span><span class=p>:</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>],</span>
        <span class=s2>&quot;family&quot;</span><span class=p>:</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>],</span>
        <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=p>{</span>
            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>],</span>
            <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>],</span>
        <span class=p>},</span>
        <span class=s2>&quot;frame&quot;</span><span class=p>:</span> <span class=s2>&quot;#&quot;</span> <span class=o>*</span> <span class=n>frame_padding</span><span class=p>,</span>
    <span class=p>})</span>

    <span class=n>work_default_dir_template</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>get_template_item</span><span class=p>(</span><span class=s2>&quot;work&quot;</span><span class=p>,</span> <span class=s2>&quot;default&quot;</span><span class=p>,</span> <span class=s2>&quot;directory&quot;</span><span class=p>)</span>
    <span class=n>normalized_dir</span> <span class=o>=</span> <span class=n>work_default_dir_template</span><span class=o>.</span><span class=n>format_strict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>.</span><span class=n>normalized</span><span class=p>()</span>
    <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=n>normalized_dir</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.get_write_node_template_attr class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_write_node_template_attr</span><span class=p>(</span><span class=n>node</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Gets all defined data from presets</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2201</span>
<span class=normal>2202</span>
<span class=normal>2203</span>
<span class=normal>2204</span>
<span class=normal>2205</span>
<span class=normal>2206</span>
<span class=normal>2207</span>
<span class=normal>2208</span>
<span class=normal>2209</span>
<span class=normal>2210</span>
<span class=normal>2211</span>
<span class=normal>2212</span>
<span class=normal>2213</span>
<span class=normal>2214</span>
<span class=normal>2215</span>
<span class=normal>2216</span>
<span class=normal>2217</span>
<span class=normal>2218</span>
<span class=normal>2219</span>
<span class=normal>2220</span>
<span class=normal>2221</span>
<span class=normal>2222</span>
<span class=normal>2223</span>
<span class=normal>2224</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_write_node_template_attr</span><span class=p>(</span><span class=n>node</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Gets all defined data from presets</span>

<span class=sd>    &#39;&#39;&#39;</span>

    <span class=c1># TODO: add identifiers to settings and rename settings key</span>
    <span class=n>plugin_names_mapping</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;create_write_image&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWriteImage&quot;</span><span class=p>,</span>
        <span class=s2>&quot;create_write_prerender&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWritePrerender&quot;</span><span class=p>,</span>
        <span class=s2>&quot;create_write_render&quot;</span><span class=p>:</span> <span class=s2>&quot;CreateWriteRender&quot;</span>
    <span class=p>}</span>
    <span class=c1># get AYON data from node</span>
    <span class=n>node_data</span> <span class=o>=</span> <span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>INSTANCE_DATA_KNOB</span><span class=p>)</span>
    <span class=n>identifier</span> <span class=o>=</span> <span class=n>node_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span>

    <span class=c1># return template data</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>node_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>node_data</span><span class=p>[</span><span class=s2>&quot;subset&quot;</span><span class=p>]</span>
    <span class=k>return</span> <span class=n>get_imageio_node_setting</span><span class=p>(</span>
        <span class=n>node_class</span><span class=o>=</span><span class=s2>&quot;Write&quot;</span><span class=p>,</span>
        <span class=n>plugin_name</span><span class=o>=</span><span class=n>plugin_names_mapping</span><span class=p>[</span><span class=n>identifier</span><span class=p>],</span>
        <span class=n>product_name</span><span class=o>=</span><span class=n>product_name</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.imprint class="doc doc-heading"> <code class="highlight language-python"><span class=n>imprint</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>tab</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Store attributes with value on node</p> <p>Parse user data into Node knobs. Use <code>collections.OrderedDict</code> to ensure knob order.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>node object from Nuke</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>collection of attributes and their value</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>None</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Examples:</span></p> <pre><code>import nuke
from ayon_nuke.api import lib

node = nuke.createNode(&quot;NoOp&quot;)
data = {
    # Regular type of attributes
    &quot;myList&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;],
    &quot;myBool&quot;: True,
    &quot;myFloat&quot;: 0.1,
    &quot;myInt&quot;: 5,

    # Creating non-default imprint type of knob
    &quot;MyFilePath&quot;: lib.Knobby(&quot;File_Knob&quot;, &quot;/file/path&quot;),
    &quot;divider&quot;: lib.Knobby(&quot;Text_Knob&quot;, &quot;&quot;),

    # Manual nice knob naming
    (&quot;my_knob&quot;, &quot;Nice Knob Name&quot;): &quot;some text&quot;,

    # dict type will be created as knob group
    &quot;KnobGroup&quot;: {
        &quot;knob1&quot;: 5,
        &quot;knob2&quot;: &quot;hello&quot;,
        &quot;knob3&quot;: [&quot;a&quot;, &quot;b&quot;],
    },

    # Nested dict will be created as tab group
    &quot;TabGroup&quot;: {
        &quot;tab1&quot;: {&quot;count&quot;: 5},
        &quot;tab2&quot;: {&quot;isGood&quot;: True},
        &quot;tab3&quot;: {&quot;direction&quot;: [&quot;Left&quot;, &quot;Right&quot;]},
    },
}
lib.imprint(node, data, tab=&quot;Demo&quot;)

</code></pre> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>imprint</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>tab</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store attributes with value on node</span>

<span class=sd>    Parse user data into Node knobs.</span>
<span class=sd>    Use `collections.OrderedDict` to ensure knob order.</span>

<span class=sd>    Args:</span>
<span class=sd>        node(nuke.Node): node object from Nuke</span>
<span class=sd>        data(dict): collection of attributes and their value</span>

<span class=sd>    Returns:</span>
<span class=sd>        None</span>

<span class=sd>    Examples:</span>
<span class=sd>        ```</span>
<span class=sd>        import nuke</span>
<span class=sd>        from ayon_nuke.api import lib</span>

<span class=sd>        node = nuke.createNode(&quot;NoOp&quot;)</span>
<span class=sd>        data = {</span>
<span class=sd>            # Regular type of attributes</span>
<span class=sd>            &quot;myList&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;],</span>
<span class=sd>            &quot;myBool&quot;: True,</span>
<span class=sd>            &quot;myFloat&quot;: 0.1,</span>
<span class=sd>            &quot;myInt&quot;: 5,</span>

<span class=sd>            # Creating non-default imprint type of knob</span>
<span class=sd>            &quot;MyFilePath&quot;: lib.Knobby(&quot;File_Knob&quot;, &quot;/file/path&quot;),</span>
<span class=sd>            &quot;divider&quot;: lib.Knobby(&quot;Text_Knob&quot;, &quot;&quot;),</span>

<span class=sd>            # Manual nice knob naming</span>
<span class=sd>            (&quot;my_knob&quot;, &quot;Nice Knob Name&quot;): &quot;some text&quot;,</span>

<span class=sd>            # dict type will be created as knob group</span>
<span class=sd>            &quot;KnobGroup&quot;: {</span>
<span class=sd>                &quot;knob1&quot;: 5,</span>
<span class=sd>                &quot;knob2&quot;: &quot;hello&quot;,</span>
<span class=sd>                &quot;knob3&quot;: [&quot;a&quot;, &quot;b&quot;],</span>
<span class=sd>            },</span>

<span class=sd>            # Nested dict will be created as tab group</span>
<span class=sd>            &quot;TabGroup&quot;: {</span>
<span class=sd>                &quot;tab1&quot;: {&quot;count&quot;: 5},</span>
<span class=sd>                &quot;tab2&quot;: {&quot;isGood&quot;: True},</span>
<span class=sd>                &quot;tab3&quot;: {&quot;direction&quot;: [&quot;Left&quot;, &quot;Right&quot;]},</span>
<span class=sd>            },</span>
<span class=sd>        }</span>
<span class=sd>        lib.imprint(node, data, tab=&quot;Demo&quot;)</span>

<span class=sd>        ```</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>for</span> <span class=n>knob</span> <span class=ow>in</span> <span class=n>create_knobs</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>tab</span><span class=p>):</span>
        <span class=c1># If knob name exists we set the value. Technically there could be</span>
        <span class=c1># multiple knobs with the same name, but the intent is not to have</span>
        <span class=c1># duplicated knobs so we do not account for that.</span>
        <span class=k>if</span> <span class=n>knob</span><span class=o>.</span><span class=n>name</span><span class=p>()</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>()</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=n>node</span><span class=p>[</span><span class=n>knob</span><span class=o>.</span><span class=n>name</span><span class=p>()]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knob</span><span class=o>.</span><span class=n>value</span><span class=p>())</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>node</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.launch_workfiles_app class="doc doc-heading"> <code class="highlight language-python"><span class=n>launch_workfiles_app</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Show workfiles tool on nuke launch.</p> <p>Trigger to show workfiles tool on application launch. Can be executed only once all other calls are ignored.</p> <p>Workfiles tool show is deferred after application initialization using QTimer.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2449</span>
<span class=normal>2450</span>
<span class=normal>2451</span>
<span class=normal>2452</span>
<span class=normal>2453</span>
<span class=normal>2454</span>
<span class=normal>2455</span>
<span class=normal>2456</span>
<span class=normal>2457</span>
<span class=normal>2458</span>
<span class=normal>2459</span>
<span class=normal>2460</span>
<span class=normal>2461</span>
<span class=normal>2462</span>
<span class=normal>2463</span>
<span class=normal>2464</span>
<span class=normal>2465</span>
<span class=normal>2466</span>
<span class=normal>2467</span>
<span class=normal>2468</span>
<span class=normal>2469</span>
<span class=normal>2470</span>
<span class=normal>2471</span>
<span class=normal>2472</span>
<span class=normal>2473</span>
<span class=normal>2474</span>
<span class=normal>2475</span>
<span class=normal>2476</span>
<span class=normal>2477</span>
<span class=normal>2478</span>
<span class=normal>2479</span>
<span class=normal>2480</span>
<span class=normal>2481</span>
<span class=normal>2482</span>
<span class=normal>2483</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>launch_workfiles_app</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Show workfiles tool on nuke launch.</span>

<span class=sd>    Trigger to show workfiles tool on application launch. Can be executed only</span>
<span class=sd>    once all other calls are ignored.</span>

<span class=sd>    Workfiles tool show is deferred after application initialization using</span>
<span class=sd>    QTimer.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>Context</span><span class=o>.</span><span class=n>workfiles_launched</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=n>Context</span><span class=o>.</span><span class=n>workfiles_launched</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=c1># get all important settings</span>
    <span class=n>open_at_start</span> <span class=o>=</span> <span class=n>env_value_to_bool</span><span class=p>(</span>
        <span class=n>env_key</span><span class=o>=</span><span class=s2>&quot;AYON_WORKFILE_TOOL_ON_START&quot;</span><span class=p>,</span>
        <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>

    <span class=c1># return if none is defined</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>open_at_start</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=c1># Show workfiles tool using timer</span>
    <span class=c1># - this will be probably triggered during initialization in that case</span>
    <span class=c1>#   the application is not be able to show uis so it must be</span>
    <span class=c1>#   deferred using timer</span>
    <span class=c1># - timer should be processed when initialization ends</span>
    <span class=c1>#       When applications starts to process events.</span>
    <span class=n>timer</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QTimer</span><span class=p>()</span>
    <span class=n>timer</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>_launch_workfile_app</span><span class=p>)</span>
    <span class=n>timer</span><span class=o>.</span><span class=n>setInterval</span><span class=p>(</span><span class=mi>100</span><span class=p>)</span>
    <span class=n>Context</span><span class=o>.</span><span class=n>workfiles_tool_timer</span> <span class=o>=</span> <span class=n>timer</span>
    <span class=n>timer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.link_knobs class="doc doc-heading"> <code class="highlight language-python"><span class=n>link_knobs</span><span class=p>(</span><span class=n>knobs</span><span class=p>,</span> <span class=n>node</span><span class=p>,</span> <span class=n>group_node</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Link knobs from inside <code>group_node</code></p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>3022</span>
<span class=normal>3023</span>
<span class=normal>3024</span>
<span class=normal>3025</span>
<span class=normal>3026</span>
<span class=normal>3027</span>
<span class=normal>3028</span>
<span class=normal>3029</span>
<span class=normal>3030</span>
<span class=normal>3031</span>
<span class=normal>3032</span>
<span class=normal>3033</span>
<span class=normal>3034</span>
<span class=normal>3035</span>
<span class=normal>3036</span>
<span class=normal>3037</span>
<span class=normal>3038</span>
<span class=normal>3039</span>
<span class=normal>3040</span>
<span class=normal>3041</span>
<span class=normal>3042</span>
<span class=normal>3043</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>link_knobs</span><span class=p>(</span><span class=n>knobs</span><span class=p>,</span> <span class=n>node</span><span class=p>,</span> <span class=n>group_node</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Link knobs from inside `group_node`&quot;&quot;&quot;</span>

    <span class=n>missing_knobs</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>knob</span> <span class=ow>in</span> <span class=n>knobs</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>knob</span> <span class=ow>in</span> <span class=n>group_node</span><span class=o>.</span><span class=n>knobs</span><span class=p>():</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>knob</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>()</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=n>missing_knobs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>

        <span class=n>link</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>Link_Knob</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
        <span class=n>link</span><span class=o>.</span><span class=n>makeLink</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>name</span><span class=p>(),</span> <span class=n>knob</span><span class=p>)</span>
        <span class=n>link</span><span class=o>.</span><span class=n>setName</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>
        <span class=n>link</span><span class=o>.</span><span class=n>setFlag</span><span class=p>(</span><span class=mh>0x1000</span><span class=p>)</span>
        <span class=n>group_node</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>link</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>missing_knobs</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=s2>&quot;Write node exposed knobs missing:</span><span class=se>\n\n</span><span class=si>{}</span><span class=se>\n\n</span><span class=s2>Please review&quot;</span>
            <span class=s2>&quot; project settings.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>missing_knobs</span><span class=p>))</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.maintained_selection class="doc doc-heading"> <code class="highlight language-python"><span class=n>maintained_selection</span><span class=p>(</span><span class=n>exclude_nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Maintain selection during context</p> <p>Maintain selection during context and unselect all nodes after context is done.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>exclude_nodes</code> </td> <td> <code><span title=list>list</span>[<span title=nuke.Node>Node</span>]</code> </td> <td> <div class=doc-md-description> <p>list of nodes to be unselected before context is done</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>with maintained_selection(): ... node["selected"].setValue(True) print(node["selected"].value()) False</p> </blockquote> </blockquote> </blockquote> </details> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2351</span>
<span class=normal>2352</span>
<span class=normal>2353</span>
<span class=normal>2354</span>
<span class=normal>2355</span>
<span class=normal>2356</span>
<span class=normal>2357</span>
<span class=normal>2358</span>
<span class=normal>2359</span>
<span class=normal>2360</span>
<span class=normal>2361</span>
<span class=normal>2362</span>
<span class=normal>2363</span>
<span class=normal>2364</span>
<span class=normal>2365</span>
<span class=normal>2366</span>
<span class=normal>2367</span>
<span class=normal>2368</span>
<span class=normal>2369</span>
<span class=normal>2370</span>
<span class=normal>2371</span>
<span class=normal>2372</span>
<span class=normal>2373</span>
<span class=normal>2374</span>
<span class=normal>2375</span>
<span class=normal>2376</span>
<span class=normal>2377</span>
<span class=normal>2378</span>
<span class=normal>2379</span>
<span class=normal>2380</span>
<span class=normal>2381</span>
<span class=normal>2382</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
<span class=k>def</span><span class=w> </span><span class=nf>maintained_selection</span><span class=p>(</span><span class=n>exclude_nodes</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Maintain selection during context</span>

<span class=sd>    Maintain selection during context and unselect</span>
<span class=sd>    all nodes after context is done.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        exclude_nodes (list[nuke.Node]): list of nodes to be unselected</span>
<span class=sd>                                         before context is done</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; with maintained_selection():</span>
<span class=sd>        ...     node[&quot;selected&quot;].setValue(True)</span>
<span class=sd>        &gt;&gt;&gt; print(node[&quot;selected&quot;].value())</span>
<span class=sd>        False</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>exclude_nodes</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>exclude_nodes</span><span class=p>:</span>
            <span class=n>node</span><span class=p>[</span><span class=s2>&quot;selected&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>

    <span class=n>previous_selection</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>selectedNodes</span><span class=p>()</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>yield</span>
    <span class=k>finally</span><span class=p>:</span>
        <span class=c1># unselect all selection in case there is some</span>
        <span class=n>reset_selection</span><span class=p>()</span>

        <span class=c1># and select all previously selected nodes</span>
        <span class=k>if</span> <span class=n>previous_selection</span><span class=p>:</span>
            <span class=n>select_nodes</span><span class=p>(</span><span class=n>previous_selection</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.node_tempfile class="doc doc-heading"> <code class="highlight language-python"><span class=n>node_tempfile</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Create a temp file where node is pasted during duplication.</p> <p>This is to avoid using clipboard for node duplication.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2777</span>
<span class=normal>2778</span>
<span class=normal>2779</span>
<span class=normal>2780</span>
<span class=normal>2781</span>
<span class=normal>2782</span>
<span class=normal>2783</span>
<span class=normal>2784</span>
<span class=normal>2785</span>
<span class=normal>2786</span>
<span class=normal>2787</span>
<span class=normal>2788</span>
<span class=normal>2789</span>
<span class=normal>2790</span>
<span class=normal>2791</span>
<span class=normal>2792</span>
<span class=normal>2793</span>
<span class=normal>2794</span>
<span class=normal>2795</span>
<span class=normal>2796</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
<span class=k>def</span><span class=w> </span><span class=nf>node_tempfile</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a temp file where node is pasted during duplication.</span>

<span class=sd>    This is to avoid using clipboard for node duplication.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>tmp_file</span> <span class=o>=</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>NamedTemporaryFile</span><span class=p>(</span>
        <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;AYON_nuke_temp_&quot;</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=s2>&quot;.nk&quot;</span><span class=p>,</span> <span class=n>delete</span><span class=o>=</span><span class=kc>False</span>
    <span class=p>)</span>
    <span class=n>tmp_file</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
    <span class=n>node_tempfile_path</span> <span class=o>=</span> <span class=n>tmp_file</span><span class=o>.</span><span class=n>name</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=c1># Yield the path where node can be copied</span>
        <span class=k>yield</span> <span class=n>node_tempfile_path</span>

    <span class=k>finally</span><span class=p>:</span>
        <span class=c1># Remove the file at the end</span>
        <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>node_tempfile_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.on_script_load class="doc doc-heading"> <code class="highlight language-python"><span class=n>on_script_load</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Callback for ffmpeg support</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>on_script_load</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Callback for ffmpeg support</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=k>if</span> <span class=n>nuke</span><span class=o>.</span><span class=n>env</span><span class=p>[</span><span class=s2>&quot;LINUX&quot;</span><span class=p>]:</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>tcl</span><span class=p>(</span><span class=s1>&#39;load ffmpegReader&#39;</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>tcl</span><span class=p>(</span><span class=s1>&#39;load ffmpegWriter&#39;</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>tcl</span><span class=p>(</span><span class=s1>&#39;load movReader&#39;</span><span class=p>)</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>tcl</span><span class=p>(</span><span class=s1>&#39;load movWriter&#39;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.process_workfile_builder class="doc doc-heading"> <code class="highlight language-python"><span class=n>process_workfile_builder</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>[DEPRECATED] Process workfile builder on nuke start</p> <p>This function is deprecated and will be removed in future versions. Use settings for <code>project_settings/nuke/templated_workfile_build</code> which are supported by api <code>start_workfile_template_builder()</code>.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2509</span>
<span class=normal>2510</span>
<span class=normal>2511</span>
<span class=normal>2512</span>
<span class=normal>2513</span>
<span class=normal>2514</span>
<span class=normal>2515</span>
<span class=normal>2516</span>
<span class=normal>2517</span>
<span class=normal>2518</span>
<span class=normal>2519</span>
<span class=normal>2520</span>
<span class=normal>2521</span>
<span class=normal>2522</span>
<span class=normal>2523</span>
<span class=normal>2524</span>
<span class=normal>2525</span>
<span class=normal>2526</span>
<span class=normal>2527</span>
<span class=normal>2528</span>
<span class=normal>2529</span>
<span class=normal>2530</span>
<span class=normal>2531</span>
<span class=normal>2532</span>
<span class=normal>2533</span>
<span class=normal>2534</span>
<span class=normal>2535</span>
<span class=normal>2536</span>
<span class=normal>2537</span>
<span class=normal>2538</span>
<span class=normal>2539</span>
<span class=normal>2540</span>
<span class=normal>2541</span>
<span class=normal>2542</span>
<span class=normal>2543</span>
<span class=normal>2544</span>
<span class=normal>2545</span>
<span class=normal>2546</span>
<span class=normal>2547</span>
<span class=normal>2548</span>
<span class=normal>2549</span>
<span class=normal>2550</span>
<span class=normal>2551</span>
<span class=normal>2552</span>
<span class=normal>2553</span>
<span class=normal>2554</span>
<span class=normal>2555</span>
<span class=normal>2556</span>
<span class=normal>2557</span>
<span class=normal>2558</span>
<span class=normal>2559</span>
<span class=normal>2560</span>
<span class=normal>2561</span>
<span class=normal>2562</span>
<span class=normal>2563</span>
<span class=normal>2564</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@deprecated</span><span class=p>(</span><span class=s2>&quot;ayon_nuke.api.lib.start_workfile_template_builder&quot;</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>process_workfile_builder</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; [DEPRECATED] Process workfile builder on nuke start</span>

<span class=sd>    This function is deprecated and will be removed in future versions.</span>
<span class=sd>    Use settings for `project_settings/nuke/templated_workfile_build` which are</span>
<span class=sd>    supported by api `start_workfile_template_builder()`.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># to avoid looping of the callback, remove it!</span>
    <span class=n>nuke</span><span class=o>.</span><span class=n>removeOnCreate</span><span class=p>(</span><span class=n>process_workfile_builder</span><span class=p>,</span> <span class=n>nodeClass</span><span class=o>=</span><span class=s2>&quot;Root&quot;</span><span class=p>)</span>

    <span class=c1># get state from settings</span>
    <span class=n>project_settings</span> <span class=o>=</span> <span class=n>get_current_project_settings</span><span class=p>()</span>
    <span class=n>workfile_builder</span> <span class=o>=</span> <span class=n>project_settings</span><span class=p>[</span><span class=s2>&quot;nuke&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
        <span class=s2>&quot;workfile_builder&quot;</span><span class=p>,</span> <span class=p>{})</span>

    <span class=c1># get settings</span>
    <span class=n>create_fv_on</span> <span class=o>=</span> <span class=n>workfile_builder</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create_first_version&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=kc>None</span>
    <span class=n>builder_on</span> <span class=o>=</span> <span class=n>workfile_builder</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;builder_on_start&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=kc>None</span>

    <span class=n>last_workfile_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_LAST_WORKFILE&quot;</span><span class=p>)</span>

    <span class=c1># generate first version in file not existing and feature is enabled</span>
    <span class=k>if</span> <span class=n>create_fv_on</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>last_workfile_path</span><span class=p>):</span>
        <span class=c1># get custom template path if any</span>
        <span class=n>custom_template_path</span> <span class=o>=</span> <span class=n>get_current_context_custom_workfile_template</span><span class=p>(</span>
            <span class=n>project_settings</span><span class=o>=</span><span class=n>project_settings</span>
        <span class=p>)</span>

        <span class=c1># if custom template is defined</span>
        <span class=k>if</span> <span class=n>custom_template_path</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Adding nodes from `</span><span class=si>{}</span><span class=s2>`...&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>custom_template_path</span>
            <span class=p>))</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=c1># import nodes into current script</span>
                <span class=n>nuke</span><span class=o>.</span><span class=n>nodePaste</span><span class=p>(</span><span class=n>custom_template_path</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>RuntimeError</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>((</span>
                    <span class=s2>&quot;Template defined for project: </span><span class=si>{}</span><span class=s2> is not working. &quot;</span>
                    <span class=s2>&quot;Talk to your manager for an advise&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>custom_template_path</span><span class=p>))</span>

        <span class=c1># if builder at start is defined</span>
        <span class=k>if</span> <span class=n>builder_on</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Building nodes from presets...&quot;</span><span class=p>)</span>
            <span class=c1># build nodes by defined presets</span>
            <span class=n>BuildWorkfile</span><span class=p>()</span><span class=o>.</span><span class=n>process</span><span class=p>()</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Saving script as version `</span><span class=si>{}</span><span class=s2>`...&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>last_workfile_path</span>
        <span class=p>))</span>
        <span class=c1># safe file as version</span>
        <span class=n>save_file</span><span class=p>(</span><span class=n>last_workfile_path</span><span class=p>)</span>
        <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.read_avalon_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>read_avalon_data</span><span class=p>(</span><span class=n>node</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return user-defined knobs from given <code>node</code></p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>Nuke node object</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> </td> <td> <div class=doc-md-description> <p>A list of nuke.Knob object</p> </div> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>read_avalon_data</span><span class=p>(</span><span class=n>node</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return user-defined knobs from given `node`</span>

<span class=sd>    Args:</span>
<span class=sd>        node (nuke.Node): Nuke node object</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: A list of nuke.Knob object</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=nf>compat_prefixed</span><span class=p>(</span><span class=n>knob_name</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>knob_name</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;avalon:&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>knob_name</span><span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=s2>&quot;avalon:&quot;</span><span class=p>):]</span>
        <span class=k>elif</span> <span class=n>knob_name</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;ak:&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>knob_name</span><span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=s2>&quot;ak:&quot;</span><span class=p>):]</span>

    <span class=n>data</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>

    <span class=n>pattern</span> <span class=o>=</span> <span class=p>(</span><span class=s2>&quot;(?&lt;=addUserKnob {)&quot;</span>
               <span class=s2>&quot;([0-9]*) (</span><span class=se>\\</span><span class=s2>S*)&quot;</span>  <span class=c1># Matching knob type and knob name</span>
               <span class=s2>&quot;(?=[ |}])&quot;</span><span class=p>)</span>
    <span class=n>tcl_script</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>writeKnobs</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>WRITE_USER_KNOB_DEFS</span><span class=p>)</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>tcl_script</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
        <span class=n>first_user_knob</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
        <span class=c1># Collect user knobs from the end of the knob list</span>
        <span class=k>for</span> <span class=n>knob</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>allKnobs</span><span class=p>()):</span>
            <span class=n>knob_name</span> <span class=o>=</span> <span class=n>knob</span><span class=o>.</span><span class=n>name</span><span class=p>()</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>knob_name</span><span class=p>:</span>
                <span class=c1># Ignore unnamed knob</span>
                <span class=k>continue</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>knob_type</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>knob</span><span class=p>(</span><span class=n>knob</span><span class=o>.</span><span class=n>fullyQualifiedName</span><span class=p>(),</span> <span class=nb>type</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
                <span class=n>value</span> <span class=o>=</span> <span class=n>knob</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Error in knob </span><span class=si>{</span><span class=n>knob_name</span><span class=si>}</span><span class=s2>, node </span><span class=si>{</span><span class=n>node</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
                <span class=k>continue</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>knob_type</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>EXCLUDED_KNOB_TYPE_ON_READ</span> <span class=ow>or</span>
                <span class=c1># For compating read-only string data that imprinted</span>
                <span class=c1># by `nuke.Text_Knob`.</span>
                <span class=p>(</span><span class=n>knob_type</span> <span class=o>==</span> <span class=mi>26</span> <span class=ow>and</span> <span class=n>value</span><span class=p>)</span>
            <span class=p>):</span>
                <span class=n>key</span> <span class=o>=</span> <span class=n>compat_prefixed</span><span class=p>(</span><span class=n>knob_name</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>key</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

            <span class=k>if</span> <span class=n>knob_name</span> <span class=o>==</span> <span class=n>first_user_knob</span><span class=p>:</span>
                <span class=k>break</span>

    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.refresh_node class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh_node</span><span class=p>(</span><span class=n>node</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Correct a bug caused by the multi-threading of nuke.</p> <p>Refresh the node to make sure that it takes the desired attributes.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2870</span>
<span class=normal>2871</span>
<span class=normal>2872</span>
<span class=normal>2873</span>
<span class=normal>2874</span>
<span class=normal>2875</span>
<span class=normal>2876</span>
<span class=normal>2877</span>
<span class=normal>2878</span>
<span class=normal>2879</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh_node</span><span class=p>(</span><span class=n>node</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Correct a bug caused by the multi-threading of nuke.</span>

<span class=sd>    Refresh the node to make sure that it takes the desired attributes.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>x</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>xpos</span><span class=p>()</span>
    <span class=n>y</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span>
    <span class=n>nuke</span><span class=o>.</span><span class=n>autoplaceSnap</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
    <span class=n>node</span><span class=o>.</span><span class=n>setXYpos</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.reset_selection class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_selection</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Deselect all selected nodes</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2430</span>
<span class=normal>2431</span>
<span class=normal>2432</span>
<span class=normal>2433</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_selection</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deselect all selected nodes&quot;&quot;&quot;</span>
    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nuke</span><span class=o>.</span><span class=n>selectedNodes</span><span class=p>():</span>
        <span class=n>node</span><span class=p>[</span><span class=s2>&quot;selected&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.script_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>script_name</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Returns nuke script path</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>script_name</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&#39;&#39;&#39; Returns nuke script path</span>
<span class=sd>    &#39;&#39;&#39;</span>
    <span class=k>return</span> <span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>()</span><span class=o>.</span><span class=n>knob</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.select_nodes class="doc doc-heading"> <code class="highlight language-python"><span class=n>select_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Selects all inputted nodes</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>nodes</code> </td> <td> <code><span title=Union>Union</span>[<span title=list>list</span>, <span title=tuple>tuple</span>, <span title=set>set</span>]</code> </td> <td> <div class=doc-md-description> <p>nuke nodes to be selected</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2436</span>
<span class=normal>2437</span>
<span class=normal>2438</span>
<span class=normal>2439</span>
<span class=normal>2440</span>
<span class=normal>2441</span>
<span class=normal>2442</span>
<span class=normal>2443</span>
<span class=normal>2444</span>
<span class=normal>2445</span>
<span class=normal>2446</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>select_nodes</span><span class=p>(</span><span class=n>nodes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Selects all inputted nodes</span>

<span class=sd>    Arguments:</span>
<span class=sd>        nodes (Union[list, tuple, set]): nuke nodes to be selected</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>,</span> <span class=nb>set</span><span class=p>)),</span> \
        <span class=s2>&quot;nodes has to be list, tuple or set&quot;</span>

    <span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span><span class=p>:</span>
        <span class=n>node</span><span class=p>[</span><span class=s2>&quot;selected&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.set_avalon_knob_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_avalon_knob_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s1>&#39;avalon:&#39;</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>[DEPRECATED] Sets data into nodes's avalon knob</p> <p>This function is still used but soon will be deprecated. Use <code>set_node_data</code> instead.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>Nuke node to imprint with data,</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data to be imprinted into AvalonTab</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>filtering prefix</p> </div> </td> <td> <code>&#39;avalon:&#39;</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>node (nuke.Node)</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Examples:</span></p> <p>data = { 'folderPath': 'sq020sh0280', 'productType': 'render', 'productName': 'productMain' }</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@deprecated</span><span class=p>(</span><span class=s2>&quot;ayon_nuke.api.lib.set_node_data&quot;</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>set_avalon_knob_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;avalon:&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;[DEPRECATED] Sets data into nodes&#39;s avalon knob</span>

<span class=sd>    This function is still used but soon will be deprecated.</span>
<span class=sd>    Use `set_node_data` instead.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        node (nuke.Node): Nuke node to imprint with data,</span>
<span class=sd>        data (dict, optional): Data to be imprinted into AvalonTab</span>
<span class=sd>        prefix (str, optional): filtering prefix</span>

<span class=sd>    Returns:</span>
<span class=sd>        node (nuke.Node)</span>

<span class=sd>    Examples:</span>
<span class=sd>        data = {</span>
<span class=sd>            &#39;folderPath&#39;: &#39;sq020sh0280&#39;,</span>
<span class=sd>            &#39;productType&#39;: &#39;render&#39;,</span>
<span class=sd>            &#39;productName&#39;: &#39;productMain&#39;</span>
<span class=sd>        }</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>data</span> <span class=o>=</span> <span class=n>data</span> <span class=ow>or</span> <span class=nb>dict</span><span class=p>()</span>
    <span class=n>create</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>

    <span class=n>tab_name</span> <span class=o>=</span> <span class=n>NODE_TAB_NAME</span>
    <span class=n>editable</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>,</span> <span class=s2>&quot;productName&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;namespace&quot;</span><span class=p>]</span>

    <span class=n>existed_knobs</span> <span class=o>=</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>()</span>

    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>knob_name</span> <span class=o>=</span> <span class=n>prefix</span> <span class=o>+</span> <span class=n>key</span>
        <span class=n>gui_name</span> <span class=o>=</span> <span class=n>key</span>

        <span class=k>if</span> <span class=n>knob_name</span> <span class=ow>in</span> <span class=n>existed_knobs</span><span class=p>:</span>
            <span class=c1># Set value</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>node</span><span class=p>[</span><span class=n>knob_name</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
                <span class=n>node</span><span class=p>[</span><span class=n>knob_name</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># New knob</span>
            <span class=n>name</span> <span class=o>=</span> <span class=p>(</span><span class=n>knob_name</span><span class=p>,</span> <span class=n>gui_name</span><span class=p>)</span>  <span class=c1># Hide prefix on GUI</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>editable</span><span class=p>:</span>
                <span class=n>create</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>create</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>Knobby</span><span class=p>(</span><span class=s2>&quot;String_Knob&quot;</span><span class=p>,</span>
                                      <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>),</span>
                                      <span class=n>flags</span><span class=o>=</span><span class=p>[</span><span class=n>nuke</span><span class=o>.</span><span class=n>READ_ONLY</span><span class=p>])</span>
    <span class=k>if</span> <span class=n>tab_name</span> <span class=ow>in</span> <span class=n>existed_knobs</span><span class=p>:</span>
        <span class=n>tab_name</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>tab</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>
        <span class=n>warn</span> <span class=o>=</span> <span class=n>Knobby</span><span class=p>(</span><span class=s2>&quot;Text_Knob&quot;</span><span class=p>,</span> <span class=s2>&quot;Warning! Do not change following data!&quot;</span><span class=p>)</span>
        <span class=n>divd</span> <span class=o>=</span> <span class=n>Knobby</span><span class=p>(</span><span class=s2>&quot;Text_Knob&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span>
        <span class=n>head</span> <span class=o>=</span> <span class=p>[</span>
            <span class=p>((</span><span class=s2>&quot;warn&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span> <span class=n>warn</span><span class=p>),</span>
            <span class=p>((</span><span class=s2>&quot;divd&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span> <span class=n>divd</span><span class=p>),</span>
        <span class=p>]</span>
        <span class=n>tab</span><span class=p>[</span><span class=n>DATA_GROUP_KEY</span><span class=p>]</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>(</span><span class=n>head</span> <span class=o>+</span> <span class=nb>list</span><span class=p>(</span><span class=n>create</span><span class=o>.</span><span class=n>items</span><span class=p>()))</span>
        <span class=n>create</span> <span class=o>=</span> <span class=n>tab</span>

    <span class=n>imprint</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>create</span><span class=p>,</span> <span class=n>tab</span><span class=o>=</span><span class=n>tab_name</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>node</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.set_node_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Write data to node invisible knob</p> <p>Will create new in case it doesn't exists or update the one already created.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>node object</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>knobname</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>knob name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>data to be stored in knob</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Write data to node invisible knob</span>

<span class=sd>    Will create new in case it doesn&#39;t exists</span>
<span class=sd>    or update the one already created.</span>

<span class=sd>    Args:</span>
<span class=sd>        node (nuke.Node): node object</span>
<span class=sd>        knobname (str): knob name</span>
<span class=sd>        data (dict): data to be stored in knob</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># if exists then update data</span>
    <span class=k>if</span> <span class=n>knobname</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>():</span>
        <span class=n>update_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=c1># else create new</span>
    <span class=n>knob_value</span> <span class=o>=</span> <span class=n>JSON_PREFIX</span> <span class=o>+</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=n>knob</span> <span class=o>=</span> <span class=n>nuke</span><span class=o>.</span><span class=n>String_Knob</span><span class=p>(</span><span class=n>knobname</span><span class=p>)</span>
    <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knob_value</span><span class=p>)</span>
    <span class=n>knob</span><span class=o>.</span><span class=n>setFlag</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>INVISIBLE</span><span class=p>)</span>
    <span class=n>node</span><span class=o>.</span><span class=n>addKnob</span><span class=p>(</span><span class=n>knob</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.set_node_knobs_from_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_node_knobs_from_settings</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knob_settings</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Overriding knob values from settings</p> <p>Using <code>schema_nuke_knob_inputs</code> for knob type definitions.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>nuke node</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>knob_settings</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of dict. Keys are <code>type</code>, <code>name</code>, <code>value</code></p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>kwargs (dict)[optional]</code> </td> <td> </td> <td> <div class=doc-md-description> <p>keys for formattable knob settings</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1335</span>
<span class=normal>1336</span>
<span class=normal>1337</span>
<span class=normal>1338</span>
<span class=normal>1339</span>
<span class=normal>1340</span>
<span class=normal>1341</span>
<span class=normal>1342</span>
<span class=normal>1343</span>
<span class=normal>1344</span>
<span class=normal>1345</span>
<span class=normal>1346</span>
<span class=normal>1347</span>
<span class=normal>1348</span>
<span class=normal>1349</span>
<span class=normal>1350</span>
<span class=normal>1351</span>
<span class=normal>1352</span>
<span class=normal>1353</span>
<span class=normal>1354</span>
<span class=normal>1355</span>
<span class=normal>1356</span>
<span class=normal>1357</span>
<span class=normal>1358</span>
<span class=normal>1359</span>
<span class=normal>1360</span>
<span class=normal>1361</span>
<span class=normal>1362</span>
<span class=normal>1363</span>
<span class=normal>1364</span>
<span class=normal>1365</span>
<span class=normal>1366</span>
<span class=normal>1367</span>
<span class=normal>1368</span>
<span class=normal>1369</span>
<span class=normal>1370</span>
<span class=normal>1371</span>
<span class=normal>1372</span>
<span class=normal>1373</span>
<span class=normal>1374</span>
<span class=normal>1375</span>
<span class=normal>1376</span>
<span class=normal>1377</span>
<span class=normal>1378</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_node_knobs_from_settings</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knob_settings</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; Overriding knob values from settings</span>

<span class=sd>    Using `schema_nuke_knob_inputs` for knob type definitions.</span>

<span class=sd>    Args:</span>
<span class=sd>        node (nuke.Node): nuke node</span>
<span class=sd>        knob_settings (list): list of dict. Keys are `type`, `name`, `value`</span>
<span class=sd>        kwargs (dict)[optional]: keys for formattable knob settings</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>for</span> <span class=n>knob</span> <span class=ow>in</span> <span class=n>knob_settings</span><span class=p>:</span>
        <span class=n>knob_name</span> <span class=o>=</span> <span class=n>knob</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>knob_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>node</span><span class=o>.</span><span class=n>knobs</span><span class=p>():</span>
            <span class=k>continue</span>

        <span class=n>knob_type</span> <span class=o>=</span> <span class=n>knob</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>]</span>
        <span class=n>knob_value</span> <span class=o>=</span> <span class=n>knob</span><span class=p>[</span><span class=n>knob_type</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>knob_type</span> <span class=o>==</span> <span class=s2>&quot;expression&quot;</span><span class=p>:</span>
            <span class=n>node</span><span class=p>[</span><span class=n>knob_name</span><span class=p>]</span><span class=o>.</span><span class=n>setExpression</span><span class=p>(</span><span class=n>knob_value</span><span class=p>)</span>
            <span class=k>continue</span>

        <span class=c1># first deal with formattable knob settings</span>
        <span class=k>if</span> <span class=n>knob_type</span> <span class=o>==</span> <span class=s2>&quot;formatable&quot;</span><span class=p>:</span>
            <span class=n>template</span> <span class=o>=</span> <span class=n>knob_value</span><span class=p>[</span><span class=s2>&quot;template&quot;</span><span class=p>]</span>
            <span class=n>to_type</span> <span class=o>=</span> <span class=n>knob_value</span><span class=p>[</span><span class=s2>&quot;to_type&quot;</span><span class=p>]</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>knob_value</span> <span class=o>=</span> <span class=n>template</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>msg</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
                    <span class=s2>&quot;Not able to format expression: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>msg</span><span class=p>))</span>

            <span class=c1># convert value to correct type</span>
            <span class=k>if</span> <span class=n>to_type</span> <span class=o>==</span> <span class=s2>&quot;2d_vector&quot;</span><span class=p>:</span>
                <span class=n>knob_value</span> <span class=o>=</span> <span class=n>knob_value</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;,&quot;</span><span class=p>)</span>

            <span class=n>knob_type</span> <span class=o>=</span> <span class=n>to_type</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>knob_value</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=n>knob_value</span> <span class=o>=</span> <span class=n>convert_knob_value_to_correct_type</span><span class=p>(</span>
            <span class=n>knob_type</span><span class=p>,</span> <span class=n>knob_value</span><span class=p>)</span>

        <span class=n>node</span><span class=p>[</span><span class=n>knob_name</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knob_value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.swap_node_with_dependency class="doc doc-heading"> <code class="highlight language-python"><span class=n>swap_node_with_dependency</span><span class=p>(</span><span class=n>old_node</span><span class=p>,</span> <span class=n>new_node</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Swap node with dependency</p> <p>Swap node with dependency and reconnect all inputs and outputs. It removes old node.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>old_node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>node to be replaced</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>new_node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>node to replace with</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>old_node_name = old_node["name"].value() print(old_node_name) old_node_name_01 with swap_node_with_dependency(old_node, new_node) as node_name: ... new_node["name"].setValue(node_name) print(new_node["name"].value()) old_node_name_01</p> </blockquote> </blockquote> </blockquote> </details> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2385</span>
<span class=normal>2386</span>
<span class=normal>2387</span>
<span class=normal>2388</span>
<span class=normal>2389</span>
<span class=normal>2390</span>
<span class=normal>2391</span>
<span class=normal>2392</span>
<span class=normal>2393</span>
<span class=normal>2394</span>
<span class=normal>2395</span>
<span class=normal>2396</span>
<span class=normal>2397</span>
<span class=normal>2398</span>
<span class=normal>2399</span>
<span class=normal>2400</span>
<span class=normal>2401</span>
<span class=normal>2402</span>
<span class=normal>2403</span>
<span class=normal>2404</span>
<span class=normal>2405</span>
<span class=normal>2406</span>
<span class=normal>2407</span>
<span class=normal>2408</span>
<span class=normal>2409</span>
<span class=normal>2410</span>
<span class=normal>2411</span>
<span class=normal>2412</span>
<span class=normal>2413</span>
<span class=normal>2414</span>
<span class=normal>2415</span>
<span class=normal>2416</span>
<span class=normal>2417</span>
<span class=normal>2418</span>
<span class=normal>2419</span>
<span class=normal>2420</span>
<span class=normal>2421</span>
<span class=normal>2422</span>
<span class=normal>2423</span>
<span class=normal>2424</span>
<span class=normal>2425</span>
<span class=normal>2426</span>
<span class=normal>2427</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
<span class=k>def</span><span class=w> </span><span class=nf>swap_node_with_dependency</span><span class=p>(</span><span class=n>old_node</span><span class=p>,</span> <span class=n>new_node</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; Swap node with dependency</span>

<span class=sd>    Swap node with dependency and reconnect all inputs and outputs.</span>
<span class=sd>    It removes old node.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        old_node (nuke.Node): node to be replaced</span>
<span class=sd>        new_node (nuke.Node): node to replace with</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; old_node_name = old_node[&quot;name&quot;].value()</span>
<span class=sd>        &gt;&gt;&gt; print(old_node_name)</span>
<span class=sd>        old_node_name_01</span>
<span class=sd>        &gt;&gt;&gt; with swap_node_with_dependency(old_node, new_node) as node_name:</span>
<span class=sd>        ...     new_node[&quot;name&quot;].setValue(node_name)</span>
<span class=sd>        &gt;&gt;&gt; print(new_node[&quot;name&quot;].value())</span>
<span class=sd>        old_node_name_01</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># preserve position</span>
    <span class=n>xpos</span><span class=p>,</span> <span class=n>ypos</span> <span class=o>=</span> <span class=n>old_node</span><span class=o>.</span><span class=n>xpos</span><span class=p>(),</span> <span class=n>old_node</span><span class=o>.</span><span class=n>ypos</span><span class=p>()</span>
    <span class=c1># preserve selection after all is done</span>
    <span class=n>outputs</span> <span class=o>=</span> <span class=n>get_node_outputs</span><span class=p>(</span><span class=n>old_node</span><span class=p>)</span>
    <span class=n>inputs</span> <span class=o>=</span> <span class=n>old_node</span><span class=o>.</span><span class=n>dependencies</span><span class=p>()</span>
    <span class=n>node_name</span> <span class=o>=</span> <span class=n>old_node</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>nuke</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>old_node</span><span class=p>)</span>

        <span class=k>yield</span> <span class=n>node_name</span>
    <span class=k>finally</span><span class=p>:</span>

        <span class=c1># Reconnect inputs</span>
        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>node</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>inputs</span><span class=p>):</span>
            <span class=n>new_node</span><span class=o>.</span><span class=n>setInput</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>node</span><span class=p>)</span>
        <span class=c1># Reconnect outputs</span>
        <span class=k>if</span> <span class=n>outputs</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>n</span><span class=p>,</span> <span class=n>pipes</span> <span class=ow>in</span> <span class=n>outputs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>pipes</span><span class=p>:</span>
                    <span class=n>n</span><span class=o>.</span><span class=n>setInput</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>new_node</span><span class=p>)</span>
        <span class=c1># return to original position</span>
        <span class=n>new_node</span><span class=o>.</span><span class=n>setXYpos</span><span class=p>(</span><span class=n>xpos</span><span class=p>,</span> <span class=n>ypos</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.update_node_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Update already present data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>node</code> </td> <td> <code><span title=nuke.Node>Node</span></code> </td> <td> <div class=doc-md-description> <p>node object</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>knobname</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>knob name</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>data to update knob value</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>update_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update already present data.</span>

<span class=sd>    Args:</span>
<span class=sd>        node (nuke.Node): node object</span>
<span class=sd>        knobname (str): knob name</span>
<span class=sd>        data (dict): data to update knob value</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>knob</span> <span class=o>=</span> <span class=n>node</span><span class=p>[</span><span class=n>knobname</span><span class=p>]</span>
    <span class=n>node_data</span> <span class=o>=</span> <span class=n>get_node_data</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>knobname</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
    <span class=n>node_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=n>knob_value</span> <span class=o>=</span> <span class=n>JSON_PREFIX</span> <span class=o>+</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>node_data</span><span class=p>)</span>
    <span class=n>knob</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>knob_value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_nuke.api.lib.writes_version_sync class="doc doc-heading"> <code class="highlight language-python"><span class=n>writes_version_sync</span><span class=p>(</span><span class=n>write_node</span><span class=p>,</span> <span class=n>log</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Callback synchronizing version of publishable write nodes</p> <p>Tries to find version string in render path of write node and bump it to workfile version.</p> <details class=mkdocstrings-source> <summary>Source code in <code>client/ayon_nuke/api/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>writes_version_sync</span><span class=p>(</span><span class=n>write_node</span><span class=p>,</span> <span class=n>log</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; Callback synchronizing version of publishable write nodes</span>

<span class=sd>    Tries to find version string in render path of write node and bump it to</span>
<span class=sd>    workfile version.</span>

<span class=sd>    Args:</span>
<span class=sd>        write_node (nuke.Node)</span>
<span class=sd>        log (logging.Logger) - logger to output messages into Publisher</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>rootVersion</span> <span class=o>=</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>nuke</span><span class=o>.</span><span class=n>root</span><span class=p>()</span><span class=o>.</span><span class=n>name</span><span class=p>())</span>
        <span class=n>padding</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>rootVersion</span><span class=p>)</span>
        <span class=n>new_version</span> <span class=o>=</span> <span class=s2>&quot;v&quot;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=s2>&quot;{&quot;</span> <span class=o>+</span> <span class=s2>&quot;:0&gt;</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>padding</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&quot;}&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=nb>int</span><span class=p>(</span><span class=n>rootVersion</span><span class=p>)</span>
        <span class=p>)</span>
    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Scene name doesn&#39;t have version part.&quot;</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>write_path</span> <span class=o>=</span> <span class=n>write_node</span><span class=p>[</span><span class=s2>&quot;file&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>value</span><span class=p>()</span>
        <span class=n>node_version</span> <span class=o>=</span> <span class=s2>&quot;v&quot;</span> <span class=o>+</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>write_path</span><span class=p>)</span>
        <span class=n>node_new_file</span> <span class=o>=</span> <span class=n>write_path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>node_version</span><span class=p>,</span> <span class=n>new_version</span><span class=p>)</span>

        <span class=k>def</span><span class=w> </span><span class=nf>replace_match</span><span class=p>(</span><span class=n>match</span><span class=p>):</span>
            <span class=n>x_value</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>match</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>  <span class=c1># Extract the number X</span>
            <span class=k>return</span> <span class=s1>&#39;#&#39;</span> <span class=o>*</span> <span class=n>x_value</span>  <span class=c1># Return &#39;#&#39; repeated X times</span>

        <span class=c1># Use regex to find all occurrences of &#39;%0Xd&#39; with `#`s</span>
        <span class=n>node_new_file</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=sa>r</span><span class=s1>&#39;%0*(\d+)d&#39;</span><span class=p>,</span> <span class=n>replace_match</span><span class=p>,</span> <span class=n>node_new_file</span><span class=p>)</span>

        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Overwriting Write path to &#39;</span><span class=si>{</span><span class=n>node_new_file</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
        <span class=n>write_node</span><span class=p>[</span><span class=s2>&quot;file&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>setValue</span><span class=p>(</span><span class=n>node_new_file</span><span class=p>)</span>
        <span class=n>render_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>node_new_file</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>render_dir</span><span class=p>):</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Path &#39;</span><span class=si>{</span><span class=n>render_dir</span><span class=si>}</span><span class=s2>&#39; does not exist! Creating it.&quot;</span><span class=p>)</span>
            <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>render_dir</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Write node: `</span><span class=si>{</span><span class=n>write_node</span><span class=o>.</span><span class=n>name</span><span class=p>()</span><span class=si>}</span><span class=s2>` has no version &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;in path: &#39;</span><span class=si>{</span><span class=n>write_path</span><span class=si>}</span><span class=s2>&#39;. Expected format as `.vXXX` or `_vXXX`.&quot;</span><span class=p>,</span>
            <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>